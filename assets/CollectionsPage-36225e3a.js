import{_ as C,U as v,a as d,l as x,o as a,c as p,F as w,d as T,f as m,b as e,e as c,w as r,n as D,s as F,t as h,m as n,p as V,g as R}from"./index-2946e483.js";import"./ContractHelper-e9562618.js";import{s as U}from"./supabase-99bd82aa.js";import"./browser-ponyfill-532a798f.js";const q={name:"CollectionsPage",components:{},data(){return{loadState:0,bReqFail:!1,bHelpDialogVisible:!1,kFailTip:"Request fail, please try again later",collections:[]}},async mounted(){this.loadCollections()},methods:{async fillFakeData(o){this.loadState=1;const t={id:"megapont-ape-club",name:"Megapont Ape Club",iconUrl:"https://images.gamma.io/cdn-cgi/image/quality=100,width=150,height=150/https://images.gamma.io/ipfs/QmZjrCc9836Njqw1Yx8ztM6FbJzvuZijwtZJSkKPxLTMWU/225f43251ea44",rangeStart:100,rangeEnd:200};for(let s=0;s<o;s++)this.collections.push(t);this.loadState=2},async loadCollections(){try{this.loadState=1;const{data:o,error:t,status:s}=await U.from("collection").select("id, name, iconurl, startno, endno").order("priority",{ascending:!0}).limit(30);s==200&&!t?(this.bReqFail=!1,this.setTableData(o)):(console.log("loadCollections fail, status:",s,"error: ",t),v.alert(this.kFailTip))}catch{v.alert(this.kFailTip),this.bReqFail=!0}finally{this.loadState=2}},setTableData(o){for(const t of o)this.collections.push({id:t.id,name:t.name,iconUrl:t.iconurl,rangeStart:t.startno,rangeEnd:t.endno})},onClickCollection(o){const t=this.$router.resolve({path:`/collection/${this.collections[o-1].id}`});window.open(t.href,"_blank")},onClickShowHelp(){this.bHelpDialogVisible=!0}}},f=o=>(V("data-v-7594e7e3"),o=o(),R(),o),H={id:"main"},I=f(()=>e("div",{id:"title"},"Collections",-1)),A={key:0,id:"cardAreaOuter"},E={class:"collectionTitle"},L={class:"collectionRange"},M={key:1,style:{"margin-top":"100px"}},N={style:{position:"fixed",bottom:"50px",left:"50%",transform:"translate(-50%, 0%)"}},P={key:2,style:{"min-height":"200px"},"element-loading-background":"rgba(0, 0, 0, 0)"},B=f(()=>e("div",{id:"helpContent"},[e("div",null,"Step 1."),e("div",null,[n("Use the mint address of the first inscription in your collection, send 0.1 STX to "),e("a",{href:"https://explorer.hiro.so/txid/SP1BMZTS416A3VTMN0SYTRMEJSCHW75RRAKXWF4DZ.inscription-text-indexer?chain=mainnet",target:"_blank",class:"helpLink"},"text indexer contract"),n(", fill memo with your email address.")]),e("p"),e("div",null,"Step 2."),e("div",null,[n("Use the email address above, send email to "),e("a",{href:"mailto:stacksinscription@proton.me",class:"helpLink"},"stacksinscription@proton.me"),n(" with:")]),e("div",null,"* Transaction link in step 1."),e("div",null,"* Collection name (less than 64 characters)."),e("div",null,"* Logo file (128x128 pixels, as attachment)."),e("div",null,"* Description (less than 1000 characters)"),e("div",null,"* Twitter"),e("div",null,"* Website (optional)"),e("div",null,"* Discord (optional)"),e("div",null,"* Telegram (optional)"),e("div",null,[n("* Inscription ID list (use comma(,) as seperator, "),e("a",{href:"https://stacksinscription.com/#/tools",target:"_blank",class:"helpLink"},"this tool"),n(" may help)")]),e("div",null,"* Total count"),e("p"),e("div",null,"PS:"),e("div",null,"* Collection needs contain at least 100 images.")],-1));function Z(o,t,s,W,l,u){const k=d("el-avatar"),_=d("el-space"),b=d("el-card"),g=d("el-button"),S=d("el-dialog"),y=x("loading");return a(),p("div",H,[I,l.loadState==2&&l.collections.length>0?(a(),p("div",A,[(a(!0),p(w,null,T(l.collections.length,i=>(a(),F(g,{link:"",plain:"",class:"itemArea",key:i,onClick:j=>u.onClickCollection(i)},{default:r(()=>[c(b,{shadow:"hover",class:"cardArea","body-style":{padding:"8px"}},{default:r(()=>[c(_,null,{default:r(()=>[c(k,{shape:"circle",size:64,src:l.collections[i-1].iconUrl},null,8,["src"]),c(_,{direction:"vertical",alignment:"start",style:{"margin-left":"8px","text-align":"left"}},{default:r(()=>[e("div",E,h(l.collections[i-1].name),1),e("div",L,"#"+h(l.collections[i-1].rangeStart)+" - #"+h(l.collections[i-1].rangeEnd),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):m("",!0),l.loadState==2&&!l.bReqFail&&l.collections.length==0?(a(),p("div",M," Empty ")):m("",!0),e("div",N,[c(g,{type:"info",link:"",onClick:u.onClickShowHelp},{default:r(()=>[n("Submit collection")]),_:1},8,["onClick"])]),l.loadState==1?D((a(),p("div",P,null,512)),[[y,l.loadState==1]]):m("",!0),c(S,{center:!0,title:"Submit collection",modelValue:l.bHelpDialogVisible,"onUpdate:modelValue":t[0]||(t[0]=i=>l.bHelpDialogVisible=i),width:"800px"},{default:r(()=>[B]),_:1},8,["modelValue"])])}const Y=C(q,[["render",Z],["__scopeId","data-v-7594e7e3"]]);export{Y as default};
