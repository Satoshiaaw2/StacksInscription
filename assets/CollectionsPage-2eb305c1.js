import{_ as y,U as g,a,l as w,o as n,c,F as T,d as D,f as m,b as e,e as r,w as d,n as F,s as V,t as u,m as p,p as x,g as R}from"./index-17d170b8.js";import"./ContractHelper-52ce6d50.js";import{s as U}from"./supabase-207fc780.js";import"./browser-ponyfill-481e6c3c.js";const q={name:"CollectionsPage",components:{},data(){return{loadState:0,bReqFail:!1,bHelpDialogVisible:!1,kFailTip:"Request fail, please try again later",collections:[]}},async mounted(){this.loadCollections()},methods:{async fillFakeData(o){this.loadState=1;const t={id:"megapont-ape-club",name:"Megapont Ape Club",iconUrl:"https://images.gamma.io/cdn-cgi/image/quality=100,width=150,height=150/https://images.gamma.io/ipfs/QmZjrCc9836Njqw1Yx8ztM6FbJzvuZijwtZJSkKPxLTMWU/225f43251ea44",rangeStart:100,rangeEnd:200};for(let s=0;s<o;s++)this.collections.push(t);this.loadState=2},async loadCollections(){try{this.loadState=1;const{data:o,error:t,status:s}=await U.from("collection").select("id, name, iconurl, startno, endno").order("priority",{ascending:!0}).limit(30);s==200&&!t?(this.bReqFail=!1,this.setTableData(o)):(console.log("loadCollections fail, status:",s,"error: ",t),g.alert(this.kFailTip))}catch{g.alert(this.kFailTip),this.bReqFail=!0}finally{this.loadState=2}},setTableData(o){for(const t of o)this.collections.push({id:t.id,name:t.name,iconUrl:t.iconurl,rangeStart:t.startno,rangeEnd:t.endno})},onClickCollection(o){const t=this.$router.resolve({path:`/collection/${this.collections[o-1].id}`});window.open(t.href,"_blank")},onClickShowHelp(){this.bHelpDialogVisible=!0}}},v=o=>(x("data-v-038c4796"),o=o(),R(),o),H={id:"main"},I=v(()=>e("div",{id:"title"},"Collections",-1)),A={key:0,id:"cardAreaOuter"},E={class:"collectionTitle"},M={class:"collectionRange"},N={key:1,style:{"margin-top":"100px"}},P={style:{position:"fixed",bottom:"50px",left:"50%",transform:"translate(-50%, 0%)"}},B={key:2,style:{"min-height":"200px"},"element-loading-background":"rgba(0, 0, 0, 0)"},L=v(()=>e("div",{id:"helpContent"},[e("div",null,"Step 1."),e("div",null,"Use the mint address of the first inscription in your collection, send 0.1 STX to SP1BMZTS416A3VTMN0SYTRMEJSCHW75RRAKXWF4DZ, fill memo with your email address."),e("p"),e("div",null,"Step 2."),e("div",null,[p("Use the email address above, send email to "),e("a",{href:"mailto:stacksinscription@proton.me",class:"helpLink"},"stacksinscription@proton.me"),p(" with:")]),e("div",null,"* Transaction link in step 1."),e("div",null,"* Collection name (less than 64 characters)."),e("div",null,"* Logo file (128x128 pixels, as attachment)."),e("div",null,"* Description (less than 1000 characters)"),e("div",null,"* Twitter"),e("div",null,"* Website (optional)"),e("div",null,"* Discord (optional)"),e("div",null,"* Telegram (optional)"),e("div",null,[p("* Inscription ID list (use comma(,) as seperator, "),e("a",{href:"https://stacksinscription.com/#/tools",target:"_blank",class:"helpLink"},"this tool"),p(" may help)")]),e("div",null,"* Total count"),e("p"),e("div",null,"PS:"),e("div",null,"* Collection needs contain at least 50 images.")],-1));function Z(o,t,s,W,l,h){const f=a("el-avatar"),b=a("el-space"),k=a("el-card"),_=a("el-button"),S=a("el-dialog"),C=w("loading");return n(),c("div",H,[I,l.loadState==2&&l.collections.length>0?(n(),c("div",A,[(n(!0),c(T,null,D(l.collections.length,i=>(n(),V(_,{link:"",plain:"",class:"itemArea",key:i,onClick:j=>h.onClickCollection(i)},{default:d(()=>[r(k,{shadow:"hover",class:"cardArea","body-style":{padding:"15px"}},{default:d(()=>[r(b,{direction:"vertical",alignment:"center"},{default:d(()=>[r(f,{shape:"square",size:128,src:l.collections[i-1].iconUrl},null,8,["src"]),e("span",E,u(l.collections[i-1].name),1),e("span",M,"#"+u(l.collections[i-1].rangeStart)+" - #"+u(l.collections[i-1].rangeEnd),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):m("",!0),l.loadState==2&&!l.bReqFail&&l.collections.length==0?(n(),c("div",N," Empty ")):m("",!0),e("div",P,[r(_,{type:"info",link:"",onClick:h.onClickShowHelp},{default:d(()=>[p("Submit collection")]),_:1},8,["onClick"])]),l.loadState==1?F((n(),c("div",B,null,512)),[[C,l.loadState==1]]):m("",!0),r(S,{center:!0,title:"Submit collection",modelValue:l.bHelpDialogVisible,"onUpdate:modelValue":t[0]||(t[0]=i=>l.bHelpDialogVisible=i),width:"800px"},{default:d(()=>[L]),_:1},8,["modelValue"])])}const Y=y(q,[["render",Z],["__scopeId","data-v-038c4796"]]);export{Y as default};
