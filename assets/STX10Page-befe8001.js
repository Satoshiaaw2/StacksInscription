import{a as F,U as c,A as Q,G as L,K as U,H as E,u as R,I as M,B as O,b as p,l as Y,o as u,c as _,f as e,w as a,n as J,q as f,g as m,v as Z,m as h,d as l,t as n,p as K,h as H,J as X,i as G,s as j}from"./index-a1cbfc23.js";import{C as A,a as $}from"./ContractHelper-cd392e0f.js";const q="data:image/png;base64,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";const tt=j(),C=Z(),at={name:"STX10Page",components:{},data(){return{Utils:c,bSignedIn:Q.isUserSignedIn(),defaultReadonlyAddress:C.defaultContractAddress,progressColors:[{color:"#5cb87a",percentage:33},{color:"#e6a23c",percentage:66},{color:"#f56c6c",percentage:100}],activeTabName:"tick-list",tickListDatas:{queryTick:"",queryState:0,state:0,pageLimit:8,total:0,curPage:1,cacheTableData:[],tableData:[]},queryBalanceDatas:{tick:"",address:"",loadState:0,balance:0,block:0,tokenId:0,max:0,lim:0,supply:0,progress:0},wrapperData:{title:"Wrap",labelWidth:"180px",queryTick:"",tick:"",queryState:0,bWrap:!0,bTickValid:!1,stx10Balance:0n,sip10Balance:0n,sip10BalanceStr:"",wrapAmountStr:"0",resultAmount:"0",bQueryFinishFlag:!1}}},computed:{queryTickBtnValid(){return/^[a-z]{2,16}$/i.test(c.trimLower(this.tickListDatas.queryTick))},queryBalanceBtnValid(){return/^[a-z]{2,16}$/i.test(c.trimLower(this.queryBalanceDatas.tick))&&c.parseAddress(this.queryBalanceDatas.address)!=null},wrapperTickBtnValid(){return/^[a-z]{2,16}$/i.test(c.trimLower(this.wrapperData.queryTick))},wrapperActBtnValid(){if(!this.wrapperData.bTickValid||!/^[0-9]{1,17}$/i.test(c.trimLower(this.wrapperData.wrapAmountStr)))return!1;const r=BigInt(c.trimLower(this.wrapperData.wrapAmountStr));if(r<=0n)return!1;if(this.wrapperData.bWrap){if(r>this.wrapperData.stx10Balance)return!1}else if(r*1000000n>this.wrapperData.sip10Balance)return!1;return!0}},async mounted(){this.queryTickList(1);const r=await A.loadSummary();this.tickListDatas.total=parseInt(r.last_stx10_tick_index)},methods:{async queryTickList(r){this.tickListDatas.state=1;const s=(r-1)*this.tickListDatas.pageLimit;let d=[];for(let t=1;t<=this.tickListDatas.pageLimit;t++)d.push(s+t);const y=await A.queryTickList(d);for(let t of y)t.supply>=t.max?t.progress=100:t.progress=Number(t.supply*1000n/t.max)/10;this.tickListDatas.state=2,this.tickListDatas.tableData.splice(0,this.tickListDatas.tableData.length),this.tickListDatas.tableData.push(...y),this.tickListDatas.cacheTableData=null},onClickChangePage(){this.queryTickList(this.tickListDatas.curPage)},async onClickQueryTick(){const r=c.trimLower(this.tickListDatas.queryTick);if(r.length==0){this.tickListDatas.cacheTableData&&(this.tickListDatas.tableData.splice(0,this.tickListDatas.tableData.length),this.tickListDatas.tableData.push(...this.tickListDatas.cacheTableData),this.tickListDatas.cacheTableData=null);return}if(!this.queryTickBtnValid)return;this.tickListDatas.queryState=1;const s=await A.resolveSTX10InfoByTick(r);if(this.tickListDatas.queryState=2,this.tickListDatas.cacheTableData||(this.tickListDatas.cacheTableData=[],this.tickListDatas.cacheTableData.push(...this.tickListDatas.tableData)),this.tickListDatas.tableData.splice(0,this.tickListDatas.tableData.length),s.block>0){let d=0;s.supply>=s.max?d=100:d=Number(s.supply*1000n/s.max)/10,this.tickListDatas.tableData.push({tick:r,block:s.block,max:s.max,lim:s.lim,supply:s.supply,progress:d})}},async onClickQueryBalance(){this.queryBalanceDatas.loadState=1;const r=await A.resolveSTX10InfoByTick(c.trimLower(this.queryBalanceDatas.tick));this.queryBalanceDatas.block=r.block,this.queryBalanceDatas.max=r.max,this.queryBalanceDatas.lim=r.lim,this.queryBalanceDatas.supply=r.supply,this.queryBalanceDatas.progress=r.max>0?Number(r.supply*1000n/r.max)/10:0,this.queryBalanceDatas.balance=await A.loadSTX10Balance(c.trimLower(this.queryBalanceDatas.tick),this.queryBalanceDatas.address.trim()),this.queryBalanceDatas.loadState=2},onClickFillAddress(){this.queryBalanceDatas.address=L()},async onClickQueryWrapperTick(){this.wrapperData.tick=this.wrapperData.queryTick=c.trimLower(this.wrapperData.queryTick),this.wrapperData.loadState=1;const r=this.bSignedIn?L():C.defaultContractAddress,s=await A.queryWrapSummary(this.wrapperData.tick,r);this.wrapperData.bTickValid=s.tickInfo!=null,this.bSignedIn&&s.tickInfo?(this.wrapperData.stx10Balance=s.stx10Balance,this.wrapperData.sip10Balance=s.sip10Balance,this.wrapperData.sip10BalanceStr=c.sip10BalanceToStr(s.sip10Balance.toString())):(this.wrapperData.stx10Balance=0n,this.wrapperData.sip10Balance=0n,this.wrapperData.sip10BalanceStr=""),this.wrapperData.wrapAmountStr="",this.wrapperData.resultAmount="-",this.wrapperData.loadState=2,this.wrapperData.bQueryFinishFlag=!0},async onClickWrapperMax(){this.wrapperData.bWrap?this.wrapperData.wrapAmountStr=this.wrapperData.stx10Balance.toString():this.wrapperData.wrapAmountStr=(this.wrapperData.sip10Balance/1000000n).toString()},async onClickChangeWrapMode(){this.wrapperData.bWrap=!this.wrapperData.bWrap},onChangeWrapAmount(){const r=c.trimLower(this.wrapperData.wrapAmountStr);/^[0-9]{1,17}$/i.test(r)?this.wrapperData.resultAmount=r:this.wrapperData.resultAmount="-"},async onClickWrapperAction(){const r="W"+c.trimLower(this.wrapperData.tick),s=BigInt(c.trimLower(this.wrapperData.wrapAmountStr));let d=null,y=null;if(this.wrapperData.bWrap)d="wrap";else{d="unwrap";const D=U(C.defaultContractAddress,r,r);y=[],y.push($(L(),E.Equal,BigInt(s*1000000n),D))}const t=[R(s)],o={contractAddress:C.defaultWrapperContractAddress,contractName:r,functionName:d,functionArgs:t,network:tt,appDetails:X(),postConditions:y,onFinish:D=>{const g=this.wrapperData.bWrap?"Wrap transaction has been sent":"Unwrap transaction has been sent.";c.alert(g+` <a style="color:white" href="https://explorer.hiro.so/txid/${D.txId}?chain=${G()}" target="_blank">Visit transaction.</a>`)}};M(o)},onClickLoginIn(){O()}}},k=r=>(K("data-v-2d79ada6"),r=r(),H(),r),et={id:"main"},st=k(()=>l("div",{id:"title"},"stx10",-1)),rt={key:0},lt={key:1,class:"queryResult"},it={class:"resultDiv"},nt=k(()=>l("span",null,"balance:",-1)),ot=k(()=>l("div",{style:{"border-bottom":"1px solid #666",height:"16px"}}," ",-1)),ct={class:"resultDiv"},pt=k(()=>l("span",null,"max:",-1)),ut={class:"resultDiv"},dt=k(()=>l("span",null,"supply:",-1)),mt=k(()=>l("span",null,"minted:",-1)),ht={class:"resultDiv"},Dt=k(()=>l("span",null,"lim:",-1)),kt={id:"wrapTitle"},wt={key:0,src:q,width:"32",height:"32"},yt={class:"wrapperCoinName"},gt={class:"wrapperTip"},bt={class:"wrapperTip"},_t=k(()=>l("span",{style:{"font-weight":"bold","font-size":"20px"}},"↓",-1)),ft={key:0,src:q,width:"32",height:"32"},At={class:"wrapperCoinName"},Tt={class:"wrapperTip"},Bt={style:{"text-align":"right",color:"#888"}},Ct={key:1,style:{"text-align":"left",color:"#ccc"}},xt={key:0},vt={class:"tickName"},Lt={class:"queryResultTxt"},Pt=k(()=>l("span",null,"minted:",-1)),St={class:"queryResultTxt"},qt={class:"queryResultTxt"};function It(r,s,d,y,t,o){const D=p("el-input"),g=p("el-col"),w=p("el-button"),P=p("el-row"),x=p("el-tab-pane"),b=p("el-form-item"),S=p("el-progress"),T=p("el-space"),v=p("el-form"),I=p("el-card"),W=p("el-tabs"),B=p("el-table-column"),V=p("el-table"),z=p("el-pagination"),N=Y("loading");return u(),_("div",et,[st,e(W,{modelValue:t.activeTabName,"onUpdate:modelValue":s[5]||(s[5]=i=>t.activeTabName=i),size:"large"},{default:a(()=>[e(x,{label:"Tick list",name:"tick-list"},{default:a(()=>[e(P,{style:{margin:"16px auto"}},{default:a(()=>[e(g,{span:6},{default:a(()=>[e(D,{size:"large",modelValue:t.tickListDatas.queryTick,"onUpdate:modelValue":s[0]||(s[0]=i=>t.tickListDatas.queryTick=i),placeholder:"tick",onChange:o.onClickQueryTick,clearable:""},null,8,["modelValue","onChange"])]),_:1}),e(w,{size:"large",type:"primary",disabled:!o.queryTickBtnValid,loading:t.tickListDatas.queryState==1},{default:a(()=>[h("Query")]),_:1},8,["disabled","loading"])]),_:1})]),_:1}),e(x,{label:"Query balance",name:"query-balance"},{default:a(()=>[e(v,{model:t.queryBalanceDatas,"label-width":"80px",class:"tabInner",size:"large"},{default:a(()=>[e(b,{label:"tick"},{default:a(()=>[e(g,{span:14},{default:a(()=>[e(D,{modelValue:t.queryBalanceDatas.tick,"onUpdate:modelValue":s[1]||(s[1]=i=>t.queryBalanceDatas.tick=i),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(b,{label:"address"},{default:a(()=>[e(g,{span:14},{default:a(()=>[e(D,{modelValue:t.queryBalanceDatas.address,"onUpdate:modelValue":s[2]||(s[2]=i=>t.queryBalanceDatas.address=i),placeholder:""},null,8,["modelValue"])]),_:1}),t.bSignedIn?(u(),f(g,{key:0,span:4},{default:a(()=>[e(w,{style:{"margin-left":"4px"},type:"primary",plain:"",onClick:o.onClickFillAddress},{default:a(()=>[h("Fill current account")]),_:1},8,["onClick"])]),_:1})):m("",!0)]),_:1}),e(b,null,{default:a(()=>[e(T,{direction:"vertical",alignment:"start"},{default:a(()=>[e(w,{type:"primary",onClick:o.onClickQueryBalance,disabled:!o.queryBalanceBtnValid,loading:t.queryBalanceDatas.loadState==1},{default:a(()=>[h("Query")]),_:1},8,["onClick","disabled","loading"]),t.queryBalanceDatas.loadState==2&&t.queryBalanceDatas.block==0?(u(),_("div",rt,"Tick not exists.")):m("",!0),t.queryBalanceDatas.loadState==2&&t.queryBalanceDatas.block>0?(u(),_("div",lt,[l("div",it,[nt,h(" "+n(t.queryBalanceDatas.balance),1)]),ot,l("div",ct,[pt,h(" "+n(t.queryBalanceDatas.max),1)]),l("div",ut,[dt,h(" "+n(t.queryBalanceDatas.supply),1)]),e(T,{alignment:"center",class:"resultDiv"},{default:a(()=>[mt,e(S,{style:{width:"300px"},percentage:t.queryBalanceDatas.progress,color:t.progressColors,"stroke-width":8},null,8,["percentage","color"])]),_:1}),l("div",ht,[Dt,h(" "+n(t.queryBalanceDatas.lim),1)])])):m("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(x,{label:"Wrapper",name:"wrapper"},{default:a(()=>[e(P,{style:{margin:"16px auto"}},{default:a(()=>[e(g,{span:6},{default:a(()=>[e(D,{modelValue:t.wrapperData.queryTick,"onUpdate:modelValue":s[3]||(s[3]=i=>t.wrapperData.queryTick=i),placeholder:"tick",size:"large",clearable:""},null,8,["modelValue"])]),_:1}),e(w,{type:"primary",disabled:!o.wrapperTickBtnValid,size:"large",loading:t.wrapperData.queryState==1,onClick:o.onClickQueryWrapperTick},{default:a(()=>[h("Query")]),_:1},8,["disabled","loading","onClick"])]),_:1}),t.wrapperData.bQueryFinishFlag&&t.wrapperData.bTickValid?(u(),f(I,{key:0,style:{"margin-top":"32px",width:"520px"}},{default:a(()=>[l("div",kt,n(t.wrapperData.bWrap?"Wrap":"Unwrap"),1),e(v,{model:t.wrapperData,"label-width":t.wrapperData.labelWidth,size:"default","label-position":"left",class:"wrapperCoinSide"},{default:a(()=>[e(b,null,{label:a(()=>[e(T,{alignment:"center"},{default:a(()=>[t.wrapperData.bWrap?m("",!0):(u(),_("img",wt)),l("span",yt,n(t.wrapperData.bWrap?t.wrapperData.tick:"W"+t.wrapperData.tick.toLowerCase()),1)]),_:1})]),default:a(()=>[e(D,{disabled:!t.bSignedIn,modelValue:t.wrapperData.wrapAmountStr,"onUpdate:modelValue":s[4]||(s[4]=i=>t.wrapperData.wrapAmountStr=i),onInput:o.onChangeWrapAmount,clearable:"",size:"large",placeholder:"Integer count"},{append:a(()=>[e(w,{type:"primary",onClick:o.onClickWrapperMax},{default:a(()=>[h("Max")]),_:1},8,["onClick"])]),_:1},8,["disabled","modelValue","onInput"])]),_:1}),e(b,null,{label:a(()=>[l("span",gt,n(t.wrapperData.bWrap?"stx10":"sip10"),1)]),default:a(()=>[l("div",bt," Balance: "+n(t.bSignedIn?t.wrapperData.bWrap?t.wrapperData.stx10Balance:t.wrapperData.sip10BalanceStr:"-"),1)]),_:1})]),_:1},8,["model","label-width"]),e(w,{type:"primary",plain:"",circle:"",onClick:o.onClickChangeWrapMode,style:{margin:"8px auto"}},{default:a(()=>[_t]),_:1},8,["onClick"]),e(v,{model:t.wrapperData,"label-width":t.wrapperData.labelWidth,size:"default","label-position":"left",class:"wrapperCoinSide"},{default:a(()=>[e(b,null,{label:a(()=>[e(T,{alignment:"center"},{default:a(()=>[t.wrapperData.bWrap?(u(),_("img",ft)):m("",!0),l("span",At,n(t.wrapperData.bWrap?"W"+t.wrapperData.tick.toLowerCase():t.wrapperData.tick),1)]),_:1})]),default:a(()=>[l("span",null,n(t.bSignedIn?t.wrapperData.resultAmount:"-"),1)]),_:1}),e(b,null,{label:a(()=>[l("span",Tt,n(t.wrapperData.bWrap?"sip10":"stx10"),1)]),default:a(()=>[l("div",Bt," Balance: "+n(t.bSignedIn?t.wrapperData.bWrap?t.wrapperData.sip10BalanceStr:t.wrapperData.stx10Balance:"-"),1)]),_:1})]),_:1},8,["model","label-width"]),t.bSignedIn?(u(),f(w,{key:0,disabled:!o.wrapperActBtnValid,style:{"margin-top":"16px"},type:"primary",round:"",size:"large",onClick:o.onClickWrapperAction},{default:a(()=>[h("     "+n(t.wrapperData.bWrap?"Wrap":"Unwrap")+"     ",1)]),_:1},8,["disabled","onClick"])):m("",!0),t.bSignedIn?m("",!0):(u(),f(w,{key:1,style:{"margin-top":"16px"},type:"primary",round:"",size:"large",onClick:o.onClickLoginIn},{default:a(()=>[h("     Sign in to "+n(t.wrapperData.bWrap?"wrap":"unwrap")+"     ",1)]),_:1},8,["onClick"]))]),_:1})):m("",!0),t.wrapperData.loadState==2&&!t.wrapperData.bTickValid?(u(),_("div",Ct," Wrapper contract doesn't exist yet. ")):m("",!0)]),_:1})]),_:1},8,["modelValue"]),t.activeTabName=="tick-list"?(u(),_("div",xt,[J((u(),f(V,{size:"large",data:t.tickListDatas.tableData,"element-loading-background":"rgba(0, 0, 0, 0)",style:{"min-height":"155px"},"empty-text":t.tickListDatas.state==2?"No ticks":" "},{default:a(()=>[e(B,{label:"tick",width:"180"},{default:a(i=>[l("div",vt,n(i.row.tick),1)]),_:1}),e(B,{label:"state"},{default:a(i=>[l("div",Lt,[l("div",null,"max: "+n(t.Utils.thousandNumStr(i.row.max)),1),e(T,{alignment:"center"},{default:a(()=>[Pt,e(S,{style:{"min-width":"250px"},percentage:i.row.progress,color:t.progressColors,"stroke-width":8},null,8,["percentage","color"])]),_:2},1024)])]),_:1}),e(B,{label:"supply",width:"190"},{default:a(i=>[l("div",St,n(t.Utils.thousandNumStr(i.row.supply)),1)]),_:1}),e(B,{label:"lim",width:"150"},{default:a(i=>[l("div",qt,n(t.Utils.thousandNumStr(i.row.lim)),1)]),_:1})]),_:1},8,["data","empty-text"])),[[N,t.tickListDatas.state==1]]),t.tickListDatas.state==2&&t.tickListDatas.total>t.tickListDatas.pageLimit?(u(),f(z,{key:0,style:{"margin-top":"16px"},background:"",layout:"total, prev, pager, next","default-page-size":t.tickListDatas.pageLimit,"current-page":t.tickListDatas.curPage,"onUpdate:currentPage":s[6]||(s[6]=i=>t.tickListDatas.curPage=i),total:t.tickListDatas.total,onCurrentChange:o.onClickChangePage},null,8,["default-page-size","current-page","total","onCurrentChange"])):m("",!0)])):m("",!0)])}const zt=F(at,[["render",It],["__scopeId","data-v-2d79ada6"]]);export{zt as default};
