import{a as z,U as o,y as P,C as L,I as Q,D as M,u as F,G as K,b as p,l as X,o as m,c as _,f as e,w as a,n as R,q as B,g as k,v as Z,m as u,d as l,t as c,p as E,h as J,H as Y,i as G,s as O}from"./index-45210c93.js";import{C as f,a as H}from"./ContractHelper-b304980d.js";import"./browser-ponyfill-d30bbe56.js";const j="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAABGlBMVEUAAAD8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj8eCj////9i0b8fTD//Pn+x6X8ey3/8Of9lFT9j0z9llj/+vb/5tf8gTb//fv/9/L+u5P9iUP/7eL/4c7+1r7+yqr9rXz9o239m2D9h0D/6t3+3Mb+wZz+t4z8hDv/9O3+07j+s4b/+vf+zrD9sYL9qnf+w6D+vpj9nmUaEgAbAAAANXRSTlMA/QgN+fv1pOzXzo+zhYBIQigRBd3Hw7u2qpJ7dlE3IBsV4cqXbF9XLfHl0pxyZ1oyJos6944/qVwAAAWxSURBVHjaxdqHWhpREAXguUuT3kGqYI81mpwFBLFhBXtNTN7/NfKhiQSu6L3Drv4vsPPBmdm5u0tMseJc3u/JBMbHAxlPNrf6rUwfJrrimRoTGDTm88zMk73ipUhovO/aUhXpYHgiTvYoh7OLLrxLeKcLJbKc8XVpUkDVgqdokJUccyk3tLiTsw6ySim06II24Q1OkBUceZ8Ai/DmYjSyuZQTbK6pWRrNWhojSs4TnzEjMDKRY6cx6oMlvF954ct9gUXcQUYYJ5YELCMyUdJUTMFSUxHSEh6Dxb6skoYVNyznzJOykBM2cPkNUhLPO2ELEVKrIK/RfrrtaGj8/nYQfoX8OWEjV+7d/nPDVs7Zd+bPGGz2JfLm/E3Bdr4oDeVYwgfIlGmYnADDdaXZrFzXoUqs0xBRxgC4bl80WrW97cbRVQWK3EV6leGDrt3LhvmidbILNQkHvWYGunZPzD4PqhWE6BVrArouzQGXUFQkWRq6rhvmgMMDqPHF5f0f2jrmoL02FK1IIyAFbZemZB+KfIPDgLMDPJiSKygSQepT8kHfiTnovgNVibX+JUBA309z0FGvD/VWA8ciGM4Gu2C7DXWJGPXMucBxtz2QgDrUiRl6YaTAUr27N3taP6rQ4esN5K9u8NRPH1r/ZtDjJvQ4e6vJEkbQ/Pnr8apzBn0B+qs8iU8xNkHPwgKfY5WexLP4JB7jeQou4pNMPk/DiAufpUBdIXyaLHWN49MkqWsMLNWt9v7l40bPHbS5uymMCjA0949u9sw+t9AXIaIV6Ns6aXC3IXk99kBX5dZ8zSl09KbxFPRcn9ybr9mrQl9CP4OnDfN1h2BwEsUENJyd1MwhjsERpSI0bF6YQ+2Do6B1IOkcmsOdgmOZ8lC221sBGzesDMqy5Ieys5e8/Tg7ljPI4tEZAxXzyU57F9iRM8gSoAxU9ArY3j8AUN+WT+YsaQpAQa+Ao+ZzO5iDfoIlpXMzrpi1jTqe3EkZ3AJLUquAxm/8Jd0Nzg/AktT5C+q95V/OYBUsKcqAoSoN5F/gSZMHDFvsDMptmAXDvjmgtgkeD+WgjZ9BWZZWwXBuDritgidP36Cvzs2grEBl6KtwMyibZx0LOtIc5GbQFSfyQZfcBDfcDCZYazkupCbgZnCc9ZRevhcfgylIRPPQVeE+oZWFWYfT38yFVOZ0cF4UyMtAqwKeKeoKQtOjtJDugmea95BM2ogvwDRHXRNeaKnuyAspz0KUuuLT0NKUjqcd8GQMelKAlt8tcwB3EM/Ss9ICdLSlbaQJDdKjWu1pvP9eAbvXUJKmf4puaDiR7oV9BRxcNTahwhWmf4wkNBy/NQgPfpyb5hZULMboxayAuiNzULvv8ooFiGXqcWiMgvqOOeiijq7Kxo1pKhcwWab/BAVUVeUCau06qlsPLZ22FNPUozcNj0xJbefivKY3FybnqU/Oxe0CWUtqQ4VPmmJTUNXZNt90pBIBb4kGzKqnUO5D/beHyyRJQlVl+E9w/2sXKrwGSeYFVG3VzFfVbptQEyGZzjF180IuYe9wowlFfurhTaPq3c59/9FE4zsiLMRIov0Kubq5sXPz9DtsN3YeOgd1KHOGSdKbhxqqZ82t09PNylkdWqZpmFgGH2C8RENFp2Ad1pfmkS+wmbtAb1p1wlauGXpH3gUbiXV6l1/ANmIpTu8yQm7Y5LvfQQqMoIAtRPf6Kgy/LTkQSw5SlbOhF1zrcVI3a/k8cM+QlogPlvIWSFM0I2Cd8a+krbxuWTs6p0vEUUzAEgthYnKEYAF/jPiKvpHTF6GRxFd8AmzCu2zQqMrBhGBeftJfIius+ROCc/npebJKbMbnhBbX4nKZrOSIBMagbCwdjpHlJlY9k0ptn5mdIHsYa4Vs0o03OKem56IG2cqIhAIJJySuxHgw7KCPEi0sZz2BdCqZTKUDnmy+MB8nlj9z4lcMNkM2VwAAAABJRU5ErkJggg==";const $=O(),x=Z(),tt={name:"STX10Page",components:{},data(){return{Utils:o,bSignedIn:P.isUserSignedIn(),defaultReadonlyAddress:x.defaultContractAddress,progressColors:[{color:"#5cb87a",percentage:33},{color:"#e6a23c",percentage:66},{color:"#f56c6c",percentage:100}],activeTabName:"tick-list",tickListDatas:{queryTick:"",queryState:0,state:0,pageLimit:8,total:0,curPage:1,cacheTableData:[],tableData:[]},queryBalanceDatas:{tick:"",address:"",loadState:0,balance:0,block:0,tokenId:0,max:0,lim:0,supply:0,progress:0},wrapperData:{title:"Wrap",tick:"",queryState:0,bWrap:!0,bTickValid:!1,stx10Balance:0n,sip10Balance:0n,sip10BalanceStr:"",wrapAmountStr:"0",resultAmount:"0",bQueryFinishFlag:!1}}},computed:{queryTickBtnValid(){return/^[a-z]{2,16}$/i.test(o.trimLower(this.tickListDatas.queryTick))},queryBalanceBtnValid(){return/^[a-z]{2,16}$/i.test(o.trimLower(this.queryBalanceDatas.tick))&&o.parseAddress(this.queryBalanceDatas.address)!=null},wrapperTickBtnValid(){return/^[a-z]{2,16}$/i.test(o.trimLower(this.wrapperData.tick))},wrapperActBtnValid(){if(!this.wrapperData.bTickValid||!/^[0-9]{1,17}$/i.test(o.trimLower(this.wrapperData.wrapAmountStr)))return!1;const s=BigInt(o.trimLower(this.wrapperData.wrapAmountStr));if(s<=0n)return!1;if(this.wrapperData.bWrap){if(s>this.wrapperData.stx10Balance)return!1}else if(s*1000000n>this.wrapperData.sip10Balance)return!1;return!0}},async mounted(){this.queryTickList(1);const s=await f.loadSummary();this.tickListDatas.total=parseInt(s.last_stx10_tick_index)},methods:{async queryTickList(s){this.tickListDatas.state=1;const r=(s-1)*this.tickListDatas.pageLimit;let d=[];for(let t=1;t<=this.tickListDatas.pageLimit;t++)d.push(r+t);const g=await f.queryTickList(d);for(let t of g)t.supply>=t.max?t.progress=100:t.progress=Number(t.supply*1000n/t.max)/10;this.tickListDatas.state=2,this.tickListDatas.tableData.splice(0,this.tickListDatas.tableData.length),this.tickListDatas.tableData.push(...g),this.tickListDatas.cacheTableData=null},onClickChangePage(){this.queryTickList(this.tickListDatas.curPage)},async onClickQueryTick(){const s=o.trimLower(this.tickListDatas.queryTick);if(s.length==0){this.tickListDatas.cacheTableData&&(this.tickListDatas.tableData.splice(0,this.tickListDatas.tableData.length),this.tickListDatas.tableData.push(...this.tickListDatas.cacheTableData),this.tickListDatas.cacheTableData=null);return}if(!this.queryTickBtnValid)return;this.tickListDatas.queryState=1;const r=await f.resolveSTX10InfoByTick(s);if(this.tickListDatas.queryState=2,this.tickListDatas.cacheTableData||(this.tickListDatas.cacheTableData=[],this.tickListDatas.cacheTableData.push(...this.tickListDatas.tableData)),this.tickListDatas.tableData.splice(0,this.tickListDatas.tableData.length),r.block>0){let d=0;r.supply>=r.max?d=100:d=Number(r.supply*1000n/r.max)/10,this.tickListDatas.tableData.push({tick:s,block:r.block,max:r.max,lim:r.lim,supply:r.supply,progress:d})}},async onClickQueryBalance(){this.queryBalanceDatas.loadState=1;const s=await f.resolveSTX10InfoByTick(o.trimLower(this.queryBalanceDatas.tick));this.queryBalanceDatas.block=s.block,this.queryBalanceDatas.max=s.max,this.queryBalanceDatas.lim=s.lim,this.queryBalanceDatas.supply=s.supply,this.queryBalanceDatas.progress=s.max>0?Number(s.lim*100n/s.max):0,this.queryBalanceDatas.balance=await f.loadSTX10Balance(o.trimLower(this.queryBalanceDatas.tick),this.queryBalanceDatas.address.trim()),this.queryBalanceDatas.loadState=2},onClickFillAddress(){this.queryBalanceDatas.address=L()},async onClickQueryWrapperTick(){this.wrapperData.tick=o.trimLower(this.wrapperData.tick),this.wrapperData.loadState=1;const s=await f.queryWrapSummary(this.wrapperData.tick,L());this.wrapperData.bTickValid=s.tickInfo!=null,s.tickInfo&&(this.wrapperData.stx10Balance=s.stx10Balance,this.wrapperData.sip10Balance=s.sip10Balance,this.wrapperData.sip10BalanceStr=o.sip10BalanceToStr(s.sip10Balance.toString())),this.wrapperData.wrapAmountStr="",this.wrapperData.resultAmount="-",this.wrapperData.loadState=2,this.wrapperData.bQueryFinishFlag=!0},async onClickWrapperMax(){this.wrapperData.bWrap?this.wrapperData.wrapAmountStr=this.wrapperData.stx10Balance.toString():this.wrapperData.wrapAmountStr=(this.wrapperData.sip10Balance/1000000n).toString()},async onClickChangeWrapMode(){this.wrapperData.bWrap=!this.wrapperData.bWrap},onChangeWrapAmount(){const s=o.trimLower(this.wrapperData.wrapAmountStr);/^[0-9]{1,17}$/i.test(s)?this.wrapperData.resultAmount=s:this.wrapperData.resultAmount="-"},async onClickWrapperAction(){const s="w"+this.wrapperData.tick.trim().toUpperCase(),r=BigInt(o.trimLower(this.wrapperData.wrapAmountStr));let d=null,g=null;if(this.wrapperData.bWrap)d="wrap";else{d="unwrap";const h=Q(x.defaultContractAddress,s,s);g=[],g.push(H(L(),M.Equal,BigInt(r*1000000n),h))}const t=[F(r)],n={contractAddress:x.defaultContractAddress,contractName:s,functionName:d,functionArgs:t,network:$,appDetails:Y(),postConditions:g,onFinish:h=>{const b=this.wrapperData.bWrap?"Wrap transaction has been sent":"Unwrap transaction has been sent.";o.alert(b+` <a style="color:white" href="https://explorer.hiro.so/txid/${h.txId}?chain=${G()}" target="_blank">Visit transaction.</a>`)}};K(n)}}},y=s=>(E("data-v-56aa98d3"),s=s(),J(),s),et={id:"main"},at=y(()=>l("div",{id:"title"},"stx10",-1)),st={key:0},rt={key:1,class:"queryResult"},it={class:"resultDiv"},lt=y(()=>l("span",null,"balance:",-1)),nt=y(()=>l("div",{style:{"border-bottom":"1px solid #666",height:"16px"}}," ",-1)),ot={class:"resultDiv"},ct=y(()=>l("span",null,"max:",-1)),pt={class:"resultDiv"},ut=y(()=>l("span",null,"supply:",-1)),dt=y(()=>l("span",null,"minted:",-1)),mt={class:"resultDiv"},Dt=y(()=>l("span",null,"lim:",-1)),ht={id:"wrapTitle"},kt={key:0,src:j,width:"32",height:"32"},yt={style:{"text-align":"right",color:"#888"}},gt=y(()=>l("span",{style:{"font-weight":"bold","font-size":"26px","font-family":"verdana, sans-serif"}},"↓",-1)),bt={key:0,src:j,width:"32",height:"32"},wt={style:{"text-align":"right",color:"#888"}},_t={key:1,style:{"text-align":"left",color:"#ccc"}},ft={key:0},Ct={class:"tickName"},Bt={class:"queryResultTxt"},At=y(()=>l("span",null,"minted:",-1)),qt={class:"queryResultTxt"},Lt={class:"queryResultTxt"};function xt(s,r,d,g,t,n){const h=p("el-input"),b=p("el-col"),w=p("el-button"),v=p("el-row"),A=p("el-tab-pane"),q=p("el-form-item"),T=p("el-progress"),D=p("el-space"),S=p("el-form"),V=p("el-card"),U=p("el-tabs"),C=p("el-table-column"),I=p("el-table"),W=p("el-pagination"),N=X("loading");return m(),_("div",et,[at,e(U,{modelValue:t.activeTabName,"onUpdate:modelValue":r[5]||(r[5]=i=>t.activeTabName=i),size:"large"},{default:a(()=>[e(A,{label:"Tick list",name:"tick-list"},{default:a(()=>[e(v,{style:{margin:"16px auto"}},{default:a(()=>[e(b,{span:6},{default:a(()=>[e(h,{modelValue:t.tickListDatas.queryTick,"onUpdate:modelValue":r[0]||(r[0]=i=>t.tickListDatas.queryTick=i),placeholder:"",clearable:""},null,8,["modelValue"])]),_:1}),e(w,{type:"primary",disabled:!n.queryTickBtnValid,loading:t.tickListDatas.queryState==1,onClick:n.onClickQueryTick},{default:a(()=>[u("Query")]),_:1},8,["disabled","loading","onClick"])]),_:1})]),_:1}),e(A,{label:"Query balance",name:"query-balance"},{default:a(()=>[e(S,{model:t.queryBalanceDatas,"label-width":"80px",class:"tabInner",size:"large"},{default:a(()=>[e(q,{label:"tick"},{default:a(()=>[e(b,{span:14},{default:a(()=>[e(h,{modelValue:t.queryBalanceDatas.tick,"onUpdate:modelValue":r[1]||(r[1]=i=>t.queryBalanceDatas.tick=i),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(q,{label:"address"},{default:a(()=>[e(b,{span:14},{default:a(()=>[e(h,{modelValue:t.queryBalanceDatas.address,"onUpdate:modelValue":r[2]||(r[2]=i=>t.queryBalanceDatas.address=i),placeholder:""},null,8,["modelValue"])]),_:1}),t.bSignedIn?(m(),B(b,{key:0,span:4},{default:a(()=>[e(w,{style:{"margin-left":"4px"},type:"primary",plain:"",onClick:n.onClickFillAddress},{default:a(()=>[u("Fill current account")]),_:1},8,["onClick"])]),_:1})):k("",!0)]),_:1}),e(q,null,{default:a(()=>[e(D,{direction:"vertical",alignment:"start"},{default:a(()=>[e(w,{type:"primary",onClick:n.onClickQueryBalance,disabled:!n.queryBalanceBtnValid,loading:t.queryBalanceDatas.loadState==1},{default:a(()=>[u("Query")]),_:1},8,["onClick","disabled","loading"]),t.queryBalanceDatas.loadState==2&&t.queryBalanceDatas.block==0?(m(),_("div",st,"Tick not exist")):k("",!0),t.queryBalanceDatas.loadState==2&&t.queryBalanceDatas.block>0?(m(),_("div",rt,[l("div",it,[lt,u(" "+c(t.queryBalanceDatas.balance),1)]),nt,l("div",ot,[ct,u(" "+c(t.queryBalanceDatas.max),1)]),l("div",pt,[ut,u(" "+c(t.queryBalanceDatas.supply),1)]),e(D,{alignment:"center",class:"resultDiv"},{default:a(()=>[dt,e(T,{style:{width:"300px"},percentage:t.queryBalanceDatas.progress,color:t.progressColors,"stroke-width":8},null,8,["percentage","color"])]),_:1}),l("div",mt,[Dt,u(" "+c(t.queryBalanceDatas.lim),1)])])):k("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(A,{label:"Wrapper",name:"wrapper"},{default:a(()=>[e(v,{style:{margin:"16px auto"}},{default:a(()=>[e(b,{span:6},{default:a(()=>[e(h,{modelValue:t.wrapperData.tick,"onUpdate:modelValue":r[3]||(r[3]=i=>t.wrapperData.tick=i),placeholder:"",clearable:""},null,8,["modelValue"])]),_:1}),e(w,{type:"primary",disabled:!n.wrapperTickBtnValid,loading:t.wrapperData.queryState==1,onClick:n.onClickQueryWrapperTick},{default:a(()=>[u("Query")]),_:1},8,["disabled","loading","onClick"])]),_:1}),t.wrapperData.bQueryFinishFlag&&t.wrapperData.bTickValid?(m(),B(V,{key:0,style:{"margin-top":"32px",width:"520px"}},{default:a(()=>[l("div",ht,c(t.wrapperData.bWrap?"Wrap":"Unwrap"),1),e(D,{direction:"vertical",style:{"margin-top":"20px"}},{default:a(()=>[e(D,{class:"wrapCoinArea",alignment:"start"},{default:a(()=>[e(D,{alignment:"center",class:"coinArea"},{default:a(()=>[t.wrapperData.bWrap?k("",!0):(m(),_("img",kt)),u(" "+c(t.wrapperData.bWrap?t.wrapperData.tick:"w"+t.wrapperData.tick.toUpperCase()),1)]),_:1}),e(D,{direction:"vertical",alignment:"start"},{default:a(()=>[e(h,{modelValue:t.wrapperData.wrapAmountStr,"onUpdate:modelValue":r[4]||(r[4]=i=>t.wrapperData.wrapAmountStr=i),onInput:n.onChangeWrapAmount,clearable:"",size:"large",placeholder:"Integer count"},{append:a(()=>[e(w,{type:"primary",onClick:n.onClickWrapperMax},{default:a(()=>[u("Max")]),_:1},8,["onClick"])]),_:1},8,["modelValue","onInput"]),l("div",yt," Balance: "+c(t.wrapperData.bWrap?t.wrapperData.stx10Balance:t.wrapperData.sip10BalanceStr),1)]),_:1})]),_:1}),e(w,{type:"primary",plain:"",circle:"",onClick:n.onClickChangeWrapMode,style:{margin:"4px auto"}},{default:a(()=>[gt]),_:1},8,["onClick"]),e(D,{class:"wrapCoinArea",alignment:"start"},{default:a(()=>[e(D,{alignment:"center",class:"coinArea"},{default:a(()=>[t.wrapperData.bWrap?(m(),_("img",bt)):k("",!0),u(c(t.wrapperData.bWrap?"w"+t.wrapperData.tick.toUpperCase():t.wrapperData.tick),1)]),_:1}),e(D,{direction:"vertical",alignment:"start"},{default:a(()=>[l("span",null,c(t.wrapperData.resultAmount),1),l("div",wt," Balance: "+c(t.wrapperData.bWrap?t.wrapperData.sip10BalanceStr:t.wrapperData.stx10Balance),1)]),_:1})]),_:1}),e(w,{disabled:!n.wrapperActBtnValid,style:{"margin-top":"8px"},type:"primary",round:"",size:"large",onClick:n.onClickWrapperAction},{default:a(()=>[u("     "+c(t.wrapperData.bWrap?"Wrap":"Unwrap")+"     ",1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})):k("",!0),t.wrapperData.loadState==2&&!t.wrapperData.bTickValid?(m(),_("div",_t," Tick not exists. ")):k("",!0)]),_:1})]),_:1},8,["modelValue"]),t.activeTabName=="tick-list"?(m(),_("div",ft,[R((m(),B(I,{size:"large",data:t.tickListDatas.tableData,"element-loading-background":"rgba(0, 0, 0, 0)",style:{"min-height":"155px"},"empty-text":t.tickListDatas.state==2?"No ticks":" "},{default:a(()=>[e(C,{label:"tick",width:"180"},{default:a(i=>[l("div",Ct,c(i.row.tick),1)]),_:1}),e(C,{label:"state"},{default:a(i=>[l("div",Bt,[l("div",null,"max: "+c(t.Utils.thousandNumStr(i.row.max)),1),e(D,{alignment:"center"},{default:a(()=>[At,e(T,{style:{"min-width":"250px"},percentage:i.row.progress,color:t.progressColors,"stroke-width":8},null,8,["percentage","color"])]),_:2},1024)])]),_:1}),e(C,{label:"supply",width:"150"},{default:a(i=>[l("div",qt,c(t.Utils.thousandNumStr(i.row.supply)),1)]),_:1}),e(C,{label:"lim",width:"150"},{default:a(i=>[l("div",Lt,c(t.Utils.thousandNumStr(i.row.lim)),1)]),_:1})]),_:1},8,["data","empty-text"])),[[N,t.tickListDatas.state==1]]),t.tickListDatas.state==2&&t.tickListDatas.total>t.tickListDatas.pageLimit?(m(),B(W,{key:0,style:{"margin-top":"16px"},background:"",layout:"total, prev, pager, next","default-page-size":t.tickListDatas.pageLimit,"current-page":t.tickListDatas.curPage,"onUpdate:currentPage":r[6]||(r[6]=i=>t.tickListDatas.curPage=i),total:t.tickListDatas.total,onCurrentChange:n.onClickChangePage},null,8,["default-page-size","current-page","total","onCurrentChange"])):k("",!0)])):k("",!0)])}const St=z(tt,[["render",xt],["__scopeId","data-v-56aa98d3"]]);export{St as default};
