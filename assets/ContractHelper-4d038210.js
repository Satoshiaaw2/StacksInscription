import{Q as ClarityType,R as principalToString,S as bytesToHex,T as utf8ToBytes,V as asciiToBytes,W as parsePrincipalString,X as StacksMessageType,Y as PostConditionType,Z as intToBigInt,$ as parseAssetInfoString,a0 as createStandardPrincipal,a1 as createContractPrincipal,a2 as StacksMainnet,a3 as StacksNetwork,j as cvToHex,a4 as parseReadOnlyResponse,a5 as base64Js,a6 as require$$3,K as commonjsGlobal,J as getDefaultExportFromCjs,C as stringAsciiCV,U as Utils,u as uintCV,a7 as listCV,N as standardPrincipalCV,B as bufferCV,v as getNetwork,x as getContractInfo}from"./index-e82bf540.js";function cvToValue(r,i=!1){switch(r.type){case ClarityType.BoolTrue:return!0;case ClarityType.BoolFalse:return!1;case ClarityType.Int:case ClarityType.UInt:return i?r.value.toString():r.value;case ClarityType.Buffer:return`0x${bytesToHex(r.buffer)}`;case ClarityType.OptionalNone:return null;case ClarityType.OptionalSome:return cvToJSON(r.value);case ClarityType.ResponseErr:return cvToJSON(r.value);case ClarityType.ResponseOk:return cvToJSON(r.value);case ClarityType.PrincipalStandard:case ClarityType.PrincipalContract:return principalToString(r);case ClarityType.List:return r.list.map(o=>cvToJSON(o));case ClarityType.Tuple:const a={};return Object.keys(r.data).forEach(o=>{a[o]=cvToJSON(r.data[o])}),a;case ClarityType.StringASCII:return r.data;case ClarityType.StringUTF8:return r.data}}function cvToJSON(r){switch(r.type){case ClarityType.ResponseErr:return{type:getCVTypeString(r),value:cvToValue(r,!0),success:!1};case ClarityType.ResponseOk:return{type:getCVTypeString(r),value:cvToValue(r,!0),success:!0};default:return{type:getCVTypeString(r),value:cvToValue(r,!0)}}}function getCVTypeString(r){switch(r.type){case ClarityType.BoolTrue:case ClarityType.BoolFalse:return"bool";case ClarityType.Int:return"int";case ClarityType.UInt:return"uint";case ClarityType.Buffer:return`(buff ${r.buffer.length})`;case ClarityType.OptionalNone:return"(optional none)";case ClarityType.OptionalSome:return`(optional ${getCVTypeString(r.value)})`;case ClarityType.ResponseErr:return`(response UnknownType ${getCVTypeString(r.value)})`;case ClarityType.ResponseOk:return`(response ${getCVTypeString(r.value)} UnknownType)`;case ClarityType.PrincipalStandard:case ClarityType.PrincipalContract:return"principal";case ClarityType.List:return`(list ${r.list.length} ${r.list.length?getCVTypeString(r.list[0]):"UnknownType"})`;case ClarityType.Tuple:return`(tuple ${Object.keys(r.data).map(i=>`(${i} ${getCVTypeString(r.data[i])})`).join(" ")})`;case ClarityType.StringASCII:return`(string-ascii ${asciiToBytes(r.data).length})`;case ClarityType.StringUTF8:return`(string-utf8 ${utf8ToBytes(r.data).length})`}}function createSTXPostCondition(r,i,a){return typeof r=="string"&&(r=parsePrincipalString(r)),{type:StacksMessageType.PostCondition,conditionType:PostConditionType.STX,principal:r,conditionCode:i,amount:intToBigInt(a,!1)}}function createFungiblePostCondition(r,i,a,o){return typeof r=="string"&&(r=parsePrincipalString(r)),typeof o=="string"&&(o=parseAssetInfoString(o)),{type:StacksMessageType.PostCondition,conditionType:PostConditionType.Fungible,principal:r,conditionCode:i,amount:intToBigInt(a,!1),assetInfo:o}}function createNonFungiblePostCondition(r,i,a,o){return typeof r=="string"&&(r=parsePrincipalString(r)),typeof a=="string"&&(a=parseAssetInfoString(a)),{type:StacksMessageType.PostCondition,conditionType:PostConditionType.NonFungible,principal:r,conditionCode:i,assetInfo:a,assetName:o}}function makeStandardSTXPostCondition(r,i,a){return createSTXPostCondition(createStandardPrincipal(r),i,a)}function makeContractSTXPostCondition(r,i,a,o){return createSTXPostCondition(createContractPrincipal(r,i),a,o)}function makeStandardFungiblePostCondition(r,i,a,o){return createFungiblePostCondition(createStandardPrincipal(r),i,a,o)}function makeStandardNonFungiblePostCondition(r,i,a,o){return createNonFungiblePostCondition(createStandardPrincipal(r),i,a,o)}async function callReadOnlyFunction(r){const i={network:new StacksMainnet},a=Object.assign(i,r),{contractName:o,contractAddress:p,functionName:m,functionArgs:y,senderAddress:c}=a,d=StacksNetwork.fromNameOrNetwork(a.network),l=d.getReadOnlyFunctionCallApiUrl(p,o,m),x=y.map(O=>cvToHex(O)),R=JSON.stringify({sender:c,arguments:x}),N=await d.fetchFn(l,{method:"POST",body:R,headers:{"Content-Type":"application/json"}});if(!N.ok){const O=await N.text().catch(()=>"");throw new Error(`Error calling read-only function. Response ${N.status}: ${N.statusText}. Attempted to fetch ${l} and failed with the message: "${O}"`)}return N.json().then(O=>parseReadOnlyResponse(O))}var buffer={},ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(r,i,a,o,p){var m,y,c=p*8-o-1,d=(1<<c)-1,l=d>>1,x=-7,R=a?p-1:0,N=a?-1:1,O=r[i+R];for(R+=N,m=O&(1<<-x)-1,O>>=-x,x+=c;x>0;m=m*256+r[i+R],R+=N,x-=8);for(y=m&(1<<-x)-1,m>>=-x,x+=o;x>0;y=y*256+r[i+R],R+=N,x-=8);if(m===0)m=1-l;else{if(m===d)return y?NaN:(O?-1:1)*(1/0);y=y+Math.pow(2,o),m=m-l}return(O?-1:1)*y*Math.pow(2,m-o)};ieee754.write=function(r,i,a,o,p,m){var y,c,d,l=m*8-p-1,x=(1<<l)-1,R=x>>1,N=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=o?0:m-1,k=o?1:-1,M=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(c=isNaN(i)?1:0,y=x):(y=Math.floor(Math.log(i)/Math.LN2),i*(d=Math.pow(2,-y))<1&&(y--,d*=2),y+R>=1?i+=N/d:i+=N*Math.pow(2,1-R),i*d>=2&&(y++,d/=2),y+R>=x?(c=0,y=x):y+R>=1?(c=(i*d-1)*Math.pow(2,p),y=y+R):(c=i*Math.pow(2,R-1)*Math.pow(2,p),y=0));p>=8;r[a+O]=c&255,O+=k,c/=256,p-=8);for(y=y<<p|c,l+=p;l>0;r[a+O]=y&255,O+=k,y/=256,l-=8);r[a+O-k]|=M*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const i=base64Js,a=ieee754,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=c,r.SlowBuffer=S,r.INSPECT_MAX_BYTES=50;const p=2147483647;r.kMaxLength=p,c.TYPED_ARRAY_SUPPORT=m(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function m(){try{const n=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(n,e),n.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function y(n){if(n>p)throw new RangeError('The value "'+n+'" is invalid for option "size"');const e=new Uint8Array(n);return Object.setPrototypeOf(e,c.prototype),e}function c(n,e,t){if(typeof n=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(n)}return d(n,e,t)}c.poolSize=8192;function d(n,e,t){if(typeof n=="string")return N(n,e);if(ArrayBuffer.isView(n))return k(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(Q(n,ArrayBuffer)||n&&Q(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Q(n,SharedArrayBuffer)||n&&Q(n.buffer,SharedArrayBuffer)))return M(n,e,t);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const s=n.valueOf&&n.valueOf();if(s!=null&&s!==n)return c.from(s,e,t);const h=F(n);if(h)return h;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return c.from(n[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}c.from=function(n,e,t){return d(n,e,t)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function l(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function x(n,e,t){return l(n),n<=0?y(n):e!==void 0?typeof t=="string"?y(n).fill(e,t):y(n).fill(e):y(n)}c.alloc=function(n,e,t){return x(n,e,t)};function R(n){return l(n),y(n<0?0:g(n)|0)}c.allocUnsafe=function(n){return R(n)},c.allocUnsafeSlow=function(n){return R(n)};function N(n,e){if((typeof e!="string"||e==="")&&(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const t=v(n,e)|0;let s=y(t);const h=s.write(n,e);return h!==t&&(s=s.slice(0,h)),s}function O(n){const e=n.length<0?0:g(n.length)|0,t=y(e);for(let s=0;s<e;s+=1)t[s]=n[s]&255;return t}function k(n){if(Q(n,Uint8Array)){const e=new Uint8Array(n);return M(e.buffer,e.byteOffset,e.byteLength)}return O(n)}function M(n,e,t){if(e<0||n.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let s;return e===void 0&&t===void 0?s=new Uint8Array(n):t===void 0?s=new Uint8Array(n,e):s=new Uint8Array(n,e,t),Object.setPrototypeOf(s,c.prototype),s}function F(n){if(c.isBuffer(n)){const e=g(n.length)|0,t=y(e);return t.length===0||n.copy(t,0,0,e),t}if(n.length!==void 0)return typeof n.length!="number"||fe(n.length)?y(0):O(n);if(n.type==="Buffer"&&Array.isArray(n.data))return O(n.data)}function g(n){if(n>=p)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return n|0}function S(n){return+n!=n&&(n=0),c.alloc(+n)}c.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==c.prototype},c.compare=function(e,t){if(Q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),Q(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let s=e.length,h=t.length;for(let _=0,E=Math.min(s,h);_<E;++_)if(e[_]!==t[_]){s=e[_],h=t[_];break}return s<h?-1:h<s?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return c.alloc(0);let s;if(t===void 0)for(t=0,s=0;s<e.length;++s)t+=e[s].length;const h=c.allocUnsafe(t);let _=0;for(s=0;s<e.length;++s){let E=e[s];if(Q(E,Uint8Array))_+E.length>h.length?(c.isBuffer(E)||(E=c.from(E)),E.copy(h,_)):Uint8Array.prototype.set.call(h,E,_);else if(c.isBuffer(E))E.copy(h,_);else throw new TypeError('"list" argument must be an Array of Buffers');_+=E.length}return h};function v(n,e){if(c.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||Q(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);const t=n.length,s=arguments.length>2&&arguments[2]===!0;if(!s&&t===0)return 0;let h=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return W(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return we(n).length;default:if(h)return s?-1:W(n).length;e=(""+e).toLowerCase(),h=!0}}c.byteLength=v;function I(n,e,t){let s=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(n||(n="utf8");;)switch(n){case"hex":return ne(this,e,t);case"utf8":case"utf-8":return le(this,e,t);case"ascii":return re(this,e,t);case"latin1":case"binary":return ce(this,e,t);case"base64":return ie(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,e,t);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),s=!0}}c.prototype._isBuffer=!0;function A(n,e,t){const s=n[e];n[e]=n[t],n[t]=s}c.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)A(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)A(this,t,t+3),A(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)A(this,t,t+7),A(this,t+1,t+6),A(this,t+2,t+5),A(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return e===0?"":arguments.length===0?le(this,0,e):I.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:c.compare(this,e)===0},c.prototype.inspect=function(){let e="";const t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(e,t,s,h,_){if(Q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),s===void 0&&(s=e?e.length:0),h===void 0&&(h=0),_===void 0&&(_=this.length),t<0||s>e.length||h<0||_>this.length)throw new RangeError("out of range index");if(h>=_&&t>=s)return 0;if(h>=_)return-1;if(t>=s)return 1;if(t>>>=0,s>>>=0,h>>>=0,_>>>=0,this===e)return 0;let E=_-h,$=s-t;const X=Math.min(E,$),H=this.slice(h,_),K=e.slice(t,s);for(let V=0;V<X;++V)if(H[V]!==K[V]){E=H[V],$=K[V];break}return E<$?-1:$<E?1:0};function P(n,e,t,s,h){if(n.length===0)return-1;if(typeof t=="string"?(s=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,fe(t)&&(t=h?0:n.length-1),t<0&&(t=n.length+t),t>=n.length){if(h)return-1;t=n.length-1}else if(t<0)if(h)t=0;else return-1;if(typeof e=="string"&&(e=c.from(e,s)),c.isBuffer(e))return e.length===0?-1:G(n,e,t,s,h);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?h?Uint8Array.prototype.indexOf.call(n,e,t):Uint8Array.prototype.lastIndexOf.call(n,e,t):G(n,[e],t,s,h);throw new TypeError("val must be string, number or Buffer")}function G(n,e,t,s,h){let _=1,E=n.length,$=e.length;if(s!==void 0&&(s=String(s).toLowerCase(),s==="ucs2"||s==="ucs-2"||s==="utf16le"||s==="utf-16le")){if(n.length<2||e.length<2)return-1;_=2,E/=2,$/=2,t/=2}function X(K,V){return _===1?K[V]:K.readUInt16BE(V*_)}let H;if(h){let K=-1;for(H=t;H<E;H++)if(X(n,H)===X(e,K===-1?0:H-K)){if(K===-1&&(K=H),H-K+1===$)return K*_}else K!==-1&&(H-=H-K),K=-1}else for(t+$>E&&(t=E-$),H=t;H>=0;H--){let K=!0;for(let V=0;V<$;V++)if(X(n,H+V)!==X(e,V)){K=!1;break}if(K)return H}return-1}c.prototype.includes=function(e,t,s){return this.indexOf(e,t,s)!==-1},c.prototype.indexOf=function(e,t,s){return P(this,e,t,s,!0)},c.prototype.lastIndexOf=function(e,t,s){return P(this,e,t,s,!1)};function q(n,e,t,s){t=Number(t)||0;const h=n.length-t;s?(s=Number(s),s>h&&(s=h)):s=h;const _=e.length;s>_/2&&(s=_/2);let E;for(E=0;E<s;++E){const $=parseInt(e.substr(E*2,2),16);if(fe($))return E;n[t+E]=$}return E}function D(n,e,t,s){return xe(W(e,n.length-t),n,t,s)}function ee(n,e,t,s){return xe(ae(e),n,t,s)}function oe(n,e,t,s){return xe(we(e),n,t,s)}function ge(n,e,t,s){return xe(me(e,n.length-t),n,t,s)}c.prototype.write=function(e,t,s,h){if(t===void 0)h="utf8",s=this.length,t=0;else if(s===void 0&&typeof t=="string")h=t,s=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(s)?(s=s>>>0,h===void 0&&(h="utf8")):(h=s,s=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const _=this.length-t;if((s===void 0||s>_)&&(s=_),e.length>0&&(s<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");let E=!1;for(;;)switch(h){case"hex":return q(this,e,t,s);case"utf8":case"utf-8":return D(this,e,t,s);case"ascii":case"latin1":case"binary":return ee(this,e,t,s);case"base64":return oe(this,e,t,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,e,t,s);default:if(E)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),E=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ie(n,e,t){return e===0&&t===n.length?i.fromByteArray(n):i.fromByteArray(n.slice(e,t))}function le(n,e,t){t=Math.min(n.length,t);const s=[];let h=e;for(;h<t;){const _=n[h];let E=null,$=_>239?4:_>223?3:_>191?2:1;if(h+$<=t){let X,H,K,V;switch($){case 1:_<128&&(E=_);break;case 2:X=n[h+1],(X&192)===128&&(V=(_&31)<<6|X&63,V>127&&(E=V));break;case 3:X=n[h+1],H=n[h+2],(X&192)===128&&(H&192)===128&&(V=(_&15)<<12|(X&63)<<6|H&63,V>2047&&(V<55296||V>57343)&&(E=V));break;case 4:X=n[h+1],H=n[h+2],K=n[h+3],(X&192)===128&&(H&192)===128&&(K&192)===128&&(V=(_&15)<<18|(X&63)<<12|(H&63)<<6|K&63,V>65535&&V<1114112&&(E=V))}}E===null?(E=65533,$=1):E>65535&&(E-=65536,s.push(E>>>10&1023|55296),E=56320|E&1023),s.push(E),h+=$}return ye(s)}const se=4096;function ye(n){const e=n.length;if(e<=se)return String.fromCharCode.apply(String,n);let t="",s=0;for(;s<e;)t+=String.fromCharCode.apply(String,n.slice(s,s+=se));return t}function re(n,e,t){let s="";t=Math.min(n.length,t);for(let h=e;h<t;++h)s+=String.fromCharCode(n[h]&127);return s}function ce(n,e,t){let s="";t=Math.min(n.length,t);for(let h=e;h<t;++h)s+=String.fromCharCode(n[h]);return s}function ne(n,e,t){const s=n.length;(!e||e<0)&&(e=0),(!t||t<0||t>s)&&(t=s);let h="";for(let _=e;_<t;++_)h+=_e[n[_]];return h}function de(n,e,t){const s=n.slice(e,t);let h="";for(let _=0;_<s.length-1;_+=2)h+=String.fromCharCode(s[_]+s[_+1]*256);return h}c.prototype.slice=function(e,t){const s=this.length;e=~~e,t=t===void 0?s:~~t,e<0?(e+=s,e<0&&(e=0)):e>s&&(e=s),t<0?(t+=s,t<0&&(t=0)):t>s&&(t=s),t<e&&(t=e);const h=this.subarray(e,t);return Object.setPrototypeOf(h,c.prototype),h};function Y(n,e,t){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+e>t)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,s){e=e>>>0,t=t>>>0,s||Y(e,t,this.length);let h=this[e],_=1,E=0;for(;++E<t&&(_*=256);)h+=this[e+E]*_;return h},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,s){e=e>>>0,t=t>>>0,s||Y(e,t,this.length);let h=this[e+--t],_=1;for(;t>0&&(_*=256);)h+=this[e+--t]*_;return h},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e=e>>>0,t||Y(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||Y(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||Y(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=Z(function(e){e=e>>>0,T(e,"offset");const t=this[e],s=this[e+7];(t===void 0||s===void 0)&&C(e,this.length-8);const h=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,_=this[++e]+this[++e]*2**8+this[++e]*2**16+s*2**24;return BigInt(h)+(BigInt(_)<<BigInt(32))}),c.prototype.readBigUInt64BE=Z(function(e){e=e>>>0,T(e,"offset");const t=this[e],s=this[e+7];(t===void 0||s===void 0)&&C(e,this.length-8);const h=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],_=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+s;return(BigInt(h)<<BigInt(32))+BigInt(_)}),c.prototype.readIntLE=function(e,t,s){e=e>>>0,t=t>>>0,s||Y(e,t,this.length);let h=this[e],_=1,E=0;for(;++E<t&&(_*=256);)h+=this[e+E]*_;return _*=128,h>=_&&(h-=Math.pow(2,8*t)),h},c.prototype.readIntBE=function(e,t,s){e=e>>>0,t=t>>>0,s||Y(e,t,this.length);let h=t,_=1,E=this[e+--h];for(;h>0&&(_*=256);)E+=this[e+--h]*_;return _*=128,E>=_&&(E-=Math.pow(2,8*t)),E},c.prototype.readInt8=function(e,t){return e=e>>>0,t||Y(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},c.prototype.readInt16LE=function(e,t){e=e>>>0,t||Y(e,2,this.length);const s=this[e]|this[e+1]<<8;return s&32768?s|4294901760:s},c.prototype.readInt16BE=function(e,t){e=e>>>0,t||Y(e,2,this.length);const s=this[e+1]|this[e]<<8;return s&32768?s|4294901760:s},c.prototype.readInt32LE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=Z(function(e){e=e>>>0,T(e,"offset");const t=this[e],s=this[e+7];(t===void 0||s===void 0)&&C(e,this.length-8);const h=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(s<<24);return(BigInt(h)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),c.prototype.readBigInt64BE=Z(function(e){e=e>>>0,T(e,"offset");const t=this[e],s=this[e+7];(t===void 0||s===void 0)&&C(e,this.length-8);const h=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(h)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+s)}),c.prototype.readFloatLE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),a.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),a.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||Y(e,8,this.length),a.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||Y(e,8,this.length),a.read(this,e,!1,52,8)};function J(n,e,t,s,h,_){if(!c.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>h||e<_)throw new RangeError('"value" argument is out of bounds');if(t+s>n.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,s,h){if(e=+e,t=t>>>0,s=s>>>0,!h){const $=Math.pow(2,8*s)-1;J(this,e,t,s,$,0)}let _=1,E=0;for(this[t]=e&255;++E<s&&(_*=256);)this[t+E]=e/_&255;return t+s},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,s,h){if(e=+e,t=t>>>0,s=s>>>0,!h){const $=Math.pow(2,8*s)-1;J(this,e,t,s,$,0)}let _=s-1,E=1;for(this[t+_]=e&255;--_>=0&&(E*=256);)this[t+_]=e/E&255;return t+s},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,s){return e=+e,t=t>>>0,s||J(this,e,t,1,255,0),this[t]=e&255,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,s){return e=+e,t=t>>>0,s||J(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,s){return e=+e,t=t>>>0,s||J(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,s){return e=+e,t=t>>>0,s||J(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,s){return e=+e,t=t>>>0,s||J(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function te(n,e,t,s,h){u(e,s,h,n,t,7);let _=Number(e&BigInt(4294967295));n[t++]=_,_=_>>8,n[t++]=_,_=_>>8,n[t++]=_,_=_>>8,n[t++]=_;let E=Number(e>>BigInt(32)&BigInt(4294967295));return n[t++]=E,E=E>>8,n[t++]=E,E=E>>8,n[t++]=E,E=E>>8,n[t++]=E,t}function pe(n,e,t,s,h){u(e,s,h,n,t,7);let _=Number(e&BigInt(4294967295));n[t+7]=_,_=_>>8,n[t+6]=_,_=_>>8,n[t+5]=_,_=_>>8,n[t+4]=_;let E=Number(e>>BigInt(32)&BigInt(4294967295));return n[t+3]=E,E=E>>8,n[t+2]=E,E=E>>8,n[t+1]=E,E=E>>8,n[t]=E,t+8}c.prototype.writeBigUInt64LE=Z(function(e,t=0){return te(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Z(function(e,t=0){return pe(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(e,t,s,h){if(e=+e,t=t>>>0,!h){const X=Math.pow(2,8*s-1);J(this,e,t,s,X-1,-X)}let _=0,E=1,$=0;for(this[t]=e&255;++_<s&&(E*=256);)e<0&&$===0&&this[t+_-1]!==0&&($=1),this[t+_]=(e/E>>0)-$&255;return t+s},c.prototype.writeIntBE=function(e,t,s,h){if(e=+e,t=t>>>0,!h){const X=Math.pow(2,8*s-1);J(this,e,t,s,X-1,-X)}let _=s-1,E=1,$=0;for(this[t+_]=e&255;--_>=0&&(E*=256);)e<0&&$===0&&this[t+_+1]!==0&&($=1),this[t+_]=(e/E>>0)-$&255;return t+s},c.prototype.writeInt8=function(e,t,s){return e=+e,t=t>>>0,s||J(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},c.prototype.writeInt16LE=function(e,t,s){return e=+e,t=t>>>0,s||J(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,s){return e=+e,t=t>>>0,s||J(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},c.prototype.writeInt32LE=function(e,t,s){return e=+e,t=t>>>0,s||J(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,s){return e=+e,t=t>>>0,s||J(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},c.prototype.writeBigInt64LE=Z(function(e,t=0){return te(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Z(function(e,t=0){return pe(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function he(n,e,t,s,h,_){if(t+s>n.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function b(n,e,t,s,h){return e=+e,t=t>>>0,h||he(n,e,t,4),a.write(n,e,t,s,23,4),t+4}c.prototype.writeFloatLE=function(e,t,s){return b(this,e,t,!0,s)},c.prototype.writeFloatBE=function(e,t,s){return b(this,e,t,!1,s)};function w(n,e,t,s,h){return e=+e,t=t>>>0,h||he(n,e,t,8),a.write(n,e,t,s,52,8),t+8}c.prototype.writeDoubleLE=function(e,t,s){return w(this,e,t,!0,s)},c.prototype.writeDoubleBE=function(e,t,s){return w(this,e,t,!1,s)},c.prototype.copy=function(e,t,s,h){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(s||(s=0),!h&&h!==0&&(h=this.length),t>=e.length&&(t=e.length),t||(t=0),h>0&&h<s&&(h=s),h===s||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),e.length-t<h-s&&(h=e.length-t+s);const _=h-s;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,s,h):Uint8Array.prototype.set.call(e,this.subarray(s,h),t),_},c.prototype.fill=function(e,t,s,h){if(typeof e=="string"){if(typeof t=="string"?(h=t,t=0,s=this.length):typeof s=="string"&&(h=s,s=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!c.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(e.length===1){const E=e.charCodeAt(0);(h==="utf8"&&E<128||h==="latin1")&&(e=E)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<s)throw new RangeError("Out of range index");if(s<=t)return this;t=t>>>0,s=s===void 0?this.length:s>>>0,e||(e=0);let _;if(typeof e=="number")for(_=t;_<s;++_)this[_]=e;else{const E=c.isBuffer(e)?e:c.from(e,h),$=E.length;if($===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(_=0;_<s-t;++_)this[_+t]=E[_%$]}return this};const B={};function U(n,e,t){B[n]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${n}]`,this.stack,delete this.name}get code(){return n}set code(h){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:h,writable:!0})}toString(){return`${this.name} [${n}]: ${this.message}`}}}U("ERR_BUFFER_OUT_OF_BOUNDS",function(n){return n?`${n} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),U("ERR_INVALID_ARG_TYPE",function(n,e){return`The "${n}" argument must be of type number. Received type ${typeof e}`},TypeError),U("ERR_OUT_OF_RANGE",function(n,e,t){let s=`The value of "${n}" is out of range.`,h=t;return Number.isInteger(t)&&Math.abs(t)>2**32?h=L(String(t)):typeof t=="bigint"&&(h=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(h=L(h)),h+="n"),s+=` It must be ${e}. Received ${h}`,s},RangeError);function L(n){let e="",t=n.length;const s=n[0]==="-"?1:0;for(;t>=s+4;t-=3)e=`_${n.slice(t-3,t)}${e}`;return`${n.slice(0,t)}${e}`}function f(n,e,t){T(e,"offset"),(n[e]===void 0||n[e+t]===void 0)&&C(e,n.length-(t+1))}function u(n,e,t,s,h,_){if(n>t||n<e){const E=typeof e=="bigint"?"n":"";let $;throw _>3?e===0||e===BigInt(0)?$=`>= 0${E} and < 2${E} ** ${(_+1)*8}${E}`:$=`>= -(2${E} ** ${(_+1)*8-1}${E}) and < 2 ** ${(_+1)*8-1}${E}`:$=`>= ${e}${E} and <= ${t}${E}`,new B.ERR_OUT_OF_RANGE("value",$,n)}f(s,h,_)}function T(n,e){if(typeof n!="number")throw new B.ERR_INVALID_ARG_TYPE(e,"number",n)}function C(n,e,t){throw Math.floor(n)!==n?(T(n,t),new B.ERR_OUT_OF_RANGE(t||"offset","an integer",n)):e<0?new B.ERR_BUFFER_OUT_OF_BOUNDS:new B.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,n)}const z=/[^+/0-9A-Za-z-_]/g;function j(n){if(n=n.split("=")[0],n=n.trim().replace(z,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function W(n,e){e=e||1/0;let t;const s=n.length;let h=null;const _=[];for(let E=0;E<s;++E){if(t=n.charCodeAt(E),t>55295&&t<57344){if(!h){if(t>56319){(e-=3)>-1&&_.push(239,191,189);continue}else if(E+1===s){(e-=3)>-1&&_.push(239,191,189);continue}h=t;continue}if(t<56320){(e-=3)>-1&&_.push(239,191,189),h=t;continue}t=(h-55296<<10|t-56320)+65536}else h&&(e-=3)>-1&&_.push(239,191,189);if(h=null,t<128){if((e-=1)<0)break;_.push(t)}else if(t<2048){if((e-=2)<0)break;_.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;_.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;_.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return _}function ae(n){const e=[];for(let t=0;t<n.length;++t)e.push(n.charCodeAt(t)&255);return e}function me(n,e){let t,s,h;const _=[];for(let E=0;E<n.length&&!((e-=2)<0);++E)t=n.charCodeAt(E),s=t>>8,h=t%256,_.push(h),_.push(s);return _}function we(n){return i.toByteArray(j(n))}function xe(n,e,t,s){let h;for(h=0;h<s&&!(h+t>=e.length||h>=n.length);++h)e[h+t]=n[h];return h}function Q(n,e){return n instanceof e||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===e.name}function fe(n){return n!==n}const _e=function(){const n="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){const s=t*16;for(let h=0;h<16;++h)e[s+h]=n[t]+n[h]}return e}();function Z(n){return typeof BigInt>"u"?ue:n}function ue(){throw new Error("BigInt not supported")}})(buffer);var browser$1={exports:{}},lib$2={},readableBrowser={exports:{}},streamBrowser=require$$3.EventEmitter,buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function r(k,M){var F=Object.keys(k);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(k);M&&(g=g.filter(function(S){return Object.getOwnPropertyDescriptor(k,S).enumerable})),F.push.apply(F,g)}return F}function i(k){for(var M=1;M<arguments.length;M++){var F=arguments[M]!=null?arguments[M]:{};M%2?r(Object(F),!0).forEach(function(g){a(k,g,F[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(F)):r(Object(F)).forEach(function(g){Object.defineProperty(k,g,Object.getOwnPropertyDescriptor(F,g))})}return k}function a(k,M,F){return M=y(M),M in k?Object.defineProperty(k,M,{value:F,enumerable:!0,configurable:!0,writable:!0}):k[M]=F,k}function o(k,M){if(!(k instanceof M))throw new TypeError("Cannot call a class as a function")}function p(k,M){for(var F=0;F<M.length;F++){var g=M[F];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(k,y(g.key),g)}}function m(k,M,F){return M&&p(k.prototype,M),F&&p(k,F),Object.defineProperty(k,"prototype",{writable:!1}),k}function y(k){var M=c(k,"string");return typeof M=="symbol"?M:String(M)}function c(k,M){if(typeof k!="object"||k===null)return k;var F=k[Symbol.toPrimitive];if(F!==void 0){var g=F.call(k,M||"default");if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(k)}var d=buffer,l=d.Buffer,x=require$$3,R=x.inspect,N=R&&R.custom||"inspect";function O(k,M,F){l.prototype.copy.call(k,M,F)}return buffer_list=function(){function k(){o(this,k),this.head=null,this.tail=null,this.length=0}return m(k,[{key:"push",value:function(F){var g={data:F,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length}},{key:"unshift",value:function(F){var g={data:F,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length}},{key:"shift",value:function(){if(this.length!==0){var F=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,F}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(F){if(this.length===0)return"";for(var g=this.head,S=""+g.data;g=g.next;)S+=F+g.data;return S}},{key:"concat",value:function(F){if(this.length===0)return l.alloc(0);for(var g=l.allocUnsafe(F>>>0),S=this.head,v=0;S;)O(S.data,g,v),v+=S.data.length,S=S.next;return g}},{key:"consume",value:function(F,g){var S;return F<this.head.data.length?(S=this.head.data.slice(0,F),this.head.data=this.head.data.slice(F)):F===this.head.data.length?S=this.shift():S=g?this._getString(F):this._getBuffer(F),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(F){var g=this.head,S=1,v=g.data;for(F-=v.length;g=g.next;){var I=g.data,A=F>I.length?I.length:F;if(A===I.length?v+=I:v+=I.slice(0,F),F-=A,F===0){A===I.length?(++S,g.next?this.head=g.next:this.head=this.tail=null):(this.head=g,g.data=I.slice(A));break}++S}return this.length-=S,v}},{key:"_getBuffer",value:function(F){var g=l.allocUnsafe(F),S=this.head,v=1;for(S.data.copy(g),F-=S.data.length;S=S.next;){var I=S.data,A=F>I.length?I.length:F;if(I.copy(g,g.length-F,0,A),F-=A,F===0){A===I.length?(++v,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=I.slice(A));break}++v}return this.length-=v,g}},{key:N,value:function(F,g){return R(this,i(i({},g),{},{depth:0,customInspect:!1}))}}]),k}(),buffer_list}function destroy(r,i){var a=this,o=this._readableState&&this._readableState.destroyed,p=this._writableState&&this._writableState.destroyed;return o||p?(i?i(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,r)):process.nextTick(emitErrorNT,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(m){!i&&m?a._writableState?a._writableState.errorEmitted?process.nextTick(emitCloseNT,a):(a._writableState.errorEmitted=!0,process.nextTick(emitErrorAndCloseNT,a,m)):process.nextTick(emitErrorAndCloseNT,a,m):i?(process.nextTick(emitCloseNT,a),i(m)):process.nextTick(emitCloseNT,a)}),this)}function emitErrorAndCloseNT(r,i){emitErrorNT(r,i),emitCloseNT(r)}function emitCloseNT(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(r,i){r.emit("error",i)}function errorOrDestroy(r,i){var a=r._readableState,o=r._writableState;a&&a.autoDestroy||o&&o.autoDestroy?r.destroy(i):r.emit("error",i)}var destroy_1={destroy,undestroy,errorOrDestroy},errorsBrowser={};function _inheritsLoose(r,i){r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.__proto__=i}var codes={};function createErrorType(r,i,a){a||(a=Error);function o(m,y,c){return typeof i=="string"?i:i(m,y,c)}var p=function(m){_inheritsLoose(y,m);function y(c,d,l){return m.call(this,o(c,d,l))||this}return y}(a);p.prototype.name=a.name,p.prototype.code=r,codes[r]=p}function oneOf(r,i){if(Array.isArray(r)){var a=r.length;return r=r.map(function(o){return String(o)}),a>2?"one of ".concat(i," ").concat(r.slice(0,a-1).join(", "),", or ")+r[a-1]:a===2?"one of ".concat(i," ").concat(r[0]," or ").concat(r[1]):"of ".concat(i," ").concat(r[0])}else return"of ".concat(i," ").concat(String(r))}function startsWith(r,i,a){return r.substr(!a||a<0?0:+a,i.length)===i}function endsWith(r,i,a){return(a===void 0||a>r.length)&&(a=r.length),r.substring(a-i.length,a)===i}function includes(r,i,a){return typeof a!="number"&&(a=0),a+i.length>r.length?!1:r.indexOf(i,a)!==-1}createErrorType("ERR_INVALID_OPT_VALUE",function(r,i){return'The value "'+i+'" is invalid for option "'+r+'"'},TypeError);createErrorType("ERR_INVALID_ARG_TYPE",function(r,i,a){var o;typeof i=="string"&&startsWith(i,"not ")?(o="must not be",i=i.replace(/^not /,"")):o="must be";var p;if(endsWith(r," argument"))p="The ".concat(r," ").concat(o," ").concat(oneOf(i,"type"));else{var m=includes(r,".")?"property":"argument";p='The "'.concat(r,'" ').concat(m," ").concat(o," ").concat(oneOf(i,"type"))}return p+=". Received type ".concat(typeof a),p},TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"});createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"});createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");errorsBrowser.codes=codes;var ERR_INVALID_OPT_VALUE=errorsBrowser.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(r,i,a){return r.highWaterMark!=null?r.highWaterMark:i?r[a]:null}function getHighWaterMark(r,i,a,o){var p=highWaterMarkFrom(i,o,a);if(p!=null){if(!(isFinite(p)&&Math.floor(p)===p)||p<0){var m=o?a:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(m,p)}return Math.floor(p)}return r.objectMode?16:16*1024}var state={getHighWaterMark},inherits_browser={exports:{}};typeof Object.create=="function"?inherits_browser.exports=function(i,a){a&&(i.super_=a,i.prototype=Object.create(a.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(i,a){if(a){i.super_=a;var o=function(){};o.prototype=a.prototype,i.prototype=new o,i.prototype.constructor=i}};var inherits_browserExports=inherits_browser.exports,browser=deprecate;function deprecate(r,i){if(config("noDeprecation"))return r;var a=!1;function o(){if(!a){if(config("throwDeprecation"))throw new Error(i);config("traceDeprecation")?console.trace(i):console.warn(i),a=!0}return r.apply(this,arguments)}return o}function config(r){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var i=commonjsGlobal.localStorage[r];return i==null?!1:String(i).toLowerCase()==="true"}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=q;function r(b){var w=this;this.next=null,this.entry=null,this.finish=function(){he(w,b)}}var i;q.WritableState=P;var a={deprecate:browser},o=streamBrowser,p=buffer.Buffer,m=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function y(b){return p.from(b)}function c(b){return p.isBuffer(b)||b instanceof m}var d=destroy_1,l=state,x=l.getHighWaterMark,R=errorsBrowser.codes,N=R.ERR_INVALID_ARG_TYPE,O=R.ERR_METHOD_NOT_IMPLEMENTED,k=R.ERR_MULTIPLE_CALLBACK,M=R.ERR_STREAM_CANNOT_PIPE,F=R.ERR_STREAM_DESTROYED,g=R.ERR_STREAM_NULL_VALUES,S=R.ERR_STREAM_WRITE_AFTER_END,v=R.ERR_UNKNOWN_ENCODING,I=d.errorOrDestroy;inherits_browserExports(q,o);function A(){}function P(b,w,B){i=i||require_stream_duplex(),b=b||{},typeof B!="boolean"&&(B=w instanceof i),this.objectMode=!!b.objectMode,B&&(this.objectMode=this.objectMode||!!b.writableObjectMode),this.highWaterMark=x(this,b,"writableHighWaterMark",B),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var U=b.decodeStrings===!1;this.decodeStrings=!U,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(L){ye(w,L)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=b.emitClose!==!1,this.autoDestroy=!!b.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}P.prototype.getBuffer=function(){for(var w=this.bufferedRequest,B=[];w;)B.push(w),w=w.next;return B},function(){try{Object.defineProperty(P.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var G;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(G=Function.prototype[Symbol.hasInstance],Object.defineProperty(q,Symbol.hasInstance,{value:function(w){return G.call(this,w)?!0:this!==q?!1:w&&w._writableState instanceof P}})):G=function(w){return w instanceof this};function q(b){i=i||require_stream_duplex();var w=this instanceof i;if(!w&&!G.call(q,this))return new q(b);this._writableState=new P(b,this,w),this.writable=!0,b&&(typeof b.write=="function"&&(this._write=b.write),typeof b.writev=="function"&&(this._writev=b.writev),typeof b.destroy=="function"&&(this._destroy=b.destroy),typeof b.final=="function"&&(this._final=b.final)),o.call(this)}q.prototype.pipe=function(){I(this,new M)};function D(b,w){var B=new S;I(b,B),process.nextTick(w,B)}function ee(b,w,B,U){var L;return B===null?L=new g:typeof B!="string"&&!w.objectMode&&(L=new N("chunk",["string","Buffer"],B)),L?(I(b,L),process.nextTick(U,L),!1):!0}q.prototype.write=function(b,w,B){var U=this._writableState,L=!1,f=!U.objectMode&&c(b);return f&&!p.isBuffer(b)&&(b=y(b)),typeof w=="function"&&(B=w,w=null),f?w="buffer":w||(w=U.defaultEncoding),typeof B!="function"&&(B=A),U.ending?D(this,B):(f||ee(this,U,b,B))&&(U.pendingcb++,L=ge(this,U,f,b,w,B)),L},q.prototype.cork=function(){this._writableState.corked++},q.prototype.uncork=function(){var b=this._writableState;b.corked&&(b.corked--,!b.writing&&!b.corked&&!b.bufferProcessing&&b.bufferedRequest&&ne(this,b))},q.prototype.setDefaultEncoding=function(w){if(typeof w=="string"&&(w=w.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((w+"").toLowerCase())>-1))throw new v(w);return this._writableState.defaultEncoding=w,this},Object.defineProperty(q.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function oe(b,w,B){return!b.objectMode&&b.decodeStrings!==!1&&typeof w=="string"&&(w=p.from(w,B)),w}Object.defineProperty(q.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ge(b,w,B,U,L,f){if(!B){var u=oe(w,U,L);U!==u&&(B=!0,L="buffer",U=u)}var T=w.objectMode?1:U.length;w.length+=T;var C=w.length<w.highWaterMark;if(C||(w.needDrain=!0),w.writing||w.corked){var z=w.lastBufferedRequest;w.lastBufferedRequest={chunk:U,encoding:L,isBuf:B,callback:f,next:null},z?z.next=w.lastBufferedRequest:w.bufferedRequest=w.lastBufferedRequest,w.bufferedRequestCount+=1}else ie(b,w,!1,T,U,L,f);return C}function ie(b,w,B,U,L,f,u){w.writelen=U,w.writecb=u,w.writing=!0,w.sync=!0,w.destroyed?w.onwrite(new F("write")):B?b._writev(L,w.onwrite):b._write(L,f,w.onwrite),w.sync=!1}function le(b,w,B,U,L){--w.pendingcb,B?(process.nextTick(L,U),process.nextTick(te,b,w),b._writableState.errorEmitted=!0,I(b,U)):(L(U),b._writableState.errorEmitted=!0,I(b,U),te(b,w))}function se(b){b.writing=!1,b.writecb=null,b.length-=b.writelen,b.writelen=0}function ye(b,w){var B=b._writableState,U=B.sync,L=B.writecb;if(typeof L!="function")throw new k;if(se(B),w)le(b,B,U,w,L);else{var f=de(B)||b.destroyed;!f&&!B.corked&&!B.bufferProcessing&&B.bufferedRequest&&ne(b,B),U?process.nextTick(re,b,B,f,L):re(b,B,f,L)}}function re(b,w,B,U){B||ce(b,w),w.pendingcb--,U(),te(b,w)}function ce(b,w){w.length===0&&w.needDrain&&(w.needDrain=!1,b.emit("drain"))}function ne(b,w){w.bufferProcessing=!0;var B=w.bufferedRequest;if(b._writev&&B&&B.next){var U=w.bufferedRequestCount,L=new Array(U),f=w.corkedRequestsFree;f.entry=B;for(var u=0,T=!0;B;)L[u]=B,B.isBuf||(T=!1),B=B.next,u+=1;L.allBuffers=T,ie(b,w,!0,w.length,L,"",f.finish),w.pendingcb++,w.lastBufferedRequest=null,f.next?(w.corkedRequestsFree=f.next,f.next=null):w.corkedRequestsFree=new r(w),w.bufferedRequestCount=0}else{for(;B;){var C=B.chunk,z=B.encoding,j=B.callback,W=w.objectMode?1:C.length;if(ie(b,w,!1,W,C,z,j),B=B.next,w.bufferedRequestCount--,w.writing)break}B===null&&(w.lastBufferedRequest=null)}w.bufferedRequest=B,w.bufferProcessing=!1}q.prototype._write=function(b,w,B){B(new O("_write()"))},q.prototype._writev=null,q.prototype.end=function(b,w,B){var U=this._writableState;return typeof b=="function"?(B=b,b=null,w=null):typeof w=="function"&&(B=w,w=null),b!=null&&this.write(b,w),U.corked&&(U.corked=1,this.uncork()),U.ending||pe(this,U,B),this},Object.defineProperty(q.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function de(b){return b.ending&&b.length===0&&b.bufferedRequest===null&&!b.finished&&!b.writing}function Y(b,w){b._final(function(B){w.pendingcb--,B&&I(b,B),w.prefinished=!0,b.emit("prefinish"),te(b,w)})}function J(b,w){!w.prefinished&&!w.finalCalled&&(typeof b._final=="function"&&!w.destroyed?(w.pendingcb++,w.finalCalled=!0,process.nextTick(Y,b,w)):(w.prefinished=!0,b.emit("prefinish")))}function te(b,w){var B=de(w);if(B&&(J(b,w),w.pendingcb===0&&(w.finished=!0,b.emit("finish"),w.autoDestroy))){var U=b._readableState;(!U||U.autoDestroy&&U.endEmitted)&&b.destroy()}return B}function pe(b,w,B){w.ending=!0,te(b,w),B&&(w.finished?process.nextTick(B):b.once("finish",B)),w.ended=!0,b.writable=!1}function he(b,w,B){var U=b.entry;for(b.entry=null;U;){var L=U.callback;w.pendingcb--,L(B),U=U.next}w.corkedRequestsFree.next=b}return Object.defineProperty(q.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(w){this._writableState&&(this._writableState.destroyed=w)}}),q.prototype.destroy=d.destroy,q.prototype._undestroy=d.undestroy,q.prototype._destroy=function(b,w){w(b)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var r=Object.keys||function(l){var x=[];for(var R in l)x.push(R);return x};_stream_duplex=y;var i=require_stream_readable(),a=require_stream_writable();inherits_browserExports(y,i);for(var o=r(a.prototype),p=0;p<o.length;p++){var m=o[p];y.prototype[m]||(y.prototype[m]=a.prototype[m])}function y(l){if(!(this instanceof y))return new y(l);i.call(this,l),a.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",c)))}Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function c(){this._writableState.ended||process.nextTick(d,this)}function d(l){l.end()}return Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(x){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=x,this._writableState.destroyed=x)}}),_stream_duplex}var string_decoder={},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(r,i){var a=buffer,o=a.Buffer;function p(y,c){for(var d in y)c[d]=y[d]}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?r.exports=a:(p(a,i),i.Buffer=m);function m(y,c,d){return o(y,c,d)}m.prototype=Object.create(o.prototype),p(o,m),m.from=function(y,c,d){if(typeof y=="number")throw new TypeError("Argument must not be a number");return o(y,c,d)},m.alloc=function(y,c,d){if(typeof y!="number")throw new TypeError("Argument must be a number");var l=o(y);return c!==void 0?typeof d=="string"?l.fill(c,d):l.fill(c):l.fill(0),l},m.allocUnsafe=function(y){if(typeof y!="number")throw new TypeError("Argument must be a number");return o(y)},m.allocUnsafeSlow=function(y){if(typeof y!="number")throw new TypeError("Argument must be a number");return a.SlowBuffer(y)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var r=requireSafeBuffer().Buffer,i=r.isEncoding||function(g){switch(g=""+g,g&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(g){if(!g)return"utf8";for(var S;;)switch(g){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return g;default:if(S)return;g=(""+g).toLowerCase(),S=!0}}function o(g){var S=a(g);if(typeof S!="string"&&(r.isEncoding===i||!i(g)))throw new Error("Unknown encoding: "+g);return S||g}string_decoder.StringDecoder=p;function p(g){this.encoding=o(g);var S;switch(this.encoding){case"utf16le":this.text=R,this.end=N,S=4;break;case"utf8":this.fillLast=d,S=4;break;case"base64":this.text=O,this.end=k,S=3;break;default:this.write=M,this.end=F;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(S)}p.prototype.write=function(g){if(g.length===0)return"";var S,v;if(this.lastNeed){if(S=this.fillLast(g),S===void 0)return"";v=this.lastNeed,this.lastNeed=0}else v=0;return v<g.length?S?S+this.text(g,v):this.text(g,v):S||""},p.prototype.end=x,p.prototype.text=l,p.prototype.fillLast=function(g){if(this.lastNeed<=g.length)return g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,g.length),this.lastNeed-=g.length};function m(g){return g<=127?0:g>>5===6?2:g>>4===14?3:g>>3===30?4:g>>6===2?-1:-2}function y(g,S,v){var I=S.length-1;if(I<v)return 0;var A=m(S[I]);return A>=0?(A>0&&(g.lastNeed=A-1),A):--I<v||A===-2?0:(A=m(S[I]),A>=0?(A>0&&(g.lastNeed=A-2),A):--I<v||A===-2?0:(A=m(S[I]),A>=0?(A>0&&(A===2?A=0:g.lastNeed=A-3),A):0))}function c(g,S,v){if((S[0]&192)!==128)return g.lastNeed=0,"�";if(g.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return g.lastNeed=1,"�";if(g.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return g.lastNeed=2,"�"}}function d(g){var S=this.lastTotal-this.lastNeed,v=c(this,g);if(v!==void 0)return v;if(this.lastNeed<=g.length)return g.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,S,0,g.length),this.lastNeed-=g.length}function l(g,S){var v=y(this,g,S);if(!this.lastNeed)return g.toString("utf8",S);this.lastTotal=v;var I=g.length-(v-this.lastNeed);return g.copy(this.lastChar,0,I),g.toString("utf8",S,I)}function x(g){var S=g&&g.length?this.write(g):"";return this.lastNeed?S+"�":S}function R(g,S){if((g.length-S)%2===0){var v=g.toString("utf16le",S);if(v){var I=v.charCodeAt(v.length-1);if(I>=55296&&I<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],v.slice(0,-1)}return v}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",S,g.length-1)}function N(g){var S=g&&g.length?this.write(g):"";if(this.lastNeed){var v=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,v)}return S}function O(g,S){var v=(g.length-S)%3;return v===0?g.toString("base64",S):(this.lastNeed=3-v,this.lastTotal=3,v===1?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",S,g.length-v))}function k(g){var S=g&&g.length?this.write(g):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function M(g){return g.toString(this.encoding)}function F(g){return g&&g.length?this.write(g):""}return string_decoder}var ERR_STREAM_PREMATURE_CLOSE=errorsBrowser.codes.ERR_STREAM_PREMATURE_CLOSE;function once$1(r){var i=!1;return function(){if(!i){i=!0;for(var a=arguments.length,o=new Array(a),p=0;p<a;p++)o[p]=arguments[p];r.apply(this,o)}}}function noop$1(){}function isRequest$1(r){return r.setHeader&&typeof r.abort=="function"}function eos$1(r,i,a){if(typeof i=="function")return eos$1(r,null,i);i||(i={}),a=once$1(a||noop$1);var o=i.readable||i.readable!==!1&&r.readable,p=i.writable||i.writable!==!1&&r.writable,m=function(){r.writable||c()},y=r._writableState&&r._writableState.finished,c=function(){p=!1,y=!0,o||a.call(r)},d=r._readableState&&r._readableState.endEmitted,l=function(){o=!1,d=!0,p||a.call(r)},x=function(k){a.call(r,k)},R=function(){var k;if(o&&!d)return(!r._readableState||!r._readableState.ended)&&(k=new ERR_STREAM_PREMATURE_CLOSE),a.call(r,k);if(p&&!y)return(!r._writableState||!r._writableState.ended)&&(k=new ERR_STREAM_PREMATURE_CLOSE),a.call(r,k)},N=function(){r.req.on("finish",c)};return isRequest$1(r)?(r.on("complete",c),r.on("abort",R),r.req?N():r.on("request",N)):p&&!r._writableState&&(r.on("end",m),r.on("close",m)),r.on("end",l),r.on("finish",c),i.error!==!1&&r.on("error",x),r.on("close",R),function(){r.removeListener("complete",c),r.removeListener("abort",R),r.removeListener("request",N),r.req&&r.req.removeListener("finish",c),r.removeListener("end",m),r.removeListener("close",m),r.removeListener("finish",c),r.removeListener("end",l),r.removeListener("error",x),r.removeListener("close",R)}}var endOfStream=eos$1,async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var r;function i(v,I,A){return I=a(I),I in v?Object.defineProperty(v,I,{value:A,enumerable:!0,configurable:!0,writable:!0}):v[I]=A,v}function a(v){var I=o(v,"string");return typeof I=="symbol"?I:String(I)}function o(v,I){if(typeof v!="object"||v===null)return v;var A=v[Symbol.toPrimitive];if(A!==void 0){var P=A.call(v,I||"default");if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(v)}var p=endOfStream,m=Symbol("lastResolve"),y=Symbol("lastReject"),c=Symbol("error"),d=Symbol("ended"),l=Symbol("lastPromise"),x=Symbol("handlePromise"),R=Symbol("stream");function N(v,I){return{value:v,done:I}}function O(v){var I=v[m];if(I!==null){var A=v[R].read();A!==null&&(v[l]=null,v[m]=null,v[y]=null,I(N(A,!1)))}}function k(v){process.nextTick(O,v)}function M(v,I){return function(A,P){v.then(function(){if(I[d]){A(N(void 0,!0));return}I[x](A,P)},P)}}var F=Object.getPrototypeOf(function(){}),g=Object.setPrototypeOf((r={get stream(){return this[R]},next:function(){var I=this,A=this[c];if(A!==null)return Promise.reject(A);if(this[d])return Promise.resolve(N(void 0,!0));if(this[R].destroyed)return new Promise(function(D,ee){process.nextTick(function(){I[c]?ee(I[c]):D(N(void 0,!0))})});var P=this[l],G;if(P)G=new Promise(M(P,this));else{var q=this[R].read();if(q!==null)return Promise.resolve(N(q,!1));G=new Promise(this[x])}return this[l]=G,G}},i(r,Symbol.asyncIterator,function(){return this}),i(r,"return",function(){var I=this;return new Promise(function(A,P){I[R].destroy(null,function(G){if(G){P(G);return}A(N(void 0,!0))})})}),r),F),S=function(I){var A,P=Object.create(g,(A={},i(A,R,{value:I,writable:!0}),i(A,m,{value:null,writable:!0}),i(A,y,{value:null,writable:!0}),i(A,c,{value:null,writable:!0}),i(A,d,{value:I._readableState.endEmitted,writable:!0}),i(A,x,{value:function(q,D){var ee=P[R].read();ee?(P[l]=null,P[m]=null,P[y]=null,q(N(ee,!1))):(P[m]=q,P[y]=D)},writable:!0}),A));return P[l]=null,p(I,function(G){if(G&&G.code!=="ERR_STREAM_PREMATURE_CLOSE"){var q=P[y];q!==null&&(P[l]=null,P[m]=null,P[y]=null,q(G)),P[c]=G;return}var D=P[m];D!==null&&(P[l]=null,P[m]=null,P[y]=null,D(N(void 0,!0))),P[d]=!0}),I.on("readable",k.bind(null,P)),P};return async_iterator=S,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=D;var r;D.ReadableState=q,require$$3.EventEmitter;var i=function(u,T){return u.listeners(T).length},a=streamBrowser,o=buffer.Buffer,p=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function m(f){return o.from(f)}function y(f){return o.isBuffer(f)||f instanceof p}var c=require$$3,d;c&&c.debuglog?d=c.debuglog("stream"):d=function(){};var l=requireBuffer_list(),x=destroy_1,R=state,N=R.getHighWaterMark,O=errorsBrowser.codes,k=O.ERR_INVALID_ARG_TYPE,M=O.ERR_STREAM_PUSH_AFTER_EOF,F=O.ERR_METHOD_NOT_IMPLEMENTED,g=O.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,S,v,I;inherits_browserExports(D,a);var A=x.errorOrDestroy,P=["error","close","destroy","pause","resume"];function G(f,u,T){if(typeof f.prependListener=="function")return f.prependListener(u,T);!f._events||!f._events[u]?f.on(u,T):Array.isArray(f._events[u])?f._events[u].unshift(T):f._events[u]=[T,f._events[u]]}function q(f,u,T){r=r||require_stream_duplex(),f=f||{},typeof T!="boolean"&&(T=u instanceof r),this.objectMode=!!f.objectMode,T&&(this.objectMode=this.objectMode||!!f.readableObjectMode),this.highWaterMark=N(this,f,"readableHighWaterMark",T),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=f.emitClose!==!1,this.autoDestroy=!!f.autoDestroy,this.destroyed=!1,this.defaultEncoding=f.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,f.encoding&&(S||(S=requireString_decoder().StringDecoder),this.decoder=new S(f.encoding),this.encoding=f.encoding)}function D(f){if(r=r||require_stream_duplex(),!(this instanceof D))return new D(f);var u=this instanceof r;this._readableState=new q(f,this,u),this.readable=!0,f&&(typeof f.read=="function"&&(this._read=f.read),typeof f.destroy=="function"&&(this._destroy=f.destroy)),a.call(this)}Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(u){this._readableState&&(this._readableState.destroyed=u)}}),D.prototype.destroy=x.destroy,D.prototype._undestroy=x.undestroy,D.prototype._destroy=function(f,u){u(f)},D.prototype.push=function(f,u){var T=this._readableState,C;return T.objectMode?C=!0:typeof f=="string"&&(u=u||T.defaultEncoding,u!==T.encoding&&(f=o.from(f,u),u=""),C=!0),ee(this,f,u,!1,C)},D.prototype.unshift=function(f){return ee(this,f,null,!0,!1)};function ee(f,u,T,C,z){d("readableAddChunk",u);var j=f._readableState;if(u===null)j.reading=!1,ye(f,j);else{var W;if(z||(W=ge(j,u)),W)A(f,W);else if(j.objectMode||u&&u.length>0)if(typeof u!="string"&&!j.objectMode&&Object.getPrototypeOf(u)!==o.prototype&&(u=m(u)),C)j.endEmitted?A(f,new g):oe(f,j,u,!0);else if(j.ended)A(f,new M);else{if(j.destroyed)return!1;j.reading=!1,j.decoder&&!T?(u=j.decoder.write(u),j.objectMode||u.length!==0?oe(f,j,u,!1):ne(f,j)):oe(f,j,u,!1)}else C||(j.reading=!1,ne(f,j))}return!j.ended&&(j.length<j.highWaterMark||j.length===0)}function oe(f,u,T,C){u.flowing&&u.length===0&&!u.sync?(u.awaitDrain=0,f.emit("data",T)):(u.length+=u.objectMode?1:T.length,C?u.buffer.unshift(T):u.buffer.push(T),u.needReadable&&re(f)),ne(f,u)}function ge(f,u){var T;return!y(u)&&typeof u!="string"&&u!==void 0&&!f.objectMode&&(T=new k("chunk",["string","Buffer","Uint8Array"],u)),T}D.prototype.isPaused=function(){return this._readableState.flowing===!1},D.prototype.setEncoding=function(f){S||(S=requireString_decoder().StringDecoder);var u=new S(f);this._readableState.decoder=u,this._readableState.encoding=this._readableState.decoder.encoding;for(var T=this._readableState.buffer.head,C="";T!==null;)C+=u.write(T.data),T=T.next;return this._readableState.buffer.clear(),C!==""&&this._readableState.buffer.push(C),this._readableState.length=C.length,this};var ie=1073741824;function le(f){return f>=ie?f=ie:(f--,f|=f>>>1,f|=f>>>2,f|=f>>>4,f|=f>>>8,f|=f>>>16,f++),f}function se(f,u){return f<=0||u.length===0&&u.ended?0:u.objectMode?1:f!==f?u.flowing&&u.length?u.buffer.head.data.length:u.length:(f>u.highWaterMark&&(u.highWaterMark=le(f)),f<=u.length?f:u.ended?u.length:(u.needReadable=!0,0))}D.prototype.read=function(f){d("read",f),f=parseInt(f,10);var u=this._readableState,T=f;if(f!==0&&(u.emittedReadable=!1),f===0&&u.needReadable&&((u.highWaterMark!==0?u.length>=u.highWaterMark:u.length>0)||u.ended))return d("read: emitReadable",u.length,u.ended),u.length===0&&u.ended?B(this):re(this),null;if(f=se(f,u),f===0&&u.ended)return u.length===0&&B(this),null;var C=u.needReadable;d("need readable",C),(u.length===0||u.length-f<u.highWaterMark)&&(C=!0,d("length less than watermark",C)),u.ended||u.reading?(C=!1,d("reading or ended",C)):C&&(d("do read"),u.reading=!0,u.sync=!0,u.length===0&&(u.needReadable=!0),this._read(u.highWaterMark),u.sync=!1,u.reading||(f=se(T,u)));var z;return f>0?z=w(f,u):z=null,z===null?(u.needReadable=u.length<=u.highWaterMark,f=0):(u.length-=f,u.awaitDrain=0),u.length===0&&(u.ended||(u.needReadable=!0),T!==f&&u.ended&&B(this)),z!==null&&this.emit("data",z),z};function ye(f,u){if(d("onEofChunk"),!u.ended){if(u.decoder){var T=u.decoder.end();T&&T.length&&(u.buffer.push(T),u.length+=u.objectMode?1:T.length)}u.ended=!0,u.sync?re(f):(u.needReadable=!1,u.emittedReadable||(u.emittedReadable=!0,ce(f)))}}function re(f){var u=f._readableState;d("emitReadable",u.needReadable,u.emittedReadable),u.needReadable=!1,u.emittedReadable||(d("emitReadable",u.flowing),u.emittedReadable=!0,process.nextTick(ce,f))}function ce(f){var u=f._readableState;d("emitReadable_",u.destroyed,u.length,u.ended),!u.destroyed&&(u.length||u.ended)&&(f.emit("readable"),u.emittedReadable=!1),u.needReadable=!u.flowing&&!u.ended&&u.length<=u.highWaterMark,b(f)}function ne(f,u){u.readingMore||(u.readingMore=!0,process.nextTick(de,f,u))}function de(f,u){for(;!u.reading&&!u.ended&&(u.length<u.highWaterMark||u.flowing&&u.length===0);){var T=u.length;if(d("maybeReadMore read 0"),f.read(0),T===u.length)break}u.readingMore=!1}D.prototype._read=function(f){A(this,new F("_read()"))},D.prototype.pipe=function(f,u){var T=this,C=this._readableState;switch(C.pipesCount){case 0:C.pipes=f;break;case 1:C.pipes=[C.pipes,f];break;default:C.pipes.push(f);break}C.pipesCount+=1,d("pipe count=%d opts=%j",C.pipesCount,u);var z=(!u||u.end!==!1)&&f!==process.stdout&&f!==process.stderr,j=z?ae:ue;C.endEmitted?process.nextTick(j):T.once("end",j),f.on("unpipe",W);function W(n,e){d("onunpipe"),n===T&&e&&e.hasUnpiped===!1&&(e.hasUnpiped=!0,xe())}function ae(){d("onend"),f.end()}var me=Y(T);f.on("drain",me);var we=!1;function xe(){d("cleanup"),f.removeListener("close",_e),f.removeListener("finish",Z),f.removeListener("drain",me),f.removeListener("error",fe),f.removeListener("unpipe",W),T.removeListener("end",ae),T.removeListener("end",ue),T.removeListener("data",Q),we=!0,C.awaitDrain&&(!f._writableState||f._writableState.needDrain)&&me()}T.on("data",Q);function Q(n){d("ondata");var e=f.write(n);d("dest.write",e),e===!1&&((C.pipesCount===1&&C.pipes===f||C.pipesCount>1&&L(C.pipes,f)!==-1)&&!we&&(d("false write response, pause",C.awaitDrain),C.awaitDrain++),T.pause())}function fe(n){d("onerror",n),ue(),f.removeListener("error",fe),i(f,"error")===0&&A(f,n)}G(f,"error",fe);function _e(){f.removeListener("finish",Z),ue()}f.once("close",_e);function Z(){d("onfinish"),f.removeListener("close",_e),ue()}f.once("finish",Z);function ue(){d("unpipe"),T.unpipe(f)}return f.emit("pipe",T),C.flowing||(d("pipe resume"),T.resume()),f};function Y(f){return function(){var T=f._readableState;d("pipeOnDrain",T.awaitDrain),T.awaitDrain&&T.awaitDrain--,T.awaitDrain===0&&i(f,"data")&&(T.flowing=!0,b(f))}}D.prototype.unpipe=function(f){var u=this._readableState,T={hasUnpiped:!1};if(u.pipesCount===0)return this;if(u.pipesCount===1)return f&&f!==u.pipes?this:(f||(f=u.pipes),u.pipes=null,u.pipesCount=0,u.flowing=!1,f&&f.emit("unpipe",this,T),this);if(!f){var C=u.pipes,z=u.pipesCount;u.pipes=null,u.pipesCount=0,u.flowing=!1;for(var j=0;j<z;j++)C[j].emit("unpipe",this,{hasUnpiped:!1});return this}var W=L(u.pipes,f);return W===-1?this:(u.pipes.splice(W,1),u.pipesCount-=1,u.pipesCount===1&&(u.pipes=u.pipes[0]),f.emit("unpipe",this,T),this)},D.prototype.on=function(f,u){var T=a.prototype.on.call(this,f,u),C=this._readableState;return f==="data"?(C.readableListening=this.listenerCount("readable")>0,C.flowing!==!1&&this.resume()):f==="readable"&&!C.endEmitted&&!C.readableListening&&(C.readableListening=C.needReadable=!0,C.flowing=!1,C.emittedReadable=!1,d("on readable",C.length,C.reading),C.length?re(this):C.reading||process.nextTick(te,this)),T},D.prototype.addListener=D.prototype.on,D.prototype.removeListener=function(f,u){var T=a.prototype.removeListener.call(this,f,u);return f==="readable"&&process.nextTick(J,this),T},D.prototype.removeAllListeners=function(f){var u=a.prototype.removeAllListeners.apply(this,arguments);return(f==="readable"||f===void 0)&&process.nextTick(J,this),u};function J(f){var u=f._readableState;u.readableListening=f.listenerCount("readable")>0,u.resumeScheduled&&!u.paused?u.flowing=!0:f.listenerCount("data")>0&&f.resume()}function te(f){d("readable nexttick read 0"),f.read(0)}D.prototype.resume=function(){var f=this._readableState;return f.flowing||(d("resume"),f.flowing=!f.readableListening,pe(this,f)),f.paused=!1,this};function pe(f,u){u.resumeScheduled||(u.resumeScheduled=!0,process.nextTick(he,f,u))}function he(f,u){d("resume",u.reading),u.reading||f.read(0),u.resumeScheduled=!1,f.emit("resume"),b(f),u.flowing&&!u.reading&&f.read(0)}D.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function b(f){var u=f._readableState;for(d("flow",u.flowing);u.flowing&&f.read()!==null;);}D.prototype.wrap=function(f){var u=this,T=this._readableState,C=!1;f.on("end",function(){if(d("wrapped end"),T.decoder&&!T.ended){var W=T.decoder.end();W&&W.length&&u.push(W)}u.push(null)}),f.on("data",function(W){if(d("wrapped data"),T.decoder&&(W=T.decoder.write(W)),!(T.objectMode&&W==null)&&!(!T.objectMode&&(!W||!W.length))){var ae=u.push(W);ae||(C=!0,f.pause())}});for(var z in f)this[z]===void 0&&typeof f[z]=="function"&&(this[z]=function(ae){return function(){return f[ae].apply(f,arguments)}}(z));for(var j=0;j<P.length;j++)f.on(P[j],this.emit.bind(this,P[j]));return this._read=function(W){d("wrapped _read",W),C&&(C=!1,f.resume())},this},typeof Symbol=="function"&&(D.prototype[Symbol.asyncIterator]=function(){return v===void 0&&(v=requireAsync_iterator()),v(this)}),Object.defineProperty(D.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(D.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(D.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(u){this._readableState&&(this._readableState.flowing=u)}}),D._fromList=w,Object.defineProperty(D.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function w(f,u){if(u.length===0)return null;var T;return u.objectMode?T=u.buffer.shift():!f||f>=u.length?(u.decoder?T=u.buffer.join(""):u.buffer.length===1?T=u.buffer.first():T=u.buffer.concat(u.length),u.buffer.clear()):T=u.buffer.consume(f,u.decoder),T}function B(f){var u=f._readableState;d("endReadable",u.endEmitted),u.endEmitted||(u.ended=!0,process.nextTick(U,u,f))}function U(f,u){if(d("endReadableNT",f.endEmitted,f.length),!f.endEmitted&&f.length===0&&(f.endEmitted=!0,u.readable=!1,u.emit("end"),f.autoDestroy)){var T=u._writableState;(!T||T.autoDestroy&&T.finished)&&u.destroy()}}typeof Symbol=="function"&&(D.from=function(f,u){return I===void 0&&(I=requireFromBrowser()),I(D,f,u)});function L(f,u){for(var T=0,C=f.length;T<C;T++)if(f[T]===u)return T;return-1}return _stream_readable}var _stream_transform=Transform$1,_require$codes$1=errorsBrowser.codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes$1.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes$1.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes$1.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes$1.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=require_stream_duplex();inherits_browserExports(Transform$1,Duplex);function afterTransform(r,i){var a=this._transformState;a.transforming=!1;var o=a.writecb;if(o===null)return this.emit("error",new ERR_MULTIPLE_CALLBACK);a.writechunk=null,a.writecb=null,i!=null&&this.push(i),o(r);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function Transform$1(r){if(!(this instanceof Transform$1))return new Transform$1(r);Duplex.call(this,r),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",prefinish)}function prefinish(){var r=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(i,a){done(r,i,a)}):done(this,null,null)}Transform$1.prototype.push=function(r,i){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,r,i)};Transform$1.prototype._transform=function(r,i,a){a(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))};Transform$1.prototype._write=function(r,i,a){var o=this._transformState;if(o.writecb=a,o.writechunk=r,o.writeencoding=i,!o.transforming){var p=this._readableState;(o.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}};Transform$1.prototype._read=function(r){var i=this._transformState;i.writechunk!==null&&!i.transforming?(i.transforming=!0,this._transform(i.writechunk,i.writeencoding,i.afterTransform)):i.needTransform=!0};Transform$1.prototype._destroy=function(r,i){Duplex.prototype._destroy.call(this,r,function(a){i(a)})};function done(r,i,a){if(i)return r.emit("error",i);if(a!=null&&r.push(a),r._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(r._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return r.push(null)}var _stream_passthrough=PassThrough,Transform=_stream_transform;inherits_browserExports(PassThrough,Transform);function PassThrough(r){if(!(this instanceof PassThrough))return new PassThrough(r);Transform.call(this,r)}PassThrough.prototype._transform=function(r,i,a){a(null,r)};var eos;function once(r){var i=!1;return function(){i||(i=!0,r.apply(void 0,arguments))}}var _require$codes=errorsBrowser.codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(r){if(r)throw r}function isRequest(r){return r.setHeader&&typeof r.abort=="function"}function destroyer(r,i,a,o){o=once(o);var p=!1;r.on("close",function(){p=!0}),eos===void 0&&(eos=endOfStream),eos(r,{readable:i,writable:a},function(y){if(y)return o(y);p=!0,o()});var m=!1;return function(y){if(!p&&!m){if(m=!0,isRequest(r))return r.abort();if(typeof r.destroy=="function")return r.destroy();o(y||new ERR_STREAM_DESTROYED("pipe"))}}}function call(r){r()}function pipe(r,i){return r.pipe(i)}function popCallback(r){return!r.length||typeof r[r.length-1]!="function"?noop:r.pop()}function pipeline(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=popCallback(i);if(Array.isArray(i[0])&&(i=i[0]),i.length<2)throw new ERR_MISSING_ARGS("streams");var p,m=i.map(function(y,c){var d=c<i.length-1,l=c>0;return destroyer(y,d,l,function(x){p||(p=x),x&&m.forEach(call),!d&&(m.forEach(call),o(p))})});return i.reduce(pipe)}var pipeline_1=pipeline;(function(r,i){i=r.exports=require_stream_readable(),i.Stream=i,i.Readable=i,i.Writable=require_stream_writable(),i.Duplex=require_stream_duplex(),i.Transform=_stream_transform,i.PassThrough=_stream_passthrough,i.finished=endOfStream,i.pipeline=pipeline_1})(readableBrowser,readableBrowser.exports);var readableBrowserExports=readableBrowser.exports;Object.defineProperty(lib$2,"__esModule",{value:!0});lib$2.ReadableWebToNodeStream=void 0;const readable_stream_1=readableBrowserExports;class ReadableWebToNodeStream extends readable_stream_1.Readable{constructor(i){super(),this.bytesRead=0,this.released=!1,this.reader=i.getReader()}async _read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read();const i=await this.pendingRead;delete this.pendingRead,i.done||this.released?this.push(null):(this.bytesRead+=i.value.length,this.push(i.value))}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}lib$2.ReadableWebToNodeStream=ReadableWebToNodeStream;var lib$1={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.AnsiStringType=r.StringType=r.BufferType=r.Uint8ArrayType=r.IgnoreType=r.Float80_LE=r.Float80_BE=r.Float64_LE=r.Float64_BE=r.Float32_LE=r.Float32_BE=r.Float16_LE=r.Float16_BE=r.INT64_BE=r.UINT64_BE=r.INT64_LE=r.UINT64_LE=r.INT32_LE=r.INT32_BE=r.INT24_BE=r.INT24_LE=r.INT16_LE=r.INT16_BE=r.INT8=r.UINT32_BE=r.UINT32_LE=r.UINT24_BE=r.UINT24_LE=r.UINT16_BE=r.UINT16_LE=r.UINT8=void 0;const i=ieee754;function a(d){return new DataView(d.buffer,d.byteOffset)}r.UINT8={len:1,get(d,l){return a(d).getUint8(l)},put(d,l,x){return a(d).setUint8(l,x),l+1}},r.UINT16_LE={len:2,get(d,l){return a(d).getUint16(l,!0)},put(d,l,x){return a(d).setUint16(l,x,!0),l+2}},r.UINT16_BE={len:2,get(d,l){return a(d).getUint16(l)},put(d,l,x){return a(d).setUint16(l,x),l+2}},r.UINT24_LE={len:3,get(d,l){const x=a(d);return x.getUint8(l)+(x.getUint16(l+1,!0)<<8)},put(d,l,x){const R=a(d);return R.setUint8(l,x&255),R.setUint16(l+1,x>>8,!0),l+3}},r.UINT24_BE={len:3,get(d,l){const x=a(d);return(x.getUint16(l)<<8)+x.getUint8(l+2)},put(d,l,x){const R=a(d);return R.setUint16(l,x>>8),R.setUint8(l+2,x&255),l+3}},r.UINT32_LE={len:4,get(d,l){return a(d).getUint32(l,!0)},put(d,l,x){return a(d).setUint32(l,x,!0),l+4}},r.UINT32_BE={len:4,get(d,l){return a(d).getUint32(l)},put(d,l,x){return a(d).setUint32(l,x),l+4}},r.INT8={len:1,get(d,l){return a(d).getInt8(l)},put(d,l,x){return a(d).setInt8(l,x),l+1}},r.INT16_BE={len:2,get(d,l){return a(d).getInt16(l)},put(d,l,x){return a(d).setInt16(l,x),l+2}},r.INT16_LE={len:2,get(d,l){return a(d).getInt16(l,!0)},put(d,l,x){return a(d).setInt16(l,x,!0),l+2}},r.INT24_LE={len:3,get(d,l){const x=r.UINT24_LE.get(d,l);return x>8388607?x-16777216:x},put(d,l,x){const R=a(d);return R.setUint8(l,x&255),R.setUint16(l+1,x>>8,!0),l+3}},r.INT24_BE={len:3,get(d,l){const x=r.UINT24_BE.get(d,l);return x>8388607?x-16777216:x},put(d,l,x){const R=a(d);return R.setUint16(l,x>>8),R.setUint8(l+2,x&255),l+3}},r.INT32_BE={len:4,get(d,l){return a(d).getInt32(l)},put(d,l,x){return a(d).setInt32(l,x),l+4}},r.INT32_LE={len:4,get(d,l){return a(d).getInt32(l,!0)},put(d,l,x){return a(d).setInt32(l,x,!0),l+4}},r.UINT64_LE={len:8,get(d,l){return a(d).getBigUint64(l,!0)},put(d,l,x){return a(d).setBigUint64(l,x,!0),l+8}},r.INT64_LE={len:8,get(d,l){return a(d).getBigInt64(l,!0)},put(d,l,x){return a(d).setBigInt64(l,x,!0),l+8}},r.UINT64_BE={len:8,get(d,l){return a(d).getBigUint64(l)},put(d,l,x){return a(d).setBigUint64(l,x),l+8}},r.INT64_BE={len:8,get(d,l){return a(d).getBigInt64(l)},put(d,l,x){return a(d).setBigInt64(l,x),l+8}},r.Float16_BE={len:2,get(d,l){return i.read(d,l,!1,10,this.len)},put(d,l,x){return i.write(d,x,l,!1,10,this.len),l+this.len}},r.Float16_LE={len:2,get(d,l){return i.read(d,l,!0,10,this.len)},put(d,l,x){return i.write(d,x,l,!0,10,this.len),l+this.len}},r.Float32_BE={len:4,get(d,l){return a(d).getFloat32(l)},put(d,l,x){return a(d).setFloat32(l,x),l+4}},r.Float32_LE={len:4,get(d,l){return a(d).getFloat32(l,!0)},put(d,l,x){return a(d).setFloat32(l,x,!0),l+4}},r.Float64_BE={len:8,get(d,l){return a(d).getFloat64(l)},put(d,l,x){return a(d).setFloat64(l,x),l+8}},r.Float64_LE={len:8,get(d,l){return a(d).getFloat64(l,!0)},put(d,l,x){return a(d).setFloat64(l,x,!0),l+8}},r.Float80_BE={len:10,get(d,l){return i.read(d,l,!1,63,this.len)},put(d,l,x){return i.write(d,x,l,!1,63,this.len),l+this.len}},r.Float80_LE={len:10,get(d,l){return i.read(d,l,!0,63,this.len)},put(d,l,x){return i.write(d,x,l,!0,63,this.len),l+this.len}};class o{constructor(l){this.len=l}get(l,x){}}r.IgnoreType=o;class p{constructor(l){this.len=l}get(l,x){return l.subarray(x,x+this.len)}}r.Uint8ArrayType=p;class m{constructor(l){this.len=l}get(l,x){return Buffer.from(l.subarray(x,x+this.len))}}r.BufferType=m;class y{constructor(l,x){this.len=l,this.encoding=x}get(l,x){return Buffer.from(l).toString(this.encoding,x,x+this.len)}}r.StringType=y;class c{constructor(l){this.len=l}static decode(l,x,R){let N="";for(let O=x;O<R;++O)N+=c.codePointToString(c.singleByteDecoder(l[O]));return N}static inRange(l,x,R){return x<=l&&l<=R}static codePointToString(l){return l<=65535?String.fromCharCode(l):(l-=65536,String.fromCharCode((l>>10)+55296,(l&1023)+56320))}static singleByteDecoder(l){if(c.inRange(l,0,127))return l;const x=c.windows1252[l-128];if(x===null)throw Error("invaliding encoding");return x}get(l,x=0){return c.decode(l,x,x+this.len)}}r.AnsiStringType=c,c.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]})(lib$1);var core$1={},ReadStreamTokenizer$1={},AbstractTokenizer$1={},lib={},EndOfFileStream={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.EndOfStreamError=r.defaultMessages=void 0,r.defaultMessages="End-Of-Stream";class i extends Error{constructor(){super(r.defaultMessages)}}r.EndOfStreamError=i})(EndOfFileStream);var StreamReader={},Deferred$1={};Object.defineProperty(Deferred$1,"__esModule",{value:!0});Deferred$1.Deferred=void 0;class Deferred{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((i,a)=>{this.reject=a,this.resolve=i})}}Deferred$1.Deferred=Deferred;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.StreamReader=r.EndOfStreamError=void 0;const i=EndOfFileStream,a=Deferred$1;var o=EndOfFileStream;Object.defineProperty(r,"EndOfStreamError",{enumerable:!0,get:function(){return o.EndOfStreamError}});const p=1*1024*1024;class m{constructor(c){if(this.s=c,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!c.read||!c.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new i.EndOfStreamError)),this.s.once("error",d=>this.reject(d)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(c,d,l){const x=await this.read(c,d,l);return this.peekQueue.push(c.subarray(d,d+x)),x}async read(c,d,l){if(l===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new i.EndOfStreamError;let x=l,R=0;for(;this.peekQueue.length>0&&x>0;){const N=this.peekQueue.pop();if(!N)throw new Error("peekData should be defined");const O=Math.min(N.length,x);c.set(N.subarray(0,O),d+R),R+=O,x-=O,O<N.length&&this.peekQueue.push(N.subarray(O))}for(;x>0&&!this.endOfStream;){const N=Math.min(x,p),O=await this.readFromStream(c,d+R,N);if(R+=O,O<N)break;x-=O}return R}async readFromStream(c,d,l){const x=this.s.read(l);if(x)return c.set(x,d),x.length;{const R={buffer:c,offset:d,length:l,deferred:new a.Deferred};return this.deferred=R.deferred,this.s.once("readable",()=>{this.readDeferred(R)}),R.deferred.promise}}readDeferred(c){const d=this.s.read(c.length);d?(c.buffer.set(d,c.offset),c.deferred.resolve(d.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(c)})}reject(c){this.endOfStream=!0,this.deferred&&(this.deferred.reject(c),this.deferred=null)}}r.StreamReader=m})(StreamReader);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.StreamReader=r.EndOfStreamError=void 0;var i=EndOfFileStream;Object.defineProperty(r,"EndOfStreamError",{enumerable:!0,get:function(){return i.EndOfStreamError}});var a=StreamReader;Object.defineProperty(r,"StreamReader",{enumerable:!0,get:function(){return a.StreamReader}})})(lib);Object.defineProperty(AbstractTokenizer$1,"__esModule",{value:!0});AbstractTokenizer$1.AbstractTokenizer=void 0;const peek_readable_1$2=lib;class AbstractTokenizer{constructor(i){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=i||{}}async readToken(i,a=this.position){const o=Buffer.alloc(i.len);if(await this.readBuffer(o,{position:a})<i.len)throw new peek_readable_1$2.EndOfStreamError;return i.get(o,0)}async peekToken(i,a=this.position){const o=Buffer.alloc(i.len);if(await this.peekBuffer(o,{position:a})<i.len)throw new peek_readable_1$2.EndOfStreamError;return i.get(o,0)}async readNumber(i){if(await this.readBuffer(this.numBuffer,{length:i.len})<i.len)throw new peek_readable_1$2.EndOfStreamError;return i.get(this.numBuffer,0)}async peekNumber(i){if(await this.peekBuffer(this.numBuffer,{length:i.len})<i.len)throw new peek_readable_1$2.EndOfStreamError;return i.get(this.numBuffer,0)}async ignore(i){if(this.fileInfo.size!==void 0){const a=this.fileInfo.size-this.position;if(i>a)return this.position+=a,a}return this.position+=i,i}async close(){}normalizeOptions(i,a){if(a&&a.position!==void 0&&a.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return a?{mayBeLess:a.mayBeLess===!0,offset:a.offset?a.offset:0,length:a.length?a.length:i.length-(a.offset?a.offset:0),position:a.position?a.position:this.position}:{mayBeLess:!1,offset:0,length:i.length,position:this.position}}}AbstractTokenizer$1.AbstractTokenizer=AbstractTokenizer;Object.defineProperty(ReadStreamTokenizer$1,"__esModule",{value:!0});ReadStreamTokenizer$1.ReadStreamTokenizer=void 0;const AbstractTokenizer_1$1=AbstractTokenizer$1,peek_readable_1$1=lib,maxBufferSize=256e3;class ReadStreamTokenizer extends AbstractTokenizer_1$1.AbstractTokenizer{constructor(i,a){super(a),this.streamReader=new peek_readable_1$1.StreamReader(i)}async getFileInfo(){return this.fileInfo}async readBuffer(i,a){const o=this.normalizeOptions(i,a),p=o.position-this.position;if(p>0)return await this.ignore(p),this.readBuffer(i,a);if(p<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(o.length===0)return 0;const m=await this.streamReader.read(i,o.offset,o.length);if(this.position+=m,(!a||!a.mayBeLess)&&m<o.length)throw new peek_readable_1$1.EndOfStreamError;return m}async peekBuffer(i,a){const o=this.normalizeOptions(i,a);let p=0;if(o.position){const m=o.position-this.position;if(m>0){const y=new Uint8Array(o.length+m);return p=await this.peekBuffer(y,{mayBeLess:o.mayBeLess}),i.set(y.subarray(m),o.offset),p-m}else if(m<0)throw new Error("Cannot peek from a negative offset in a stream")}if(o.length>0){try{p=await this.streamReader.peek(i,o.offset,o.length)}catch(m){if(a&&a.mayBeLess&&m instanceof peek_readable_1$1.EndOfStreamError)return 0;throw m}if(!o.mayBeLess&&p<o.length)throw new peek_readable_1$1.EndOfStreamError}return p}async ignore(i){const a=Math.min(maxBufferSize,i),o=new Uint8Array(a);let p=0;for(;p<i;){const m=i-p,y=await this.readBuffer(o,{length:Math.min(a,m)});if(y<0)return y;p+=y}return p}}ReadStreamTokenizer$1.ReadStreamTokenizer=ReadStreamTokenizer;var BufferTokenizer$1={};Object.defineProperty(BufferTokenizer$1,"__esModule",{value:!0});BufferTokenizer$1.BufferTokenizer=void 0;const peek_readable_1=lib,AbstractTokenizer_1=AbstractTokenizer$1;class BufferTokenizer extends AbstractTokenizer_1.AbstractTokenizer{constructor(i,a){super(a),this.uint8Array=i,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:i.length}async readBuffer(i,a){if(a&&a.position){if(a.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=a.position}const o=await this.peekBuffer(i,a);return this.position+=o,o}async peekBuffer(i,a){const o=this.normalizeOptions(i,a),p=Math.min(this.uint8Array.length-o.position,o.length);if(!o.mayBeLess&&p<o.length)throw new peek_readable_1.EndOfStreamError;return i.set(this.uint8Array.subarray(o.position,o.position+p),o.offset),p}async close(){}}BufferTokenizer$1.BufferTokenizer=BufferTokenizer;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.fromBuffer=r.fromStream=r.EndOfStreamError=void 0;const i=ReadStreamTokenizer$1,a=BufferTokenizer$1;var o=lib;Object.defineProperty(r,"EndOfStreamError",{enumerable:!0,get:function(){return o.EndOfStreamError}});function p(y,c){return c=c||{},new i.ReadStreamTokenizer(y,c)}r.fromStream=p;function m(y,c){return new a.BufferTokenizer(y,c)}r.fromBuffer=m})(core$1);var util={};util.stringToBytes=r=>[...r].map(i=>i.charCodeAt(0));util.tarHeaderChecksumMatches=(r,i=0)=>{const a=parseInt(r.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(a))return!1;let o=8*32;for(let p=i;p<i+148;p++)o+=r[p];for(let p=i+156;p<i+512;p++)o+=r[p];return a===o};util.uint32SyncSafeToken={get:(r,i)=>r[i+3]&127|r[i+2]<<7|r[i+1]<<14|r[i]<<21,len:4};var supported$1={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]};const Token=lib$1,strtok3=core$1,{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=util,supported=supported$1,minimumBytes=4100;async function fromStream(r){const i=await strtok3.fromStream(r);try{return await fromTokenizer(i)}finally{await i.close()}}async function fromBuffer(r){if(!(r instanceof Uint8Array||r instanceof ArrayBuffer||Buffer.isBuffer(r)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof r}\``);const i=r instanceof Buffer?r:Buffer.from(r);if(!(i&&i.length>1))return;const a=strtok3.fromBuffer(i);return fromTokenizer(a)}function _check(r,i,a){a={offset:0,...a};for(const[o,p]of i.entries())if(a.mask){if(p!==(a.mask[o]&r[o+a.offset]))return!1}else if(p!==r[o+a.offset])return!1;return!0}async function fromTokenizer(r){try{return _fromTokenizer(r)}catch(i){if(!(i instanceof strtok3.EndOfStreamError))throw i}}async function _fromTokenizer(r){let i=Buffer.alloc(minimumBytes);const a=12,o=(m,y)=>_check(i,m,y),p=(m,y)=>o(stringToBytes(m),y);if(r.fileInfo.size||(r.fileInfo.size=Number.MAX_SAFE_INTEGER),await r.peekBuffer(i,{length:a,mayBeLess:!0}),o([66,77]))return{ext:"bmp",mime:"image/bmp"};if(o([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(o([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(o([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(o([37,33]))return await r.peekBuffer(i,{length:24,mayBeLess:!0}),p("PS-Adobe-",{offset:2})&&p(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(o([31,160])||o([31,157]))return{ext:"Z",mime:"application/x-compress"};if(o([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(o([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(o([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(o([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(p("ID3")){await r.ignore(6);const m=await r.readToken(uint32SyncSafeToken);return r.position+m>r.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await r.ignore(m),fromTokenizer(r))}if(p("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((i[0]===67||i[0]===70)&&o([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(o([71,73,70]))return{ext:"gif",mime:"image/gif"};if(p("FLIF"))return{ext:"flif",mime:"image/flif"};if(p("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(p("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(p("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(p("FORM"))return{ext:"aif",mime:"audio/aiff"};if(p("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(o([80,75,3,4])){try{for(;r.position+30<r.fileInfo.size;){await r.readBuffer(i,{length:30});const m={compressedSize:i.readUInt32LE(18),uncompressedSize:i.readUInt32LE(22),filenameLength:i.readUInt16LE(26),extraFieldLength:i.readUInt16LE(28)};if(m.filename=await r.readToken(new Token.StringType(m.filenameLength,"utf-8")),await r.ignore(m.extraFieldLength),m.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(m.filename.endsWith(".rels")||m.filename.endsWith(".xml"))switch(m.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(m.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(m.filename.startsWith("3D/")&&m.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(m.filename==="mimetype"&&m.compressedSize===m.uncompressedSize)switch(await r.readToken(new Token.StringType(m.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(m.compressedSize===0){let y=-1;for(;y<0&&r.position<r.fileInfo.size;)await r.peekBuffer(i,{mayBeLess:!0}),y=i.indexOf("504B0304",0,"hex"),await r.ignore(y>=0?y:i.length)}else await r.ignore(m.compressedSize)}}catch(m){if(!(m instanceof strtok3.EndOfStreamError))throw m}return{ext:"zip",mime:"application/zip"}}if(p("OggS")){await r.ignore(28);const m=Buffer.alloc(8);return await r.readBuffer(m),_check(m,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(m,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(m,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(m,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(m,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(m,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(o([80,75])&&(i[2]===3||i[2]===5||i[2]===7)&&(i[3]===4||i[3]===6||i[3]===8))return{ext:"zip",mime:"application/zip"};if(p("ftyp",{offset:4})&&i[8]&96){const m=i.toString("binary",8,12).replace("\0"," ").trim();switch(m){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return m.startsWith("3g")?m.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(p("MThd"))return{ext:"mid",mime:"audio/midi"};if(p("wOFF")&&(o([0,1,0,0],{offset:4})||p("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(p("wOF2")&&(o([0,1,0,0],{offset:4})||p("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(o([212,195,178,161])||o([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(p("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(p("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(p("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(o([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(p("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(p("%PDF")){await r.ignore(1350);const m=10*1024*1024,y=Buffer.alloc(Math.min(m,r.fileInfo.size));return await r.readBuffer(y,{mayBeLess:!0}),y.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(o([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(o([73,73,42,0]))return p("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:o([28,0,254,0],{offset:8})||o([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:o([8,0,0,0],{offset:4})&&(o([45,0,254,0],{offset:8})||o([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(i=Buffer.alloc(24),await r.peekBuffer(i),(o([16,251,134,1],{offset:4})||o([8,0,0,0],{offset:4}))&&o([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(o([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(p("MAC "))return{ext:"ape",mime:"audio/ape"};if(o([26,69,223,163])){async function m(){const x=await r.peekNumber(Token.UINT8);let R=128,N=0;for(;!(x&R)&&R!==0;)++N,R>>=1;const O=Buffer.alloc(N+1);return await r.readBuffer(O),O}async function y(){const x=await m(),R=await m();R[0]^=128>>R.length-1;const N=Math.min(6,R.length);return{id:x.readUIntBE(0,x.length),len:R.readUIntBE(R.length-N,N)}}async function c(x,R){for(;R>0;){const N=await y();if(N.id===17026)return r.readToken(new Token.StringType(N.len,"utf-8"));await r.ignore(N.len),--R}}const d=await y();switch(await c(1,d.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(o([82,73,70,70])){if(o([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(o([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(o([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(p("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(o([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(p("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(p("MSCF")||p("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(o([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(o([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(o([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(o([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(p("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(p("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(o([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(p("IMPM"))return{ext:"it",mime:"audio/x-it"};if(p("-lh0-",{offset:2})||p("-lh1-",{offset:2})||p("-lh2-",{offset:2})||p("-lh3-",{offset:2})||p("-lh4-",{offset:2})||p("-lh5-",{offset:2})||p("-lh6-",{offset:2})||p("-lh7-",{offset:2})||p("-lzs-",{offset:2})||p("-lz4-",{offset:2})||p("-lz5-",{offset:2})||p("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(o([0,0,1,186])){if(o([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(o([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(p("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(o([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(p("<?xml "))return{ext:"xml",mime:"application/xml"};if(o([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(o([82,97,114,33,26,7])&&(i[6]===0||i[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(p("solid "))return{ext:"stl",mime:"model/stl"};if(p("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(p("!<arch>"))return await r.ignore(8),await r.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(o([137,80,78,71,13,10,26,10])){await r.ignore(8);async function m(){return{length:await r.readToken(Token.INT32_BE),type:await r.readToken(new Token.StringType(4,"binary"))}}do{const y=await m();if(y.length<0)return;switch(y.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await r.ignore(y.length+4)}}while(r.position+8<r.fileInfo.size);return{ext:"png",mime:"image/png"}}if(o([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(o([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(o([102,114,101,101],{offset:4})||o([109,100,97,116],{offset:4})||o([109,111,111,118],{offset:4})||o([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(o([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(p("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(o([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(o([48,38,178,117,142,102,207,17,166,217])){async function m(){const y=Buffer.alloc(16);return await r.readBuffer(y),{id:y,size:Number(await r.readToken(Token.UINT64_LE))}}for(await r.ignore(30);r.position+24<r.fileInfo.size;){const y=await m();let c=y.size-24;if(_check(y.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const d=Buffer.alloc(16);if(c-=await r.readBuffer(d),_check(d,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(d,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await r.ignore(c)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(o([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((o([126,16,4])||o([126,24,4]))&&o([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(o([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(o([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await r.ignore(20),await r.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(o([255,10])||o([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(o([0,0,1,186])||o([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(o([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(o([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(o([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(o([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await r.peekBuffer(i,{length:Math.min(256,r.fileInfo.size),mayBeLess:!0}),p("BEGIN:")){if(p("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(p("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(p("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(p("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(p("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(o([4,0,0,0])&&i.length>=16){const m=i.readUInt32LE(12);if(m>12&&i.length>=m+16)try{const y=i.slice(16,m+16).toString();if(JSON.parse(y).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(o([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(p("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(o([71],{offset:4})&&(o([71],{offset:192})||o([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(o([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(o([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(o([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(o([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(o([76,80],{offset:34})&&(o([0,0,1],{offset:8})||o([1,0,2],{offset:8})||o([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(o([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await r.peekBuffer(i,{length:Math.min(512,r.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(i))return{ext:"tar",mime:"application/x-tar"};if(o([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(p("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(i.length>=2&&o([255,224],{offset:0,mask:[255,224]})){if(o([16],{offset:1,mask:[22]}))return o([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(o([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(o([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(o([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const r=new stream.PassThrough;let i;stream.pipeline?i=stream.pipeline(readableStream,r,()=>{}):i=readableStream.pipe(r);const a=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const o=await fromBuffer(a);r.fileType=o}catch(o){reject(o)}resolve(i)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream};Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}});Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}});var core=fileType;(function(r){const{ReadableWebToNodeStream:i}=lib$2,a=core;async function o(y){const c=new i(y),d=await a.fromStream(c);return await c.close(),d}async function p(y){const c=await m(y);return a.fromBuffer(Buffer.from(c))}function m(y){return y.arrayBuffer?y.arrayBuffer():new Promise((c,d)=>{const l=new FileReader;l.addEventListener("loadend",x=>{c(x.target.result)}),l.addEventListener("error",x=>{d(new Error(x.message))}),l.addEventListener("abort",x=>{d(new Error(x.type))}),l.readAsArrayBuffer(y)})}Object.assign(r.exports,a,{fromStream:o,fromBlob:p})})(browser$1);var browserExports=browser$1.exports;const FileType=getDefaultExportFromCjs(browserExports);window.Buffer=window.Buffer||buffer.Buffer;const network=getNetwork(),contractInfo=getContractInfo(),ContractHelper={async resolveSTX10InfoByTick(r){if(!r)return;const i=[stringAsciiCV(r)],a={contractAddress:contractInfo.defaultContractAddress,contractName:contractInfo.inscriptionsContract.name,functionName:"get_stx10_info_by_tick",functionArgs:i,network,senderAddress:contractInfo.defaultContractAddress},o=await callReadOnlyFunction(a);if(!cvToValue(o.data.attr))return{block:0,tokenId:0,max:0,lim:0,supply:0};const m=o.data.attr.value.data;return{block:cvToValue(m.block),tokenId:cvToValue(m.tokenId),max:cvToValue(m.max),lim:cvToValue(m.lim),supply:cvToValue(o.data.supply)}},async loadSTX10Balance(r,i){if(!r||!i)return;const a=[stringAsciiCV(r),Utils.parseAddress(i)],o={contractAddress:contractInfo.defaultContractAddress,contractName:contractInfo.inscriptionsContract.name,functionName:"get_stx10_balance",functionArgs:a,network,senderAddress:contractInfo.defaultContractAddress},p=await callReadOnlyFunction(o);return cvToValue(p)},async loadSummary(){const r=[],i={contractAddress:contractInfo.defaultContractAddress,contractName:contractInfo.inscriptionsContract.name,functionName:"get_summary",functionArgs:r,network,senderAddress:contractInfo.defaultContractAddress},a=await callReadOnlyFunction(i);return{last_token_id:cvToValue(a.data.last_token_id),last_stx10_tick_index:cvToValue(a.data.last_stx10_tick_index)}},async queryNFTOwner(r){if(!r)return;const i=[uintCV(r)],a={contractAddress:contractInfo.defaultContractAddress,contractName:contractInfo.inscriptionsContract.name,functionName:"get-owner",functionArgs:i,network,senderAddress:contractInfo.defaultContractAddress},o=await callReadOnlyFunction(a),p=cvToValue(o);return p.value?p.value.value:null},async queryTickList(r){if(!r)return;let i=listCV();i.list=[];for(const c of r)i.list.push(uintCV(c));const a=[i],o={contractAddress:contractInfo.defaultContractAddress,contractName:contractInfo.inscriptionsContract.name,functionName:"get_stx10_infos_by_index_list",functionArgs:a,network,senderAddress:contractInfo.defaultContractAddress},p=await callReadOnlyFunction(o),m=cvToValue(p);let y=[];for(const c of m){const d=c.value;if(d.attr.value){const l=d.attr.value.value;y.push({tick:d.tick.value,supply:BigInt(d.supply.value),block:parseInt(l.block.value),lim:BigInt(l.lim.value),max:BigInt(l.max.value),tokenId:BigInt(l.tokenId.value)})}else break}return y},async queryWrapSummary(r,i){const a=[standardPrincipalCV(i)],o={contractAddress:contractInfo.defaultWrapperContractAddress,contractName:"W"+r.toLowerCase(),functionName:"get_summary",functionArgs:a,network,senderAddress:contractInfo.defaultWrapperContractAddress};try{const p=await callReadOnlyFunction(o),m=cvToValue(p);return{tickInfo:m.info.value.attr.value,stx10Balance:BigInt(m.stx10_balance.value),sip10Balance:BigInt(m.sip10_balance.value)}}catch{return{tickInfo:null,sip10Balance:0n,stx10Balance:0n}}},async queryIndexer(r){if(!r||r.length<=0||r.length>25)return;const i=new TextEncoder;let a=listCV();a.list=[];for(const c of r)a.list.push(bufferCV(i.encode(c)));const o=[a],p={contractAddress:contractInfo.indexerContract.address,contractName:contractInfo.indexerContract.name,functionName:"find_token_ids",functionArgs:o,network,senderAddress:contractInfo.defaultContractAddress},m=await callReadOnlyFunction(p);let y=[];for(let c=0;c<m.list.length;c++){const d=cvToValue(m.list[c]);y.push({content:r[c],tokenId:d?parseInt(d.value):0})}return y}};export{ContractHelper as C,FileType as F,makeStandardFungiblePostCondition as a,buffer as b,cvToValue as c,callReadOnlyFunction as d,makeContractSTXPostCondition as e,makeStandardNonFungiblePostCondition as f,makeStandardSTXPostCondition as m};
