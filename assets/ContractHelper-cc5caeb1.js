import{O as ClarityType,P as principalToString,Q as bytesToHex,R as utf8ToBytes,S as asciiToBytes,T as parsePrincipalString,V as StacksMessageType,W as PostConditionType,X as intToBigInt,Y as parseAssetInfoString,Z as createStandardPrincipal,$ as StacksMainnet,a0 as StacksNetwork,j as cvToHex,a1 as parseReadOnlyResponse,a2 as base64Js,a3 as require$$3,J as commonjsGlobal,I as getDefaultExportFromCjs,B as stringAsciiCV,K as standardPrincipalCV,u as uintCV,a4 as listCV,s as getNetwork,v as getContractInfo}from"./index-3ecd2ce4.js";function cvToValue(r,n=!1){switch(r.type){case ClarityType.BoolTrue:return!0;case ClarityType.BoolFalse:return!1;case ClarityType.Int:case ClarityType.UInt:return n?r.value.toString():r.value;case ClarityType.Buffer:return`0x${bytesToHex(r.buffer)}`;case ClarityType.OptionalNone:return null;case ClarityType.OptionalSome:return cvToJSON(r.value);case ClarityType.ResponseErr:return cvToJSON(r.value);case ClarityType.ResponseOk:return cvToJSON(r.value);case ClarityType.PrincipalStandard:case ClarityType.PrincipalContract:return principalToString(r);case ClarityType.List:return r.list.map(s=>cvToJSON(s));case ClarityType.Tuple:const a={};return Object.keys(r.data).forEach(s=>{a[s]=cvToJSON(r.data[s])}),a;case ClarityType.StringASCII:return r.data;case ClarityType.StringUTF8:return r.data}}function cvToJSON(r){switch(r.type){case ClarityType.ResponseErr:return{type:getCVTypeString(r),value:cvToValue(r,!0),success:!1};case ClarityType.ResponseOk:return{type:getCVTypeString(r),value:cvToValue(r,!0),success:!0};default:return{type:getCVTypeString(r),value:cvToValue(r,!0)}}}function getCVTypeString(r){switch(r.type){case ClarityType.BoolTrue:case ClarityType.BoolFalse:return"bool";case ClarityType.Int:return"int";case ClarityType.UInt:return"uint";case ClarityType.Buffer:return`(buff ${r.buffer.length})`;case ClarityType.OptionalNone:return"(optional none)";case ClarityType.OptionalSome:return`(optional ${getCVTypeString(r.value)})`;case ClarityType.ResponseErr:return`(response UnknownType ${getCVTypeString(r.value)})`;case ClarityType.ResponseOk:return`(response ${getCVTypeString(r.value)} UnknownType)`;case ClarityType.PrincipalStandard:case ClarityType.PrincipalContract:return"principal";case ClarityType.List:return`(list ${r.list.length} ${r.list.length?getCVTypeString(r.list[0]):"UnknownType"})`;case ClarityType.Tuple:return`(tuple ${Object.keys(r.data).map(n=>`(${n} ${getCVTypeString(r.data[n])})`).join(" ")})`;case ClarityType.StringASCII:return`(string-ascii ${asciiToBytes(r.data).length})`;case ClarityType.StringUTF8:return`(string-utf8 ${utf8ToBytes(r.data).length})`}}function createSTXPostCondition(r,n,a){return typeof r=="string"&&(r=parsePrincipalString(r)),{type:StacksMessageType.PostCondition,conditionType:PostConditionType.STX,principal:r,conditionCode:n,amount:intToBigInt(a,!1)}}function createNonFungiblePostCondition(r,n,a,s){return typeof r=="string"&&(r=parsePrincipalString(r)),typeof a=="string"&&(a=parseAssetInfoString(a)),{type:StacksMessageType.PostCondition,conditionType:PostConditionType.NonFungible,principal:r,conditionCode:n,assetInfo:a,assetName:s}}function makeStandardSTXPostCondition(r,n,a){return createSTXPostCondition(createStandardPrincipal(r),n,a)}function makeStandardNonFungiblePostCondition(r,n,a,s){return createNonFungiblePostCondition(createStandardPrincipal(r),n,a,s)}async function callReadOnlyFunction(r){const n={network:new StacksMainnet},a=Object.assign(n,r),{contractName:s,contractAddress:p,functionName:g,functionArgs:y,senderAddress:c}=a,d=StacksNetwork.fromNameOrNetwork(a.network),l=d.getReadOnlyFunctionCallApiUrl(p,s,g),m=y.map(O=>cvToHex(O)),R=JSON.stringify({sender:c,arguments:m}),N=await d.fetchFn(l,{method:"POST",body:R,headers:{"Content-Type":"application/json"}});if(!N.ok){const O=await N.text().catch(()=>"");throw new Error(`Error calling read-only function. Response ${N.status}: ${N.statusText}. Attempted to fetch ${l} and failed with the message: "${O}"`)}return N.json().then(O=>parseReadOnlyResponse(O))}var buffer={},ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(r,n,a,s,p){var g,y,c=p*8-s-1,d=(1<<c)-1,l=d>>1,m=-7,R=a?p-1:0,N=a?-1:1,O=r[n+R];for(R+=N,g=O&(1<<-m)-1,O>>=-m,m+=c;m>0;g=g*256+r[n+R],R+=N,m-=8);for(y=g&(1<<-m)-1,g>>=-m,m+=s;m>0;y=y*256+r[n+R],R+=N,m-=8);if(g===0)g=1-l;else{if(g===d)return y?NaN:(O?-1:1)*(1/0);y=y+Math.pow(2,s),g=g-l}return(O?-1:1)*y*Math.pow(2,g-s)};ieee754.write=function(r,n,a,s,p,g){var y,c,d,l=g*8-p-1,m=(1<<l)-1,R=m>>1,N=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=s?0:g-1,k=s?1:-1,M=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(c=isNaN(n)?1:0,y=m):(y=Math.floor(Math.log(n)/Math.LN2),n*(d=Math.pow(2,-y))<1&&(y--,d*=2),y+R>=1?n+=N/d:n+=N*Math.pow(2,1-R),n*d>=2&&(y++,d/=2),y+R>=m?(c=0,y=m):y+R>=1?(c=(n*d-1)*Math.pow(2,p),y=y+R):(c=n*Math.pow(2,R-1)*Math.pow(2,p),y=0));p>=8;r[a+O]=c&255,O+=k,c/=256,p-=8);for(y=y<<p|c,l+=p;l>0;r[a+O]=y&255,O+=k,y/=256,l-=8);r[a+O-k]|=M*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const n=base64Js,a=ieee754,s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=c,r.SlowBuffer=S,r.INSPECT_MAX_BYTES=50;const p=2147483647;r.kMaxLength=p,c.TYPED_ARRAY_SUPPORT=g(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function g(){try{const i=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(i,e),i.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function y(i){if(i>p)throw new RangeError('The value "'+i+'" is invalid for option "size"');const e=new Uint8Array(i);return Object.setPrototypeOf(e,c.prototype),e}function c(i,e,t){if(typeof i=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(i)}return d(i,e,t)}c.poolSize=8192;function d(i,e,t){if(typeof i=="string")return N(i,e);if(ArrayBuffer.isView(i))return k(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(Q(i,ArrayBuffer)||i&&Q(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Q(i,SharedArrayBuffer)||i&&Q(i.buffer,SharedArrayBuffer)))return M(i,e,t);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const o=i.valueOf&&i.valueOf();if(o!=null&&o!==i)return c.from(o,e,t);const h=C(i);if(h)return h;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return c.from(i[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}c.from=function(i,e,t){return d(i,e,t)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function l(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function m(i,e,t){return l(i),i<=0?y(i):e!==void 0?typeof t=="string"?y(i).fill(e,t):y(i).fill(e):y(i)}c.alloc=function(i,e,t){return m(i,e,t)};function R(i){return l(i),y(i<0?0:x(i)|0)}c.allocUnsafe=function(i){return R(i)},c.allocUnsafeSlow=function(i){return R(i)};function N(i,e){if((typeof e!="string"||e==="")&&(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const t=v(i,e)|0;let o=y(t);const h=o.write(i,e);return h!==t&&(o=o.slice(0,h)),o}function O(i){const e=i.length<0?0:x(i.length)|0,t=y(e);for(let o=0;o<e;o+=1)t[o]=i[o]&255;return t}function k(i){if(Q(i,Uint8Array)){const e=new Uint8Array(i);return M(e.buffer,e.byteOffset,e.byteLength)}return O(i)}function M(i,e,t){if(e<0||i.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let o;return e===void 0&&t===void 0?o=new Uint8Array(i):t===void 0?o=new Uint8Array(i,e):o=new Uint8Array(i,e,t),Object.setPrototypeOf(o,c.prototype),o}function C(i){if(c.isBuffer(i)){const e=x(i.length)|0,t=y(e);return t.length===0||i.copy(t,0,0,e),t}if(i.length!==void 0)return typeof i.length!="number"||fe(i.length)?y(0):O(i);if(i.type==="Buffer"&&Array.isArray(i.data))return O(i.data)}function x(i){if(i>=p)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return i|0}function S(i){return+i!=i&&(i=0),c.alloc(+i)}c.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==c.prototype},c.compare=function(e,t){if(Q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),Q(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let o=e.length,h=t.length;for(let _=0,E=Math.min(o,h);_<E;++_)if(e[_]!==t[_]){o=e[_],h=t[_];break}return o<h?-1:h<o?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return c.alloc(0);let o;if(t===void 0)for(t=0,o=0;o<e.length;++o)t+=e[o].length;const h=c.allocUnsafe(t);let _=0;for(o=0;o<e.length;++o){let E=e[o];if(Q(E,Uint8Array))_+E.length>h.length?(c.isBuffer(E)||(E=c.from(E)),E.copy(h,_)):Uint8Array.prototype.set.call(h,E,_);else if(c.isBuffer(E))E.copy(h,_);else throw new TypeError('"list" argument must be an Array of Buffers');_+=E.length}return h};function v(i,e){if(c.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||Q(i,ArrayBuffer))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);const t=i.length,o=arguments.length>2&&arguments[2]===!0;if(!o&&t===0)return 0;let h=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return W(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return we(i).length;default:if(h)return o?-1:W(i).length;e=(""+e).toLowerCase(),h=!0}}c.byteLength=v;function I(i,e,t){let o=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(i||(i="utf8");;)switch(i){case"hex":return ne(this,e,t);case"utf8":case"utf-8":return le(this,e,t);case"ascii":return re(this,e,t);case"latin1":case"binary":return ce(this,e,t);case"base64":return ie(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,e,t);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),o=!0}}c.prototype._isBuffer=!0;function A(i,e,t){const o=i[e];i[e]=i[t],i[t]=o}c.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)A(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)A(this,t,t+3),A(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)A(this,t,t+7),A(this,t+1,t+6),A(this,t+2,t+5),A(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return e===0?"":arguments.length===0?le(this,0,e):I.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:c.compare(this,e)===0},c.prototype.inspect=function(){let e="";const t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(e,t,o,h,_){if(Q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),o===void 0&&(o=e?e.length:0),h===void 0&&(h=0),_===void 0&&(_=this.length),t<0||o>e.length||h<0||_>this.length)throw new RangeError("out of range index");if(h>=_&&t>=o)return 0;if(h>=_)return-1;if(t>=o)return 1;if(t>>>=0,o>>>=0,h>>>=0,_>>>=0,this===e)return 0;let E=_-h,$=o-t;const K=Math.min(E,$),H=this.slice(h,_),J=e.slice(t,o);for(let V=0;V<K;++V)if(H[V]!==J[V]){E=H[V],$=J[V];break}return E<$?-1:$<E?1:0};function D(i,e,t,o,h){if(i.length===0)return-1;if(typeof t=="string"?(o=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,fe(t)&&(t=h?0:i.length-1),t<0&&(t=i.length+t),t>=i.length){if(h)return-1;t=i.length-1}else if(t<0)if(h)t=0;else return-1;if(typeof e=="string"&&(e=c.from(e,o)),c.isBuffer(e))return e.length===0?-1:G(i,e,t,o,h);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?h?Uint8Array.prototype.indexOf.call(i,e,t):Uint8Array.prototype.lastIndexOf.call(i,e,t):G(i,[e],t,o,h);throw new TypeError("val must be string, number or Buffer")}function G(i,e,t,o,h){let _=1,E=i.length,$=e.length;if(o!==void 0&&(o=String(o).toLowerCase(),o==="ucs2"||o==="ucs-2"||o==="utf16le"||o==="utf-16le")){if(i.length<2||e.length<2)return-1;_=2,E/=2,$/=2,t/=2}function K(J,V){return _===1?J[V]:J.readUInt16BE(V*_)}let H;if(h){let J=-1;for(H=t;H<E;H++)if(K(i,H)===K(e,J===-1?0:H-J)){if(J===-1&&(J=H),H-J+1===$)return J*_}else J!==-1&&(H-=H-J),J=-1}else for(t+$>E&&(t=E-$),H=t;H>=0;H--){let J=!0;for(let V=0;V<$;V++)if(K(i,H+V)!==K(e,V)){J=!1;break}if(J)return H}return-1}c.prototype.includes=function(e,t,o){return this.indexOf(e,t,o)!==-1},c.prototype.indexOf=function(e,t,o){return D(this,e,t,o,!0)},c.prototype.lastIndexOf=function(e,t,o){return D(this,e,t,o,!1)};function q(i,e,t,o){t=Number(t)||0;const h=i.length-t;o?(o=Number(o),o>h&&(o=h)):o=h;const _=e.length;o>_/2&&(o=_/2);let E;for(E=0;E<o;++E){const $=parseInt(e.substr(E*2,2),16);if(fe($))return E;i[t+E]=$}return E}function L(i,e,t,o){return xe(W(e,i.length-t),i,t,o)}function ee(i,e,t,o){return xe(ae(e),i,t,o)}function oe(i,e,t,o){return xe(we(e),i,t,o)}function ge(i,e,t,o){return xe(me(e,i.length-t),i,t,o)}c.prototype.write=function(e,t,o,h){if(t===void 0)h="utf8",o=this.length,t=0;else if(o===void 0&&typeof t=="string")h=t,o=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(o)?(o=o>>>0,h===void 0&&(h="utf8")):(h=o,o=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const _=this.length-t;if((o===void 0||o>_)&&(o=_),e.length>0&&(o<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");let E=!1;for(;;)switch(h){case"hex":return q(this,e,t,o);case"utf8":case"utf-8":return L(this,e,t,o);case"ascii":case"latin1":case"binary":return ee(this,e,t,o);case"base64":return oe(this,e,t,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,e,t,o);default:if(E)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),E=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ie(i,e,t){return e===0&&t===i.length?n.fromByteArray(i):n.fromByteArray(i.slice(e,t))}function le(i,e,t){t=Math.min(i.length,t);const o=[];let h=e;for(;h<t;){const _=i[h];let E=null,$=_>239?4:_>223?3:_>191?2:1;if(h+$<=t){let K,H,J,V;switch($){case 1:_<128&&(E=_);break;case 2:K=i[h+1],(K&192)===128&&(V=(_&31)<<6|K&63,V>127&&(E=V));break;case 3:K=i[h+1],H=i[h+2],(K&192)===128&&(H&192)===128&&(V=(_&15)<<12|(K&63)<<6|H&63,V>2047&&(V<55296||V>57343)&&(E=V));break;case 4:K=i[h+1],H=i[h+2],J=i[h+3],(K&192)===128&&(H&192)===128&&(J&192)===128&&(V=(_&15)<<18|(K&63)<<12|(H&63)<<6|J&63,V>65535&&V<1114112&&(E=V))}}E===null?(E=65533,$=1):E>65535&&(E-=65536,o.push(E>>>10&1023|55296),E=56320|E&1023),o.push(E),h+=$}return ye(o)}const se=4096;function ye(i){const e=i.length;if(e<=se)return String.fromCharCode.apply(String,i);let t="",o=0;for(;o<e;)t+=String.fromCharCode.apply(String,i.slice(o,o+=se));return t}function re(i,e,t){let o="";t=Math.min(i.length,t);for(let h=e;h<t;++h)o+=String.fromCharCode(i[h]&127);return o}function ce(i,e,t){let o="";t=Math.min(i.length,t);for(let h=e;h<t;++h)o+=String.fromCharCode(i[h]);return o}function ne(i,e,t){const o=i.length;(!e||e<0)&&(e=0),(!t||t<0||t>o)&&(t=o);let h="";for(let _=e;_<t;++_)h+=_e[i[_]];return h}function de(i,e,t){const o=i.slice(e,t);let h="";for(let _=0;_<o.length-1;_+=2)h+=String.fromCharCode(o[_]+o[_+1]*256);return h}c.prototype.slice=function(e,t){const o=this.length;e=~~e,t=t===void 0?o:~~t,e<0?(e+=o,e<0&&(e=0)):e>o&&(e=o),t<0?(t+=o,t<0&&(t=0)):t>o&&(t=o),t<e&&(t=e);const h=this.subarray(e,t);return Object.setPrototypeOf(h,c.prototype),h};function Y(i,e,t){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+e>t)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,o){e=e>>>0,t=t>>>0,o||Y(e,t,this.length);let h=this[e],_=1,E=0;for(;++E<t&&(_*=256);)h+=this[e+E]*_;return h},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,o){e=e>>>0,t=t>>>0,o||Y(e,t,this.length);let h=this[e+--t],_=1;for(;t>0&&(_*=256);)h+=this[e+--t]*_;return h},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e=e>>>0,t||Y(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||Y(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||Y(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=Z(function(e){e=e>>>0,T(e,"offset");const t=this[e],o=this[e+7];(t===void 0||o===void 0)&&F(e,this.length-8);const h=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,_=this[++e]+this[++e]*2**8+this[++e]*2**16+o*2**24;return BigInt(h)+(BigInt(_)<<BigInt(32))}),c.prototype.readBigUInt64BE=Z(function(e){e=e>>>0,T(e,"offset");const t=this[e],o=this[e+7];(t===void 0||o===void 0)&&F(e,this.length-8);const h=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],_=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+o;return(BigInt(h)<<BigInt(32))+BigInt(_)}),c.prototype.readIntLE=function(e,t,o){e=e>>>0,t=t>>>0,o||Y(e,t,this.length);let h=this[e],_=1,E=0;for(;++E<t&&(_*=256);)h+=this[e+E]*_;return _*=128,h>=_&&(h-=Math.pow(2,8*t)),h},c.prototype.readIntBE=function(e,t,o){e=e>>>0,t=t>>>0,o||Y(e,t,this.length);let h=t,_=1,E=this[e+--h];for(;h>0&&(_*=256);)E+=this[e+--h]*_;return _*=128,E>=_&&(E-=Math.pow(2,8*t)),E},c.prototype.readInt8=function(e,t){return e=e>>>0,t||Y(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},c.prototype.readInt16LE=function(e,t){e=e>>>0,t||Y(e,2,this.length);const o=this[e]|this[e+1]<<8;return o&32768?o|4294901760:o},c.prototype.readInt16BE=function(e,t){e=e>>>0,t||Y(e,2,this.length);const o=this[e+1]|this[e]<<8;return o&32768?o|4294901760:o},c.prototype.readInt32LE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=Z(function(e){e=e>>>0,T(e,"offset");const t=this[e],o=this[e+7];(t===void 0||o===void 0)&&F(e,this.length-8);const h=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(o<<24);return(BigInt(h)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),c.prototype.readBigInt64BE=Z(function(e){e=e>>>0,T(e,"offset");const t=this[e],o=this[e+7];(t===void 0||o===void 0)&&F(e,this.length-8);const h=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(h)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+o)}),c.prototype.readFloatLE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),a.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),a.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||Y(e,8,this.length),a.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||Y(e,8,this.length),a.read(this,e,!1,52,8)};function X(i,e,t,o,h,_){if(!c.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>h||e<_)throw new RangeError('"value" argument is out of bounds');if(t+o>i.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,o,h){if(e=+e,t=t>>>0,o=o>>>0,!h){const $=Math.pow(2,8*o)-1;X(this,e,t,o,$,0)}let _=1,E=0;for(this[t]=e&255;++E<o&&(_*=256);)this[t+E]=e/_&255;return t+o},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,o,h){if(e=+e,t=t>>>0,o=o>>>0,!h){const $=Math.pow(2,8*o)-1;X(this,e,t,o,$,0)}let _=o-1,E=1;for(this[t+_]=e&255;--_>=0&&(E*=256);)this[t+_]=e/E&255;return t+o},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,o){return e=+e,t=t>>>0,o||X(this,e,t,1,255,0),this[t]=e&255,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,o){return e=+e,t=t>>>0,o||X(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,o){return e=+e,t=t>>>0,o||X(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,o){return e=+e,t=t>>>0,o||X(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,o){return e=+e,t=t>>>0,o||X(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function te(i,e,t,o,h){u(e,o,h,i,t,7);let _=Number(e&BigInt(4294967295));i[t++]=_,_=_>>8,i[t++]=_,_=_>>8,i[t++]=_,_=_>>8,i[t++]=_;let E=Number(e>>BigInt(32)&BigInt(4294967295));return i[t++]=E,E=E>>8,i[t++]=E,E=E>>8,i[t++]=E,E=E>>8,i[t++]=E,t}function pe(i,e,t,o,h){u(e,o,h,i,t,7);let _=Number(e&BigInt(4294967295));i[t+7]=_,_=_>>8,i[t+6]=_,_=_>>8,i[t+5]=_,_=_>>8,i[t+4]=_;let E=Number(e>>BigInt(32)&BigInt(4294967295));return i[t+3]=E,E=E>>8,i[t+2]=E,E=E>>8,i[t+1]=E,E=E>>8,i[t]=E,t+8}c.prototype.writeBigUInt64LE=Z(function(e,t=0){return te(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Z(function(e,t=0){return pe(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(e,t,o,h){if(e=+e,t=t>>>0,!h){const K=Math.pow(2,8*o-1);X(this,e,t,o,K-1,-K)}let _=0,E=1,$=0;for(this[t]=e&255;++_<o&&(E*=256);)e<0&&$===0&&this[t+_-1]!==0&&($=1),this[t+_]=(e/E>>0)-$&255;return t+o},c.prototype.writeIntBE=function(e,t,o,h){if(e=+e,t=t>>>0,!h){const K=Math.pow(2,8*o-1);X(this,e,t,o,K-1,-K)}let _=o-1,E=1,$=0;for(this[t+_]=e&255;--_>=0&&(E*=256);)e<0&&$===0&&this[t+_+1]!==0&&($=1),this[t+_]=(e/E>>0)-$&255;return t+o},c.prototype.writeInt8=function(e,t,o){return e=+e,t=t>>>0,o||X(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},c.prototype.writeInt16LE=function(e,t,o){return e=+e,t=t>>>0,o||X(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,o){return e=+e,t=t>>>0,o||X(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},c.prototype.writeInt32LE=function(e,t,o){return e=+e,t=t>>>0,o||X(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,o){return e=+e,t=t>>>0,o||X(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},c.prototype.writeBigInt64LE=Z(function(e,t=0){return te(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Z(function(e,t=0){return pe(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function he(i,e,t,o,h,_){if(t+o>i.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function b(i,e,t,o,h){return e=+e,t=t>>>0,h||he(i,e,t,4),a.write(i,e,t,o,23,4),t+4}c.prototype.writeFloatLE=function(e,t,o){return b(this,e,t,!0,o)},c.prototype.writeFloatBE=function(e,t,o){return b(this,e,t,!1,o)};function w(i,e,t,o,h){return e=+e,t=t>>>0,h||he(i,e,t,8),a.write(i,e,t,o,52,8),t+8}c.prototype.writeDoubleLE=function(e,t,o){return w(this,e,t,!0,o)},c.prototype.writeDoubleBE=function(e,t,o){return w(this,e,t,!1,o)},c.prototype.copy=function(e,t,o,h){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(o||(o=0),!h&&h!==0&&(h=this.length),t>=e.length&&(t=e.length),t||(t=0),h>0&&h<o&&(h=o),h===o||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),e.length-t<h-o&&(h=e.length-t+o);const _=h-o;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,o,h):Uint8Array.prototype.set.call(e,this.subarray(o,h),t),_},c.prototype.fill=function(e,t,o,h){if(typeof e=="string"){if(typeof t=="string"?(h=t,t=0,o=this.length):typeof o=="string"&&(h=o,o=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!c.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(e.length===1){const E=e.charCodeAt(0);(h==="utf8"&&E<128||h==="latin1")&&(e=E)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<o)throw new RangeError("Out of range index");if(o<=t)return this;t=t>>>0,o=o===void 0?this.length:o>>>0,e||(e=0);let _;if(typeof e=="number")for(_=t;_<o;++_)this[_]=e;else{const E=c.isBuffer(e)?e:c.from(e,h),$=E.length;if($===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(_=0;_<o-t;++_)this[_+t]=E[_%$]}return this};const B={};function U(i,e,t){B[i]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(h){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:h,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}U("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),U("ERR_INVALID_ARG_TYPE",function(i,e){return`The "${i}" argument must be of type number. Received type ${typeof e}`},TypeError),U("ERR_OUT_OF_RANGE",function(i,e,t){let o=`The value of "${i}" is out of range.`,h=t;return Number.isInteger(t)&&Math.abs(t)>2**32?h=P(String(t)):typeof t=="bigint"&&(h=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(h=P(h)),h+="n"),o+=` It must be ${e}. Received ${h}`,o},RangeError);function P(i){let e="",t=i.length;const o=i[0]==="-"?1:0;for(;t>=o+4;t-=3)e=`_${i.slice(t-3,t)}${e}`;return`${i.slice(0,t)}${e}`}function f(i,e,t){T(e,"offset"),(i[e]===void 0||i[e+t]===void 0)&&F(e,i.length-(t+1))}function u(i,e,t,o,h,_){if(i>t||i<e){const E=typeof e=="bigint"?"n":"";let $;throw _>3?e===0||e===BigInt(0)?$=`>= 0${E} and < 2${E} ** ${(_+1)*8}${E}`:$=`>= -(2${E} ** ${(_+1)*8-1}${E}) and < 2 ** ${(_+1)*8-1}${E}`:$=`>= ${e}${E} and <= ${t}${E}`,new B.ERR_OUT_OF_RANGE("value",$,i)}f(o,h,_)}function T(i,e){if(typeof i!="number")throw new B.ERR_INVALID_ARG_TYPE(e,"number",i)}function F(i,e,t){throw Math.floor(i)!==i?(T(i,t),new B.ERR_OUT_OF_RANGE(t||"offset","an integer",i)):e<0?new B.ERR_BUFFER_OUT_OF_BOUNDS:new B.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,i)}const z=/[^+/0-9A-Za-z-_]/g;function j(i){if(i=i.split("=")[0],i=i.trim().replace(z,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function W(i,e){e=e||1/0;let t;const o=i.length;let h=null;const _=[];for(let E=0;E<o;++E){if(t=i.charCodeAt(E),t>55295&&t<57344){if(!h){if(t>56319){(e-=3)>-1&&_.push(239,191,189);continue}else if(E+1===o){(e-=3)>-1&&_.push(239,191,189);continue}h=t;continue}if(t<56320){(e-=3)>-1&&_.push(239,191,189),h=t;continue}t=(h-55296<<10|t-56320)+65536}else h&&(e-=3)>-1&&_.push(239,191,189);if(h=null,t<128){if((e-=1)<0)break;_.push(t)}else if(t<2048){if((e-=2)<0)break;_.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;_.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;_.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return _}function ae(i){const e=[];for(let t=0;t<i.length;++t)e.push(i.charCodeAt(t)&255);return e}function me(i,e){let t,o,h;const _=[];for(let E=0;E<i.length&&!((e-=2)<0);++E)t=i.charCodeAt(E),o=t>>8,h=t%256,_.push(h),_.push(o);return _}function we(i){return n.toByteArray(j(i))}function xe(i,e,t,o){let h;for(h=0;h<o&&!(h+t>=e.length||h>=i.length);++h)e[h+t]=i[h];return h}function Q(i,e){return i instanceof e||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===e.name}function fe(i){return i!==i}const _e=function(){const i="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){const o=t*16;for(let h=0;h<16;++h)e[o+h]=i[t]+i[h]}return e}();function Z(i){return typeof BigInt>"u"?ue:i}function ue(){throw new Error("BigInt not supported")}})(buffer);var browser$1={exports:{}},lib$2={},readableBrowser={exports:{}},streamBrowser=require$$3.EventEmitter,buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function r(k,M){var C=Object.keys(k);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(k);M&&(x=x.filter(function(S){return Object.getOwnPropertyDescriptor(k,S).enumerable})),C.push.apply(C,x)}return C}function n(k){for(var M=1;M<arguments.length;M++){var C=arguments[M]!=null?arguments[M]:{};M%2?r(Object(C),!0).forEach(function(x){a(k,x,C[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(C)):r(Object(C)).forEach(function(x){Object.defineProperty(k,x,Object.getOwnPropertyDescriptor(C,x))})}return k}function a(k,M,C){return M=y(M),M in k?Object.defineProperty(k,M,{value:C,enumerable:!0,configurable:!0,writable:!0}):k[M]=C,k}function s(k,M){if(!(k instanceof M))throw new TypeError("Cannot call a class as a function")}function p(k,M){for(var C=0;C<M.length;C++){var x=M[C];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(k,y(x.key),x)}}function g(k,M,C){return M&&p(k.prototype,M),C&&p(k,C),Object.defineProperty(k,"prototype",{writable:!1}),k}function y(k){var M=c(k,"string");return typeof M=="symbol"?M:String(M)}function c(k,M){if(typeof k!="object"||k===null)return k;var C=k[Symbol.toPrimitive];if(C!==void 0){var x=C.call(k,M||"default");if(typeof x!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(k)}var d=buffer,l=d.Buffer,m=require$$3,R=m.inspect,N=R&&R.custom||"inspect";function O(k,M,C){l.prototype.copy.call(k,M,C)}return buffer_list=function(){function k(){s(this,k),this.head=null,this.tail=null,this.length=0}return g(k,[{key:"push",value:function(C){var x={data:C,next:null};this.length>0?this.tail.next=x:this.head=x,this.tail=x,++this.length}},{key:"unshift",value:function(C){var x={data:C,next:this.head};this.length===0&&(this.tail=x),this.head=x,++this.length}},{key:"shift",value:function(){if(this.length!==0){var C=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,C}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(C){if(this.length===0)return"";for(var x=this.head,S=""+x.data;x=x.next;)S+=C+x.data;return S}},{key:"concat",value:function(C){if(this.length===0)return l.alloc(0);for(var x=l.allocUnsafe(C>>>0),S=this.head,v=0;S;)O(S.data,x,v),v+=S.data.length,S=S.next;return x}},{key:"consume",value:function(C,x){var S;return C<this.head.data.length?(S=this.head.data.slice(0,C),this.head.data=this.head.data.slice(C)):C===this.head.data.length?S=this.shift():S=x?this._getString(C):this._getBuffer(C),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(C){var x=this.head,S=1,v=x.data;for(C-=v.length;x=x.next;){var I=x.data,A=C>I.length?I.length:C;if(A===I.length?v+=I:v+=I.slice(0,C),C-=A,C===0){A===I.length?(++S,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=I.slice(A));break}++S}return this.length-=S,v}},{key:"_getBuffer",value:function(C){var x=l.allocUnsafe(C),S=this.head,v=1;for(S.data.copy(x),C-=S.data.length;S=S.next;){var I=S.data,A=C>I.length?I.length:C;if(I.copy(x,x.length-C,0,A),C-=A,C===0){A===I.length?(++v,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=I.slice(A));break}++v}return this.length-=v,x}},{key:N,value:function(C,x){return R(this,n(n({},x),{},{depth:0,customInspect:!1}))}}]),k}(),buffer_list}function destroy(r,n){var a=this,s=this._readableState&&this._readableState.destroyed,p=this._writableState&&this._writableState.destroyed;return s||p?(n?n(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,r)):process.nextTick(emitErrorNT,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(g){!n&&g?a._writableState?a._writableState.errorEmitted?process.nextTick(emitCloseNT,a):(a._writableState.errorEmitted=!0,process.nextTick(emitErrorAndCloseNT,a,g)):process.nextTick(emitErrorAndCloseNT,a,g):n?(process.nextTick(emitCloseNT,a),n(g)):process.nextTick(emitCloseNT,a)}),this)}function emitErrorAndCloseNT(r,n){emitErrorNT(r,n),emitCloseNT(r)}function emitCloseNT(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(r,n){r.emit("error",n)}function errorOrDestroy(r,n){var a=r._readableState,s=r._writableState;a&&a.autoDestroy||s&&s.autoDestroy?r.destroy(n):r.emit("error",n)}var destroy_1={destroy,undestroy,errorOrDestroy},errorsBrowser={};function _inheritsLoose(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n}var codes={};function createErrorType(r,n,a){a||(a=Error);function s(g,y,c){return typeof n=="string"?n:n(g,y,c)}var p=function(g){_inheritsLoose(y,g);function y(c,d,l){return g.call(this,s(c,d,l))||this}return y}(a);p.prototype.name=a.name,p.prototype.code=r,codes[r]=p}function oneOf(r,n){if(Array.isArray(r)){var a=r.length;return r=r.map(function(s){return String(s)}),a>2?"one of ".concat(n," ").concat(r.slice(0,a-1).join(", "),", or ")+r[a-1]:a===2?"one of ".concat(n," ").concat(r[0]," or ").concat(r[1]):"of ".concat(n," ").concat(r[0])}else return"of ".concat(n," ").concat(String(r))}function startsWith(r,n,a){return r.substr(!a||a<0?0:+a,n.length)===n}function endsWith(r,n,a){return(a===void 0||a>r.length)&&(a=r.length),r.substring(a-n.length,a)===n}function includes(r,n,a){return typeof a!="number"&&(a=0),a+n.length>r.length?!1:r.indexOf(n,a)!==-1}createErrorType("ERR_INVALID_OPT_VALUE",function(r,n){return'The value "'+n+'" is invalid for option "'+r+'"'},TypeError);createErrorType("ERR_INVALID_ARG_TYPE",function(r,n,a){var s;typeof n=="string"&&startsWith(n,"not ")?(s="must not be",n=n.replace(/^not /,"")):s="must be";var p;if(endsWith(r," argument"))p="The ".concat(r," ").concat(s," ").concat(oneOf(n,"type"));else{var g=includes(r,".")?"property":"argument";p='The "'.concat(r,'" ').concat(g," ").concat(s," ").concat(oneOf(n,"type"))}return p+=". Received type ".concat(typeof a),p},TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"});createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"});createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");errorsBrowser.codes=codes;var ERR_INVALID_OPT_VALUE=errorsBrowser.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(r,n,a){return r.highWaterMark!=null?r.highWaterMark:n?r[a]:null}function getHighWaterMark(r,n,a,s){var p=highWaterMarkFrom(n,s,a);if(p!=null){if(!(isFinite(p)&&Math.floor(p)===p)||p<0){var g=s?a:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(g,p)}return Math.floor(p)}return r.objectMode?16:16*1024}var state={getHighWaterMark},inherits_browser={exports:{}};typeof Object.create=="function"?inherits_browser.exports=function(n,a){a&&(n.super_=a,n.prototype=Object.create(a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(n,a){if(a){n.super_=a;var s=function(){};s.prototype=a.prototype,n.prototype=new s,n.prototype.constructor=n}};var inherits_browserExports=inherits_browser.exports,browser=deprecate;function deprecate(r,n){if(config("noDeprecation"))return r;var a=!1;function s(){if(!a){if(config("throwDeprecation"))throw new Error(n);config("traceDeprecation")?console.trace(n):console.warn(n),a=!0}return r.apply(this,arguments)}return s}function config(r){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var n=commonjsGlobal.localStorage[r];return n==null?!1:String(n).toLowerCase()==="true"}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=q;function r(b){var w=this;this.next=null,this.entry=null,this.finish=function(){he(w,b)}}var n;q.WritableState=D;var a={deprecate:browser},s=streamBrowser,p=buffer.Buffer,g=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function y(b){return p.from(b)}function c(b){return p.isBuffer(b)||b instanceof g}var d=destroy_1,l=state,m=l.getHighWaterMark,R=errorsBrowser.codes,N=R.ERR_INVALID_ARG_TYPE,O=R.ERR_METHOD_NOT_IMPLEMENTED,k=R.ERR_MULTIPLE_CALLBACK,M=R.ERR_STREAM_CANNOT_PIPE,C=R.ERR_STREAM_DESTROYED,x=R.ERR_STREAM_NULL_VALUES,S=R.ERR_STREAM_WRITE_AFTER_END,v=R.ERR_UNKNOWN_ENCODING,I=d.errorOrDestroy;inherits_browserExports(q,s);function A(){}function D(b,w,B){n=n||require_stream_duplex(),b=b||{},typeof B!="boolean"&&(B=w instanceof n),this.objectMode=!!b.objectMode,B&&(this.objectMode=this.objectMode||!!b.writableObjectMode),this.highWaterMark=m(this,b,"writableHighWaterMark",B),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var U=b.decodeStrings===!1;this.decodeStrings=!U,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(P){ye(w,P)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=b.emitClose!==!1,this.autoDestroy=!!b.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}D.prototype.getBuffer=function(){for(var w=this.bufferedRequest,B=[];w;)B.push(w),w=w.next;return B},function(){try{Object.defineProperty(D.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var G;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(G=Function.prototype[Symbol.hasInstance],Object.defineProperty(q,Symbol.hasInstance,{value:function(w){return G.call(this,w)?!0:this!==q?!1:w&&w._writableState instanceof D}})):G=function(w){return w instanceof this};function q(b){n=n||require_stream_duplex();var w=this instanceof n;if(!w&&!G.call(q,this))return new q(b);this._writableState=new D(b,this,w),this.writable=!0,b&&(typeof b.write=="function"&&(this._write=b.write),typeof b.writev=="function"&&(this._writev=b.writev),typeof b.destroy=="function"&&(this._destroy=b.destroy),typeof b.final=="function"&&(this._final=b.final)),s.call(this)}q.prototype.pipe=function(){I(this,new M)};function L(b,w){var B=new S;I(b,B),process.nextTick(w,B)}function ee(b,w,B,U){var P;return B===null?P=new x:typeof B!="string"&&!w.objectMode&&(P=new N("chunk",["string","Buffer"],B)),P?(I(b,P),process.nextTick(U,P),!1):!0}q.prototype.write=function(b,w,B){var U=this._writableState,P=!1,f=!U.objectMode&&c(b);return f&&!p.isBuffer(b)&&(b=y(b)),typeof w=="function"&&(B=w,w=null),f?w="buffer":w||(w=U.defaultEncoding),typeof B!="function"&&(B=A),U.ending?L(this,B):(f||ee(this,U,b,B))&&(U.pendingcb++,P=ge(this,U,f,b,w,B)),P},q.prototype.cork=function(){this._writableState.corked++},q.prototype.uncork=function(){var b=this._writableState;b.corked&&(b.corked--,!b.writing&&!b.corked&&!b.bufferProcessing&&b.bufferedRequest&&ne(this,b))},q.prototype.setDefaultEncoding=function(w){if(typeof w=="string"&&(w=w.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((w+"").toLowerCase())>-1))throw new v(w);return this._writableState.defaultEncoding=w,this},Object.defineProperty(q.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function oe(b,w,B){return!b.objectMode&&b.decodeStrings!==!1&&typeof w=="string"&&(w=p.from(w,B)),w}Object.defineProperty(q.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ge(b,w,B,U,P,f){if(!B){var u=oe(w,U,P);U!==u&&(B=!0,P="buffer",U=u)}var T=w.objectMode?1:U.length;w.length+=T;var F=w.length<w.highWaterMark;if(F||(w.needDrain=!0),w.writing||w.corked){var z=w.lastBufferedRequest;w.lastBufferedRequest={chunk:U,encoding:P,isBuf:B,callback:f,next:null},z?z.next=w.lastBufferedRequest:w.bufferedRequest=w.lastBufferedRequest,w.bufferedRequestCount+=1}else ie(b,w,!1,T,U,P,f);return F}function ie(b,w,B,U,P,f,u){w.writelen=U,w.writecb=u,w.writing=!0,w.sync=!0,w.destroyed?w.onwrite(new C("write")):B?b._writev(P,w.onwrite):b._write(P,f,w.onwrite),w.sync=!1}function le(b,w,B,U,P){--w.pendingcb,B?(process.nextTick(P,U),process.nextTick(te,b,w),b._writableState.errorEmitted=!0,I(b,U)):(P(U),b._writableState.errorEmitted=!0,I(b,U),te(b,w))}function se(b){b.writing=!1,b.writecb=null,b.length-=b.writelen,b.writelen=0}function ye(b,w){var B=b._writableState,U=B.sync,P=B.writecb;if(typeof P!="function")throw new k;if(se(B),w)le(b,B,U,w,P);else{var f=de(B)||b.destroyed;!f&&!B.corked&&!B.bufferProcessing&&B.bufferedRequest&&ne(b,B),U?process.nextTick(re,b,B,f,P):re(b,B,f,P)}}function re(b,w,B,U){B||ce(b,w),w.pendingcb--,U(),te(b,w)}function ce(b,w){w.length===0&&w.needDrain&&(w.needDrain=!1,b.emit("drain"))}function ne(b,w){w.bufferProcessing=!0;var B=w.bufferedRequest;if(b._writev&&B&&B.next){var U=w.bufferedRequestCount,P=new Array(U),f=w.corkedRequestsFree;f.entry=B;for(var u=0,T=!0;B;)P[u]=B,B.isBuf||(T=!1),B=B.next,u+=1;P.allBuffers=T,ie(b,w,!0,w.length,P,"",f.finish),w.pendingcb++,w.lastBufferedRequest=null,f.next?(w.corkedRequestsFree=f.next,f.next=null):w.corkedRequestsFree=new r(w),w.bufferedRequestCount=0}else{for(;B;){var F=B.chunk,z=B.encoding,j=B.callback,W=w.objectMode?1:F.length;if(ie(b,w,!1,W,F,z,j),B=B.next,w.bufferedRequestCount--,w.writing)break}B===null&&(w.lastBufferedRequest=null)}w.bufferedRequest=B,w.bufferProcessing=!1}q.prototype._write=function(b,w,B){B(new O("_write()"))},q.prototype._writev=null,q.prototype.end=function(b,w,B){var U=this._writableState;return typeof b=="function"?(B=b,b=null,w=null):typeof w=="function"&&(B=w,w=null),b!=null&&this.write(b,w),U.corked&&(U.corked=1,this.uncork()),U.ending||pe(this,U,B),this},Object.defineProperty(q.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function de(b){return b.ending&&b.length===0&&b.bufferedRequest===null&&!b.finished&&!b.writing}function Y(b,w){b._final(function(B){w.pendingcb--,B&&I(b,B),w.prefinished=!0,b.emit("prefinish"),te(b,w)})}function X(b,w){!w.prefinished&&!w.finalCalled&&(typeof b._final=="function"&&!w.destroyed?(w.pendingcb++,w.finalCalled=!0,process.nextTick(Y,b,w)):(w.prefinished=!0,b.emit("prefinish")))}function te(b,w){var B=de(w);if(B&&(X(b,w),w.pendingcb===0&&(w.finished=!0,b.emit("finish"),w.autoDestroy))){var U=b._readableState;(!U||U.autoDestroy&&U.endEmitted)&&b.destroy()}return B}function pe(b,w,B){w.ending=!0,te(b,w),B&&(w.finished?process.nextTick(B):b.once("finish",B)),w.ended=!0,b.writable=!1}function he(b,w,B){var U=b.entry;for(b.entry=null;U;){var P=U.callback;w.pendingcb--,P(B),U=U.next}w.corkedRequestsFree.next=b}return Object.defineProperty(q.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(w){this._writableState&&(this._writableState.destroyed=w)}}),q.prototype.destroy=d.destroy,q.prototype._undestroy=d.undestroy,q.prototype._destroy=function(b,w){w(b)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var r=Object.keys||function(l){var m=[];for(var R in l)m.push(R);return m};_stream_duplex=y;var n=require_stream_readable(),a=require_stream_writable();inherits_browserExports(y,n);for(var s=r(a.prototype),p=0;p<s.length;p++){var g=s[p];y.prototype[g]||(y.prototype[g]=a.prototype[g])}function y(l){if(!(this instanceof y))return new y(l);n.call(this,l),a.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",c)))}Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function c(){this._writableState.ended||process.nextTick(d,this)}function d(l){l.end()}return Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),_stream_duplex}var string_decoder={},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(r,n){var a=buffer,s=a.Buffer;function p(y,c){for(var d in y)c[d]=y[d]}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?r.exports=a:(p(a,n),n.Buffer=g);function g(y,c,d){return s(y,c,d)}g.prototype=Object.create(s.prototype),p(s,g),g.from=function(y,c,d){if(typeof y=="number")throw new TypeError("Argument must not be a number");return s(y,c,d)},g.alloc=function(y,c,d){if(typeof y!="number")throw new TypeError("Argument must be a number");var l=s(y);return c!==void 0?typeof d=="string"?l.fill(c,d):l.fill(c):l.fill(0),l},g.allocUnsafe=function(y){if(typeof y!="number")throw new TypeError("Argument must be a number");return s(y)},g.allocUnsafeSlow=function(y){if(typeof y!="number")throw new TypeError("Argument must be a number");return a.SlowBuffer(y)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var r=requireSafeBuffer().Buffer,n=r.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(x){if(!x)return"utf8";for(var S;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(S)return;x=(""+x).toLowerCase(),S=!0}}function s(x){var S=a(x);if(typeof S!="string"&&(r.isEncoding===n||!n(x)))throw new Error("Unknown encoding: "+x);return S||x}string_decoder.StringDecoder=p;function p(x){this.encoding=s(x);var S;switch(this.encoding){case"utf16le":this.text=R,this.end=N,S=4;break;case"utf8":this.fillLast=d,S=4;break;case"base64":this.text=O,this.end=k,S=3;break;default:this.write=M,this.end=C;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(S)}p.prototype.write=function(x){if(x.length===0)return"";var S,v;if(this.lastNeed){if(S=this.fillLast(x),S===void 0)return"";v=this.lastNeed,this.lastNeed=0}else v=0;return v<x.length?S?S+this.text(x,v):this.text(x,v):S||""},p.prototype.end=m,p.prototype.text=l,p.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function g(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function y(x,S,v){var I=S.length-1;if(I<v)return 0;var A=g(S[I]);return A>=0?(A>0&&(x.lastNeed=A-1),A):--I<v||A===-2?0:(A=g(S[I]),A>=0?(A>0&&(x.lastNeed=A-2),A):--I<v||A===-2?0:(A=g(S[I]),A>=0?(A>0&&(A===2?A=0:x.lastNeed=A-3),A):0))}function c(x,S,v){if((S[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return x.lastNeed=2,""}}function d(x){var S=this.lastTotal-this.lastNeed,v=c(this,x);if(v!==void 0)return v;if(this.lastNeed<=x.length)return x.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,S,0,x.length),this.lastNeed-=x.length}function l(x,S){var v=y(this,x,S);if(!this.lastNeed)return x.toString("utf8",S);this.lastTotal=v;var I=x.length-(v-this.lastNeed);return x.copy(this.lastChar,0,I),x.toString("utf8",S,I)}function m(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+"":S}function R(x,S){if((x.length-S)%2===0){var v=x.toString("utf16le",S);if(v){var I=v.charCodeAt(v.length-1);if(I>=55296&&I<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],v.slice(0,-1)}return v}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",S,x.length-1)}function N(x){var S=x&&x.length?this.write(x):"";if(this.lastNeed){var v=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,v)}return S}function O(x,S){var v=(x.length-S)%3;return v===0?x.toString("base64",S):(this.lastNeed=3-v,this.lastTotal=3,v===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",S,x.length-v))}function k(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function M(x){return x.toString(this.encoding)}function C(x){return x&&x.length?this.write(x):""}return string_decoder}var ERR_STREAM_PREMATURE_CLOSE=errorsBrowser.codes.ERR_STREAM_PREMATURE_CLOSE;function once$1(r){var n=!1;return function(){if(!n){n=!0;for(var a=arguments.length,s=new Array(a),p=0;p<a;p++)s[p]=arguments[p];r.apply(this,s)}}}function noop$1(){}function isRequest$1(r){return r.setHeader&&typeof r.abort=="function"}function eos$1(r,n,a){if(typeof n=="function")return eos$1(r,null,n);n||(n={}),a=once$1(a||noop$1);var s=n.readable||n.readable!==!1&&r.readable,p=n.writable||n.writable!==!1&&r.writable,g=function(){r.writable||c()},y=r._writableState&&r._writableState.finished,c=function(){p=!1,y=!0,s||a.call(r)},d=r._readableState&&r._readableState.endEmitted,l=function(){s=!1,d=!0,p||a.call(r)},m=function(k){a.call(r,k)},R=function(){var k;if(s&&!d)return(!r._readableState||!r._readableState.ended)&&(k=new ERR_STREAM_PREMATURE_CLOSE),a.call(r,k);if(p&&!y)return(!r._writableState||!r._writableState.ended)&&(k=new ERR_STREAM_PREMATURE_CLOSE),a.call(r,k)},N=function(){r.req.on("finish",c)};return isRequest$1(r)?(r.on("complete",c),r.on("abort",R),r.req?N():r.on("request",N)):p&&!r._writableState&&(r.on("end",g),r.on("close",g)),r.on("end",l),r.on("finish",c),n.error!==!1&&r.on("error",m),r.on("close",R),function(){r.removeListener("complete",c),r.removeListener("abort",R),r.removeListener("request",N),r.req&&r.req.removeListener("finish",c),r.removeListener("end",g),r.removeListener("close",g),r.removeListener("finish",c),r.removeListener("end",l),r.removeListener("error",m),r.removeListener("close",R)}}var endOfStream=eos$1,async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var r;function n(v,I,A){return I=a(I),I in v?Object.defineProperty(v,I,{value:A,enumerable:!0,configurable:!0,writable:!0}):v[I]=A,v}function a(v){var I=s(v,"string");return typeof I=="symbol"?I:String(I)}function s(v,I){if(typeof v!="object"||v===null)return v;var A=v[Symbol.toPrimitive];if(A!==void 0){var D=A.call(v,I||"default");if(typeof D!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(v)}var p=endOfStream,g=Symbol("lastResolve"),y=Symbol("lastReject"),c=Symbol("error"),d=Symbol("ended"),l=Symbol("lastPromise"),m=Symbol("handlePromise"),R=Symbol("stream");function N(v,I){return{value:v,done:I}}function O(v){var I=v[g];if(I!==null){var A=v[R].read();A!==null&&(v[l]=null,v[g]=null,v[y]=null,I(N(A,!1)))}}function k(v){process.nextTick(O,v)}function M(v,I){return function(A,D){v.then(function(){if(I[d]){A(N(void 0,!0));return}I[m](A,D)},D)}}var C=Object.getPrototypeOf(function(){}),x=Object.setPrototypeOf((r={get stream(){return this[R]},next:function(){var I=this,A=this[c];if(A!==null)return Promise.reject(A);if(this[d])return Promise.resolve(N(void 0,!0));if(this[R].destroyed)return new Promise(function(L,ee){process.nextTick(function(){I[c]?ee(I[c]):L(N(void 0,!0))})});var D=this[l],G;if(D)G=new Promise(M(D,this));else{var q=this[R].read();if(q!==null)return Promise.resolve(N(q,!1));G=new Promise(this[m])}return this[l]=G,G}},n(r,Symbol.asyncIterator,function(){return this}),n(r,"return",function(){var I=this;return new Promise(function(A,D){I[R].destroy(null,function(G){if(G){D(G);return}A(N(void 0,!0))})})}),r),C),S=function(I){var A,D=Object.create(x,(A={},n(A,R,{value:I,writable:!0}),n(A,g,{value:null,writable:!0}),n(A,y,{value:null,writable:!0}),n(A,c,{value:null,writable:!0}),n(A,d,{value:I._readableState.endEmitted,writable:!0}),n(A,m,{value:function(q,L){var ee=D[R].read();ee?(D[l]=null,D[g]=null,D[y]=null,q(N(ee,!1))):(D[g]=q,D[y]=L)},writable:!0}),A));return D[l]=null,p(I,function(G){if(G&&G.code!=="ERR_STREAM_PREMATURE_CLOSE"){var q=D[y];q!==null&&(D[l]=null,D[g]=null,D[y]=null,q(G)),D[c]=G;return}var L=D[g];L!==null&&(D[l]=null,D[g]=null,D[y]=null,L(N(void 0,!0))),D[d]=!0}),I.on("readable",k.bind(null,D)),D};return async_iterator=S,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=L;var r;L.ReadableState=q,require$$3.EventEmitter;var n=function(u,T){return u.listeners(T).length},a=streamBrowser,s=buffer.Buffer,p=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function g(f){return s.from(f)}function y(f){return s.isBuffer(f)||f instanceof p}var c=require$$3,d;c&&c.debuglog?d=c.debuglog("stream"):d=function(){};var l=requireBuffer_list(),m=destroy_1,R=state,N=R.getHighWaterMark,O=errorsBrowser.codes,k=O.ERR_INVALID_ARG_TYPE,M=O.ERR_STREAM_PUSH_AFTER_EOF,C=O.ERR_METHOD_NOT_IMPLEMENTED,x=O.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,S,v,I;inherits_browserExports(L,a);var A=m.errorOrDestroy,D=["error","close","destroy","pause","resume"];function G(f,u,T){if(typeof f.prependListener=="function")return f.prependListener(u,T);!f._events||!f._events[u]?f.on(u,T):Array.isArray(f._events[u])?f._events[u].unshift(T):f._events[u]=[T,f._events[u]]}function q(f,u,T){r=r||require_stream_duplex(),f=f||{},typeof T!="boolean"&&(T=u instanceof r),this.objectMode=!!f.objectMode,T&&(this.objectMode=this.objectMode||!!f.readableObjectMode),this.highWaterMark=N(this,f,"readableHighWaterMark",T),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=f.emitClose!==!1,this.autoDestroy=!!f.autoDestroy,this.destroyed=!1,this.defaultEncoding=f.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,f.encoding&&(S||(S=requireString_decoder().StringDecoder),this.decoder=new S(f.encoding),this.encoding=f.encoding)}function L(f){if(r=r||require_stream_duplex(),!(this instanceof L))return new L(f);var u=this instanceof r;this._readableState=new q(f,this,u),this.readable=!0,f&&(typeof f.read=="function"&&(this._read=f.read),typeof f.destroy=="function"&&(this._destroy=f.destroy)),a.call(this)}Object.defineProperty(L.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(u){this._readableState&&(this._readableState.destroyed=u)}}),L.prototype.destroy=m.destroy,L.prototype._undestroy=m.undestroy,L.prototype._destroy=function(f,u){u(f)},L.prototype.push=function(f,u){var T=this._readableState,F;return T.objectMode?F=!0:typeof f=="string"&&(u=u||T.defaultEncoding,u!==T.encoding&&(f=s.from(f,u),u=""),F=!0),ee(this,f,u,!1,F)},L.prototype.unshift=function(f){return ee(this,f,null,!0,!1)};function ee(f,u,T,F,z){d("readableAddChunk",u);var j=f._readableState;if(u===null)j.reading=!1,ye(f,j);else{var W;if(z||(W=ge(j,u)),W)A(f,W);else if(j.objectMode||u&&u.length>0)if(typeof u!="string"&&!j.objectMode&&Object.getPrototypeOf(u)!==s.prototype&&(u=g(u)),F)j.endEmitted?A(f,new x):oe(f,j,u,!0);else if(j.ended)A(f,new M);else{if(j.destroyed)return!1;j.reading=!1,j.decoder&&!T?(u=j.decoder.write(u),j.objectMode||u.length!==0?oe(f,j,u,!1):ne(f,j)):oe(f,j,u,!1)}else F||(j.reading=!1,ne(f,j))}return!j.ended&&(j.length<j.highWaterMark||j.length===0)}function oe(f,u,T,F){u.flowing&&u.length===0&&!u.sync?(u.awaitDrain=0,f.emit("data",T)):(u.length+=u.objectMode?1:T.length,F?u.buffer.unshift(T):u.buffer.push(T),u.needReadable&&re(f)),ne(f,u)}function ge(f,u){var T;return!y(u)&&typeof u!="string"&&u!==void 0&&!f.objectMode&&(T=new k("chunk",["string","Buffer","Uint8Array"],u)),T}L.prototype.isPaused=function(){return this._readableState.flowing===!1},L.prototype.setEncoding=function(f){S||(S=requireString_decoder().StringDecoder);var u=new S(f);this._readableState.decoder=u,this._readableState.encoding=this._readableState.decoder.encoding;for(var T=this._readableState.buffer.head,F="";T!==null;)F+=u.write(T.data),T=T.next;return this._readableState.buffer.clear(),F!==""&&this._readableState.buffer.push(F),this._readableState.length=F.length,this};var ie=1073741824;function le(f){return f>=ie?f=ie:(f--,f|=f>>>1,f|=f>>>2,f|=f>>>4,f|=f>>>8,f|=f>>>16,f++),f}function se(f,u){return f<=0||u.length===0&&u.ended?0:u.objectMode?1:f!==f?u.flowing&&u.length?u.buffer.head.data.length:u.length:(f>u.highWaterMark&&(u.highWaterMark=le(f)),f<=u.length?f:u.ended?u.length:(u.needReadable=!0,0))}L.prototype.read=function(f){d("read",f),f=parseInt(f,10);var u=this._readableState,T=f;if(f!==0&&(u.emittedReadable=!1),f===0&&u.needReadable&&((u.highWaterMark!==0?u.length>=u.highWaterMark:u.length>0)||u.ended))return d("read: emitReadable",u.length,u.ended),u.length===0&&u.ended?B(this):re(this),null;if(f=se(f,u),f===0&&u.ended)return u.length===0&&B(this),null;var F=u.needReadable;d("need readable",F),(u.length===0||u.length-f<u.highWaterMark)&&(F=!0,d("length less than watermark",F)),u.ended||u.reading?(F=!1,d("reading or ended",F)):F&&(d("do read"),u.reading=!0,u.sync=!0,u.length===0&&(u.needReadable=!0),this._read(u.highWaterMark),u.sync=!1,u.reading||(f=se(T,u)));var z;return f>0?z=w(f,u):z=null,z===null?(u.needReadable=u.length<=u.highWaterMark,f=0):(u.length-=f,u.awaitDrain=0),u.length===0&&(u.ended||(u.needReadable=!0),T!==f&&u.ended&&B(this)),z!==null&&this.emit("data",z),z};function ye(f,u){if(d("onEofChunk"),!u.ended){if(u.decoder){var T=u.decoder.end();T&&T.length&&(u.buffer.push(T),u.length+=u.objectMode?1:T.length)}u.ended=!0,u.sync?re(f):(u.needReadable=!1,u.emittedReadable||(u.emittedReadable=!0,ce(f)))}}function re(f){var u=f._readableState;d("emitReadable",u.needReadable,u.emittedReadable),u.needReadable=!1,u.emittedReadable||(d("emitReadable",u.flowing),u.emittedReadable=!0,process.nextTick(ce,f))}function ce(f){var u=f._readableState;d("emitReadable_",u.destroyed,u.length,u.ended),!u.destroyed&&(u.length||u.ended)&&(f.emit("readable"),u.emittedReadable=!1),u.needReadable=!u.flowing&&!u.ended&&u.length<=u.highWaterMark,b(f)}function ne(f,u){u.readingMore||(u.readingMore=!0,process.nextTick(de,f,u))}function de(f,u){for(;!u.reading&&!u.ended&&(u.length<u.highWaterMark||u.flowing&&u.length===0);){var T=u.length;if(d("maybeReadMore read 0"),f.read(0),T===u.length)break}u.readingMore=!1}L.prototype._read=function(f){A(this,new C("_read()"))},L.prototype.pipe=function(f,u){var T=this,F=this._readableState;switch(F.pipesCount){case 0:F.pipes=f;break;case 1:F.pipes=[F.pipes,f];break;default:F.pipes.push(f);break}F.pipesCount+=1,d("pipe count=%d opts=%j",F.pipesCount,u);var z=(!u||u.end!==!1)&&f!==process.stdout&&f!==process.stderr,j=z?ae:ue;F.endEmitted?process.nextTick(j):T.once("end",j),f.on("unpipe",W);function W(i,e){d("onunpipe"),i===T&&e&&e.hasUnpiped===!1&&(e.hasUnpiped=!0,xe())}function ae(){d("onend"),f.end()}var me=Y(T);f.on("drain",me);var we=!1;function xe(){d("cleanup"),f.removeListener("close",_e),f.removeListener("finish",Z),f.removeListener("drain",me),f.removeListener("error",fe),f.removeListener("unpipe",W),T.removeListener("end",ae),T.removeListener("end",ue),T.removeListener("data",Q),we=!0,F.awaitDrain&&(!f._writableState||f._writableState.needDrain)&&me()}T.on("data",Q);function Q(i){d("ondata");var e=f.write(i);d("dest.write",e),e===!1&&((F.pipesCount===1&&F.pipes===f||F.pipesCount>1&&P(F.pipes,f)!==-1)&&!we&&(d("false write response, pause",F.awaitDrain),F.awaitDrain++),T.pause())}function fe(i){d("onerror",i),ue(),f.removeListener("error",fe),n(f,"error")===0&&A(f,i)}G(f,"error",fe);function _e(){f.removeListener("finish",Z),ue()}f.once("close",_e);function Z(){d("onfinish"),f.removeListener("close",_e),ue()}f.once("finish",Z);function ue(){d("unpipe"),T.unpipe(f)}return f.emit("pipe",T),F.flowing||(d("pipe resume"),T.resume()),f};function Y(f){return function(){var T=f._readableState;d("pipeOnDrain",T.awaitDrain),T.awaitDrain&&T.awaitDrain--,T.awaitDrain===0&&n(f,"data")&&(T.flowing=!0,b(f))}}L.prototype.unpipe=function(f){var u=this._readableState,T={hasUnpiped:!1};if(u.pipesCount===0)return this;if(u.pipesCount===1)return f&&f!==u.pipes?this:(f||(f=u.pipes),u.pipes=null,u.pipesCount=0,u.flowing=!1,f&&f.emit("unpipe",this,T),this);if(!f){var F=u.pipes,z=u.pipesCount;u.pipes=null,u.pipesCount=0,u.flowing=!1;for(var j=0;j<z;j++)F[j].emit("unpipe",this,{hasUnpiped:!1});return this}var W=P(u.pipes,f);return W===-1?this:(u.pipes.splice(W,1),u.pipesCount-=1,u.pipesCount===1&&(u.pipes=u.pipes[0]),f.emit("unpipe",this,T),this)},L.prototype.on=function(f,u){var T=a.prototype.on.call(this,f,u),F=this._readableState;return f==="data"?(F.readableListening=this.listenerCount("readable")>0,F.flowing!==!1&&this.resume()):f==="readable"&&!F.endEmitted&&!F.readableListening&&(F.readableListening=F.needReadable=!0,F.flowing=!1,F.emittedReadable=!1,d("on readable",F.length,F.reading),F.length?re(this):F.reading||process.nextTick(te,this)),T},L.prototype.addListener=L.prototype.on,L.prototype.removeListener=function(f,u){var T=a.prototype.removeListener.call(this,f,u);return f==="readable"&&process.nextTick(X,this),T},L.prototype.removeAllListeners=function(f){var u=a.prototype.removeAllListeners.apply(this,arguments);return(f==="readable"||f===void 0)&&process.nextTick(X,this),u};function X(f){var u=f._readableState;u.readableListening=f.listenerCount("readable")>0,u.resumeScheduled&&!u.paused?u.flowing=!0:f.listenerCount("data")>0&&f.resume()}function te(f){d("readable nexttick read 0"),f.read(0)}L.prototype.resume=function(){var f=this._readableState;return f.flowing||(d("resume"),f.flowing=!f.readableListening,pe(this,f)),f.paused=!1,this};function pe(f,u){u.resumeScheduled||(u.resumeScheduled=!0,process.nextTick(he,f,u))}function he(f,u){d("resume",u.reading),u.reading||f.read(0),u.resumeScheduled=!1,f.emit("resume"),b(f),u.flowing&&!u.reading&&f.read(0)}L.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function b(f){var u=f._readableState;for(d("flow",u.flowing);u.flowing&&f.read()!==null;);}L.prototype.wrap=function(f){var u=this,T=this._readableState,F=!1;f.on("end",function(){if(d("wrapped end"),T.decoder&&!T.ended){var W=T.decoder.end();W&&W.length&&u.push(W)}u.push(null)}),f.on("data",function(W){if(d("wrapped data"),T.decoder&&(W=T.decoder.write(W)),!(T.objectMode&&W==null)&&!(!T.objectMode&&(!W||!W.length))){var ae=u.push(W);ae||(F=!0,f.pause())}});for(var z in f)this[z]===void 0&&typeof f[z]=="function"&&(this[z]=function(ae){return function(){return f[ae].apply(f,arguments)}}(z));for(var j=0;j<D.length;j++)f.on(D[j],this.emit.bind(this,D[j]));return this._read=function(W){d("wrapped _read",W),F&&(F=!1,f.resume())},this},typeof Symbol=="function"&&(L.prototype[Symbol.asyncIterator]=function(){return v===void 0&&(v=requireAsync_iterator()),v(this)}),Object.defineProperty(L.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(L.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(L.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(u){this._readableState&&(this._readableState.flowing=u)}}),L._fromList=w,Object.defineProperty(L.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function w(f,u){if(u.length===0)return null;var T;return u.objectMode?T=u.buffer.shift():!f||f>=u.length?(u.decoder?T=u.buffer.join(""):u.buffer.length===1?T=u.buffer.first():T=u.buffer.concat(u.length),u.buffer.clear()):T=u.buffer.consume(f,u.decoder),T}function B(f){var u=f._readableState;d("endReadable",u.endEmitted),u.endEmitted||(u.ended=!0,process.nextTick(U,u,f))}function U(f,u){if(d("endReadableNT",f.endEmitted,f.length),!f.endEmitted&&f.length===0&&(f.endEmitted=!0,u.readable=!1,u.emit("end"),f.autoDestroy)){var T=u._writableState;(!T||T.autoDestroy&&T.finished)&&u.destroy()}}typeof Symbol=="function"&&(L.from=function(f,u){return I===void 0&&(I=requireFromBrowser()),I(L,f,u)});function P(f,u){for(var T=0,F=f.length;T<F;T++)if(f[T]===u)return T;return-1}return _stream_readable}var _stream_transform=Transform$1,_require$codes$1=errorsBrowser.codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes$1.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes$1.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes$1.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes$1.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=require_stream_duplex();inherits_browserExports(Transform$1,Duplex);function afterTransform(r,n){var a=this._transformState;a.transforming=!1;var s=a.writecb;if(s===null)return this.emit("error",new ERR_MULTIPLE_CALLBACK);a.writechunk=null,a.writecb=null,n!=null&&this.push(n),s(r);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function Transform$1(r){if(!(this instanceof Transform$1))return new Transform$1(r);Duplex.call(this,r),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",prefinish)}function prefinish(){var r=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(n,a){done(r,n,a)}):done(this,null,null)}Transform$1.prototype.push=function(r,n){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,r,n)};Transform$1.prototype._transform=function(r,n,a){a(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))};Transform$1.prototype._write=function(r,n,a){var s=this._transformState;if(s.writecb=a,s.writechunk=r,s.writeencoding=n,!s.transforming){var p=this._readableState;(s.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}};Transform$1.prototype._read=function(r){var n=this._transformState;n.writechunk!==null&&!n.transforming?(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform)):n.needTransform=!0};Transform$1.prototype._destroy=function(r,n){Duplex.prototype._destroy.call(this,r,function(a){n(a)})};function done(r,n,a){if(n)return r.emit("error",n);if(a!=null&&r.push(a),r._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(r._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return r.push(null)}var _stream_passthrough=PassThrough,Transform=_stream_transform;inherits_browserExports(PassThrough,Transform);function PassThrough(r){if(!(this instanceof PassThrough))return new PassThrough(r);Transform.call(this,r)}PassThrough.prototype._transform=function(r,n,a){a(null,r)};var eos;function once(r){var n=!1;return function(){n||(n=!0,r.apply(void 0,arguments))}}var _require$codes=errorsBrowser.codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(r){if(r)throw r}function isRequest(r){return r.setHeader&&typeof r.abort=="function"}function destroyer(r,n,a,s){s=once(s);var p=!1;r.on("close",function(){p=!0}),eos===void 0&&(eos=endOfStream),eos(r,{readable:n,writable:a},function(y){if(y)return s(y);p=!0,s()});var g=!1;return function(y){if(!p&&!g){if(g=!0,isRequest(r))return r.abort();if(typeof r.destroy=="function")return r.destroy();s(y||new ERR_STREAM_DESTROYED("pipe"))}}}function call(r){r()}function pipe(r,n){return r.pipe(n)}function popCallback(r){return!r.length||typeof r[r.length-1]!="function"?noop:r.pop()}function pipeline(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=popCallback(n);if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new ERR_MISSING_ARGS("streams");var p,g=n.map(function(y,c){var d=c<n.length-1,l=c>0;return destroyer(y,d,l,function(m){p||(p=m),m&&g.forEach(call),!d&&(g.forEach(call),s(p))})});return n.reduce(pipe)}var pipeline_1=pipeline;(function(r,n){n=r.exports=require_stream_readable(),n.Stream=n,n.Readable=n,n.Writable=require_stream_writable(),n.Duplex=require_stream_duplex(),n.Transform=_stream_transform,n.PassThrough=_stream_passthrough,n.finished=endOfStream,n.pipeline=pipeline_1})(readableBrowser,readableBrowser.exports);var readableBrowserExports=readableBrowser.exports;Object.defineProperty(lib$2,"__esModule",{value:!0});lib$2.ReadableWebToNodeStream=void 0;const readable_stream_1=readableBrowserExports;class ReadableWebToNodeStream extends readable_stream_1.Readable{constructor(n){super(),this.bytesRead=0,this.released=!1,this.reader=n.getReader()}async _read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read();const n=await this.pendingRead;delete this.pendingRead,n.done||this.released?this.push(null):(this.bytesRead+=n.value.length,this.push(n.value))}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}lib$2.ReadableWebToNodeStream=ReadableWebToNodeStream;var lib$1={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.AnsiStringType=r.StringType=r.BufferType=r.Uint8ArrayType=r.IgnoreType=r.Float80_LE=r.Float80_BE=r.Float64_LE=r.Float64_BE=r.Float32_LE=r.Float32_BE=r.Float16_LE=r.Float16_BE=r.INT64_BE=r.UINT64_BE=r.INT64_LE=r.UINT64_LE=r.INT32_LE=r.INT32_BE=r.INT24_BE=r.INT24_LE=r.INT16_LE=r.INT16_BE=r.INT8=r.UINT32_BE=r.UINT32_LE=r.UINT24_BE=r.UINT24_LE=r.UINT16_BE=r.UINT16_LE=r.UINT8=void 0;const n=ieee754;function a(d){return new DataView(d.buffer,d.byteOffset)}r.UINT8={len:1,get(d,l){return a(d).getUint8(l)},put(d,l,m){return a(d).setUint8(l,m),l+1}},r.UINT16_LE={len:2,get(d,l){return a(d).getUint16(l,!0)},put(d,l,m){return a(d).setUint16(l,m,!0),l+2}},r.UINT16_BE={len:2,get(d,l){return a(d).getUint16(l)},put(d,l,m){return a(d).setUint16(l,m),l+2}},r.UINT24_LE={len:3,get(d,l){const m=a(d);return m.getUint8(l)+(m.getUint16(l+1,!0)<<8)},put(d,l,m){const R=a(d);return R.setUint8(l,m&255),R.setUint16(l+1,m>>8,!0),l+3}},r.UINT24_BE={len:3,get(d,l){const m=a(d);return(m.getUint16(l)<<8)+m.getUint8(l+2)},put(d,l,m){const R=a(d);return R.setUint16(l,m>>8),R.setUint8(l+2,m&255),l+3}},r.UINT32_LE={len:4,get(d,l){return a(d).getUint32(l,!0)},put(d,l,m){return a(d).setUint32(l,m,!0),l+4}},r.UINT32_BE={len:4,get(d,l){return a(d).getUint32(l)},put(d,l,m){return a(d).setUint32(l,m),l+4}},r.INT8={len:1,get(d,l){return a(d).getInt8(l)},put(d,l,m){return a(d).setInt8(l,m),l+1}},r.INT16_BE={len:2,get(d,l){return a(d).getInt16(l)},put(d,l,m){return a(d).setInt16(l,m),l+2}},r.INT16_LE={len:2,get(d,l){return a(d).getInt16(l,!0)},put(d,l,m){return a(d).setInt16(l,m,!0),l+2}},r.INT24_LE={len:3,get(d,l){const m=r.UINT24_LE.get(d,l);return m>8388607?m-16777216:m},put(d,l,m){const R=a(d);return R.setUint8(l,m&255),R.setUint16(l+1,m>>8,!0),l+3}},r.INT24_BE={len:3,get(d,l){const m=r.UINT24_BE.get(d,l);return m>8388607?m-16777216:m},put(d,l,m){const R=a(d);return R.setUint16(l,m>>8),R.setUint8(l+2,m&255),l+3}},r.INT32_BE={len:4,get(d,l){return a(d).getInt32(l)},put(d,l,m){return a(d).setInt32(l,m),l+4}},r.INT32_LE={len:4,get(d,l){return a(d).getInt32(l,!0)},put(d,l,m){return a(d).setInt32(l,m,!0),l+4}},r.UINT64_LE={len:8,get(d,l){return a(d).getBigUint64(l,!0)},put(d,l,m){return a(d).setBigUint64(l,m,!0),l+8}},r.INT64_LE={len:8,get(d,l){return a(d).getBigInt64(l,!0)},put(d,l,m){return a(d).setBigInt64(l,m,!0),l+8}},r.UINT64_BE={len:8,get(d,l){return a(d).getBigUint64(l)},put(d,l,m){return a(d).setBigUint64(l,m),l+8}},r.INT64_BE={len:8,get(d,l){return a(d).getBigInt64(l)},put(d,l,m){return a(d).setBigInt64(l,m),l+8}},r.Float16_BE={len:2,get(d,l){return n.read(d,l,!1,10,this.len)},put(d,l,m){return n.write(d,m,l,!1,10,this.len),l+this.len}},r.Float16_LE={len:2,get(d,l){return n.read(d,l,!0,10,this.len)},put(d,l,m){return n.write(d,m,l,!0,10,this.len),l+this.len}},r.Float32_BE={len:4,get(d,l){return a(d).getFloat32(l)},put(d,l,m){return a(d).setFloat32(l,m),l+4}},r.Float32_LE={len:4,get(d,l){return a(d).getFloat32(l,!0)},put(d,l,m){return a(d).setFloat32(l,m,!0),l+4}},r.Float64_BE={len:8,get(d,l){return a(d).getFloat64(l)},put(d,l,m){return a(d).setFloat64(l,m),l+8}},r.Float64_LE={len:8,get(d,l){return a(d).getFloat64(l,!0)},put(d,l,m){return a(d).setFloat64(l,m,!0),l+8}},r.Float80_BE={len:10,get(d,l){return n.read(d,l,!1,63,this.len)},put(d,l,m){return n.write(d,m,l,!1,63,this.len),l+this.len}},r.Float80_LE={len:10,get(d,l){return n.read(d,l,!0,63,this.len)},put(d,l,m){return n.write(d,m,l,!0,63,this.len),l+this.len}};class s{constructor(l){this.len=l}get(l,m){}}r.IgnoreType=s;class p{constructor(l){this.len=l}get(l,m){return l.subarray(m,m+this.len)}}r.Uint8ArrayType=p;class g{constructor(l){this.len=l}get(l,m){return Buffer.from(l.subarray(m,m+this.len))}}r.BufferType=g;class y{constructor(l,m){this.len=l,this.encoding=m}get(l,m){return Buffer.from(l).toString(this.encoding,m,m+this.len)}}r.StringType=y;class c{constructor(l){this.len=l}static decode(l,m,R){let N="";for(let O=m;O<R;++O)N+=c.codePointToString(c.singleByteDecoder(l[O]));return N}static inRange(l,m,R){return m<=l&&l<=R}static codePointToString(l){return l<=65535?String.fromCharCode(l):(l-=65536,String.fromCharCode((l>>10)+55296,(l&1023)+56320))}static singleByteDecoder(l){if(c.inRange(l,0,127))return l;const m=c.windows1252[l-128];if(m===null)throw Error("invaliding encoding");return m}get(l,m=0){return c.decode(l,m,m+this.len)}}r.AnsiStringType=c,c.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]})(lib$1);var core$1={},ReadStreamTokenizer$1={},AbstractTokenizer$1={},lib={},EndOfFileStream={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.EndOfStreamError=r.defaultMessages=void 0,r.defaultMessages="End-Of-Stream";class n extends Error{constructor(){super(r.defaultMessages)}}r.EndOfStreamError=n})(EndOfFileStream);var StreamReader={},Deferred$1={};Object.defineProperty(Deferred$1,"__esModule",{value:!0});Deferred$1.Deferred=void 0;class Deferred{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((n,a)=>{this.reject=a,this.resolve=n})}}Deferred$1.Deferred=Deferred;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.StreamReader=r.EndOfStreamError=void 0;const n=EndOfFileStream,a=Deferred$1;var s=EndOfFileStream;Object.defineProperty(r,"EndOfStreamError",{enumerable:!0,get:function(){return s.EndOfStreamError}});const p=1*1024*1024;class g{constructor(c){if(this.s=c,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!c.read||!c.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new n.EndOfStreamError)),this.s.once("error",d=>this.reject(d)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(c,d,l){const m=await this.read(c,d,l);return this.peekQueue.push(c.subarray(d,d+m)),m}async read(c,d,l){if(l===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new n.EndOfStreamError;let m=l,R=0;for(;this.peekQueue.length>0&&m>0;){const N=this.peekQueue.pop();if(!N)throw new Error("peekData should be defined");const O=Math.min(N.length,m);c.set(N.subarray(0,O),d+R),R+=O,m-=O,O<N.length&&this.peekQueue.push(N.subarray(O))}for(;m>0&&!this.endOfStream;){const N=Math.min(m,p),O=await this.readFromStream(c,d+R,N);if(R+=O,O<N)break;m-=O}return R}async readFromStream(c,d,l){const m=this.s.read(l);if(m)return c.set(m,d),m.length;{const R={buffer:c,offset:d,length:l,deferred:new a.Deferred};return this.deferred=R.deferred,this.s.once("readable",()=>{this.readDeferred(R)}),R.deferred.promise}}readDeferred(c){const d=this.s.read(c.length);d?(c.buffer.set(d,c.offset),c.deferred.resolve(d.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(c)})}reject(c){this.endOfStream=!0,this.deferred&&(this.deferred.reject(c),this.deferred=null)}}r.StreamReader=g})(StreamReader);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.StreamReader=r.EndOfStreamError=void 0;var n=EndOfFileStream;Object.defineProperty(r,"EndOfStreamError",{enumerable:!0,get:function(){return n.EndOfStreamError}});var a=StreamReader;Object.defineProperty(r,"StreamReader",{enumerable:!0,get:function(){return a.StreamReader}})})(lib);Object.defineProperty(AbstractTokenizer$1,"__esModule",{value:!0});AbstractTokenizer$1.AbstractTokenizer=void 0;const peek_readable_1$2=lib;class AbstractTokenizer{constructor(n){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=n||{}}async readToken(n,a=this.position){const s=Buffer.alloc(n.len);if(await this.readBuffer(s,{position:a})<n.len)throw new peek_readable_1$2.EndOfStreamError;return n.get(s,0)}async peekToken(n,a=this.position){const s=Buffer.alloc(n.len);if(await this.peekBuffer(s,{position:a})<n.len)throw new peek_readable_1$2.EndOfStreamError;return n.get(s,0)}async readNumber(n){if(await this.readBuffer(this.numBuffer,{length:n.len})<n.len)throw new peek_readable_1$2.EndOfStreamError;return n.get(this.numBuffer,0)}async peekNumber(n){if(await this.peekBuffer(this.numBuffer,{length:n.len})<n.len)throw new peek_readable_1$2.EndOfStreamError;return n.get(this.numBuffer,0)}async ignore(n){if(this.fileInfo.size!==void 0){const a=this.fileInfo.size-this.position;if(n>a)return this.position+=a,a}return this.position+=n,n}async close(){}normalizeOptions(n,a){if(a&&a.position!==void 0&&a.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return a?{mayBeLess:a.mayBeLess===!0,offset:a.offset?a.offset:0,length:a.length?a.length:n.length-(a.offset?a.offset:0),position:a.position?a.position:this.position}:{mayBeLess:!1,offset:0,length:n.length,position:this.position}}}AbstractTokenizer$1.AbstractTokenizer=AbstractTokenizer;Object.defineProperty(ReadStreamTokenizer$1,"__esModule",{value:!0});ReadStreamTokenizer$1.ReadStreamTokenizer=void 0;const AbstractTokenizer_1$1=AbstractTokenizer$1,peek_readable_1$1=lib,maxBufferSize=256e3;class ReadStreamTokenizer extends AbstractTokenizer_1$1.AbstractTokenizer{constructor(n,a){super(a),this.streamReader=new peek_readable_1$1.StreamReader(n)}async getFileInfo(){return this.fileInfo}async readBuffer(n,a){const s=this.normalizeOptions(n,a),p=s.position-this.position;if(p>0)return await this.ignore(p),this.readBuffer(n,a);if(p<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(s.length===0)return 0;const g=await this.streamReader.read(n,s.offset,s.length);if(this.position+=g,(!a||!a.mayBeLess)&&g<s.length)throw new peek_readable_1$1.EndOfStreamError;return g}async peekBuffer(n,a){const s=this.normalizeOptions(n,a);let p=0;if(s.position){const g=s.position-this.position;if(g>0){const y=new Uint8Array(s.length+g);return p=await this.peekBuffer(y,{mayBeLess:s.mayBeLess}),n.set(y.subarray(g),s.offset),p-g}else if(g<0)throw new Error("Cannot peek from a negative offset in a stream")}if(s.length>0){try{p=await this.streamReader.peek(n,s.offset,s.length)}catch(g){if(a&&a.mayBeLess&&g instanceof peek_readable_1$1.EndOfStreamError)return 0;throw g}if(!s.mayBeLess&&p<s.length)throw new peek_readable_1$1.EndOfStreamError}return p}async ignore(n){const a=Math.min(maxBufferSize,n),s=new Uint8Array(a);let p=0;for(;p<n;){const g=n-p,y=await this.readBuffer(s,{length:Math.min(a,g)});if(y<0)return y;p+=y}return p}}ReadStreamTokenizer$1.ReadStreamTokenizer=ReadStreamTokenizer;var BufferTokenizer$1={};Object.defineProperty(BufferTokenizer$1,"__esModule",{value:!0});BufferTokenizer$1.BufferTokenizer=void 0;const peek_readable_1=lib,AbstractTokenizer_1=AbstractTokenizer$1;class BufferTokenizer extends AbstractTokenizer_1.AbstractTokenizer{constructor(n,a){super(a),this.uint8Array=n,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:n.length}async readBuffer(n,a){if(a&&a.position){if(a.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=a.position}const s=await this.peekBuffer(n,a);return this.position+=s,s}async peekBuffer(n,a){const s=this.normalizeOptions(n,a),p=Math.min(this.uint8Array.length-s.position,s.length);if(!s.mayBeLess&&p<s.length)throw new peek_readable_1.EndOfStreamError;return n.set(this.uint8Array.subarray(s.position,s.position+p),s.offset),p}async close(){}}BufferTokenizer$1.BufferTokenizer=BufferTokenizer;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.fromBuffer=r.fromStream=r.EndOfStreamError=void 0;const n=ReadStreamTokenizer$1,a=BufferTokenizer$1;var s=lib;Object.defineProperty(r,"EndOfStreamError",{enumerable:!0,get:function(){return s.EndOfStreamError}});function p(y,c){return c=c||{},new n.ReadStreamTokenizer(y,c)}r.fromStream=p;function g(y,c){return new a.BufferTokenizer(y,c)}r.fromBuffer=g})(core$1);var util={};util.stringToBytes=r=>[...r].map(n=>n.charCodeAt(0));util.tarHeaderChecksumMatches=(r,n=0)=>{const a=parseInt(r.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(a))return!1;let s=8*32;for(let p=n;p<n+148;p++)s+=r[p];for(let p=n+156;p<n+512;p++)s+=r[p];return a===s};util.uint32SyncSafeToken={get:(r,n)=>r[n+3]&127|r[n+2]<<7|r[n+1]<<14|r[n]<<21,len:4};var supported$1={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]};const Token=lib$1,strtok3=core$1,{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=util,supported=supported$1,minimumBytes=4100;async function fromStream(r){const n=await strtok3.fromStream(r);try{return await fromTokenizer(n)}finally{await n.close()}}async function fromBuffer(r){if(!(r instanceof Uint8Array||r instanceof ArrayBuffer||Buffer.isBuffer(r)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof r}\``);const n=r instanceof Buffer?r:Buffer.from(r);if(!(n&&n.length>1))return;const a=strtok3.fromBuffer(n);return fromTokenizer(a)}function _check(r,n,a){a={offset:0,...a};for(const[s,p]of n.entries())if(a.mask){if(p!==(a.mask[s]&r[s+a.offset]))return!1}else if(p!==r[s+a.offset])return!1;return!0}async function fromTokenizer(r){try{return _fromTokenizer(r)}catch(n){if(!(n instanceof strtok3.EndOfStreamError))throw n}}async function _fromTokenizer(r){let n=Buffer.alloc(minimumBytes);const a=12,s=(g,y)=>_check(n,g,y),p=(g,y)=>s(stringToBytes(g),y);if(r.fileInfo.size||(r.fileInfo.size=Number.MAX_SAFE_INTEGER),await r.peekBuffer(n,{length:a,mayBeLess:!0}),s([66,77]))return{ext:"bmp",mime:"image/bmp"};if(s([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(s([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(s([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(s([37,33]))return await r.peekBuffer(n,{length:24,mayBeLess:!0}),p("PS-Adobe-",{offset:2})&&p(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(s([31,160])||s([31,157]))return{ext:"Z",mime:"application/x-compress"};if(s([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(s([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(s([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(s([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(p("ID3")){await r.ignore(6);const g=await r.readToken(uint32SyncSafeToken);return r.position+g>r.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await r.ignore(g),fromTokenizer(r))}if(p("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((n[0]===67||n[0]===70)&&s([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(s([71,73,70]))return{ext:"gif",mime:"image/gif"};if(p("FLIF"))return{ext:"flif",mime:"image/flif"};if(p("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(p("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(p("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(p("FORM"))return{ext:"aif",mime:"audio/aiff"};if(p("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(s([80,75,3,4])){try{for(;r.position+30<r.fileInfo.size;){await r.readBuffer(n,{length:30});const g={compressedSize:n.readUInt32LE(18),uncompressedSize:n.readUInt32LE(22),filenameLength:n.readUInt16LE(26),extraFieldLength:n.readUInt16LE(28)};if(g.filename=await r.readToken(new Token.StringType(g.filenameLength,"utf-8")),await r.ignore(g.extraFieldLength),g.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(g.filename.endsWith(".rels")||g.filename.endsWith(".xml"))switch(g.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(g.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(g.filename.startsWith("3D/")&&g.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(g.filename==="mimetype"&&g.compressedSize===g.uncompressedSize)switch(await r.readToken(new Token.StringType(g.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(g.compressedSize===0){let y=-1;for(;y<0&&r.position<r.fileInfo.size;)await r.peekBuffer(n,{mayBeLess:!0}),y=n.indexOf("504B0304",0,"hex"),await r.ignore(y>=0?y:n.length)}else await r.ignore(g.compressedSize)}}catch(g){if(!(g instanceof strtok3.EndOfStreamError))throw g}return{ext:"zip",mime:"application/zip"}}if(p("OggS")){await r.ignore(28);const g=Buffer.alloc(8);return await r.readBuffer(g),_check(g,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(g,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(g,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(g,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(g,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(g,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(s([80,75])&&(n[2]===3||n[2]===5||n[2]===7)&&(n[3]===4||n[3]===6||n[3]===8))return{ext:"zip",mime:"application/zip"};if(p("ftyp",{offset:4})&&n[8]&96){const g=n.toString("binary",8,12).replace("\0"," ").trim();switch(g){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return g.startsWith("3g")?g.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(p("MThd"))return{ext:"mid",mime:"audio/midi"};if(p("wOFF")&&(s([0,1,0,0],{offset:4})||p("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(p("wOF2")&&(s([0,1,0,0],{offset:4})||p("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(s([212,195,178,161])||s([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(p("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(p("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(p("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(s([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(p("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(p("%PDF")){await r.ignore(1350);const g=10*1024*1024,y=Buffer.alloc(Math.min(g,r.fileInfo.size));return await r.readBuffer(y,{mayBeLess:!0}),y.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(s([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(s([73,73,42,0]))return p("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:s([28,0,254,0],{offset:8})||s([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:s([8,0,0,0],{offset:4})&&(s([45,0,254,0],{offset:8})||s([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(n=Buffer.alloc(24),await r.peekBuffer(n),(s([16,251,134,1],{offset:4})||s([8,0,0,0],{offset:4}))&&s([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(s([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(p("MAC "))return{ext:"ape",mime:"audio/ape"};if(s([26,69,223,163])){async function g(){const m=await r.peekNumber(Token.UINT8);let R=128,N=0;for(;!(m&R)&&R!==0;)++N,R>>=1;const O=Buffer.alloc(N+1);return await r.readBuffer(O),O}async function y(){const m=await g(),R=await g();R[0]^=128>>R.length-1;const N=Math.min(6,R.length);return{id:m.readUIntBE(0,m.length),len:R.readUIntBE(R.length-N,N)}}async function c(m,R){for(;R>0;){const N=await y();if(N.id===17026)return r.readToken(new Token.StringType(N.len,"utf-8"));await r.ignore(N.len),--R}}const d=await y();switch(await c(1,d.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(s([82,73,70,70])){if(s([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(s([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(s([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(p("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(s([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(p("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(p("MSCF")||p("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(s([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(s([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(s([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(s([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(p("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(p("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(s([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(p("IMPM"))return{ext:"it",mime:"audio/x-it"};if(p("-lh0-",{offset:2})||p("-lh1-",{offset:2})||p("-lh2-",{offset:2})||p("-lh3-",{offset:2})||p("-lh4-",{offset:2})||p("-lh5-",{offset:2})||p("-lh6-",{offset:2})||p("-lh7-",{offset:2})||p("-lzs-",{offset:2})||p("-lz4-",{offset:2})||p("-lz5-",{offset:2})||p("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(s([0,0,1,186])){if(s([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(s([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(p("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(s([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(p("<?xml "))return{ext:"xml",mime:"application/xml"};if(s([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(s([82,97,114,33,26,7])&&(n[6]===0||n[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(p("solid "))return{ext:"stl",mime:"model/stl"};if(p("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(p("!<arch>"))return await r.ignore(8),await r.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(s([137,80,78,71,13,10,26,10])){await r.ignore(8);async function g(){return{length:await r.readToken(Token.INT32_BE),type:await r.readToken(new Token.StringType(4,"binary"))}}do{const y=await g();if(y.length<0)return;switch(y.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await r.ignore(y.length+4)}}while(r.position+8<r.fileInfo.size);return{ext:"png",mime:"image/png"}}if(s([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(s([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(s([102,114,101,101],{offset:4})||s([109,100,97,116],{offset:4})||s([109,111,111,118],{offset:4})||s([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(s([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(p("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(s([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(s([48,38,178,117,142,102,207,17,166,217])){async function g(){const y=Buffer.alloc(16);return await r.readBuffer(y),{id:y,size:Number(await r.readToken(Token.UINT64_LE))}}for(await r.ignore(30);r.position+24<r.fileInfo.size;){const y=await g();let c=y.size-24;if(_check(y.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const d=Buffer.alloc(16);if(c-=await r.readBuffer(d),_check(d,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(d,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await r.ignore(c)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(s([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((s([126,16,4])||s([126,24,4]))&&s([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(s([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(s([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await r.ignore(20),await r.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(s([255,10])||s([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(s([0,0,1,186])||s([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(s([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(s([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(s([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(s([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await r.peekBuffer(n,{length:Math.min(256,r.fileInfo.size),mayBeLess:!0}),p("BEGIN:")){if(p("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(p("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(p("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(p("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(p("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(s([4,0,0,0])&&n.length>=16){const g=n.readUInt32LE(12);if(g>12&&n.length>=g+16)try{const y=n.slice(16,g+16).toString();if(JSON.parse(y).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(s([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(p("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(s([71],{offset:4})&&(s([71],{offset:192})||s([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(s([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(s([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(s([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(s([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(s([76,80],{offset:34})&&(s([0,0,1],{offset:8})||s([1,0,2],{offset:8})||s([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(s([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await r.peekBuffer(n,{length:Math.min(512,r.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(n))return{ext:"tar",mime:"application/x-tar"};if(s([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(p("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(n.length>=2&&s([255,224],{offset:0,mask:[255,224]})){if(s([16],{offset:1,mask:[22]}))return s([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(s([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(s([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(s([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const r=new stream.PassThrough;let n;stream.pipeline?n=stream.pipeline(readableStream,r,()=>{}):n=readableStream.pipe(r);const a=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const s=await fromBuffer(a);r.fileType=s}catch(s){reject(s)}resolve(n)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream};Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}});Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}});var core=fileType;(function(r){const{ReadableWebToNodeStream:n}=lib$2,a=core;async function s(y){const c=new n(y),d=await a.fromStream(c);return await c.close(),d}async function p(y){const c=await g(y);return a.fromBuffer(Buffer.from(c))}function g(y){return y.arrayBuffer?y.arrayBuffer():new Promise((c,d)=>{const l=new FileReader;l.addEventListener("loadend",m=>{c(m.target.result)}),l.addEventListener("error",m=>{d(new Error(m.message))}),l.addEventListener("abort",m=>{d(new Error(m.type))}),l.readAsArrayBuffer(y)})}Object.assign(r.exports,a,{fromStream:s,fromBlob:p})})(browser$1);var browserExports=browser$1.exports;const FileType=getDefaultExportFromCjs(browserExports);window.Buffer=window.Buffer||buffer.Buffer;const network=getNetwork(),contractInfo=getContractInfo(),ContractHelper={async resolveSTX10InfoByTick(r){if(!r)return;const n=[stringAsciiCV(r)],a={contractAddress:contractInfo.defaultContractAddress,contractName:contractInfo.inscriptionsContract.name,functionName:"get_stx10_info_by_tick",functionArgs:n,network,senderAddress:contractInfo.defaultContractAddress},s=await callReadOnlyFunction(a);if(!cvToValue(s.data.attr))return{block:0,tokenId:0,max:0,lim:0,supply:0};const g=s.data.attr.value.data;return{block:cvToValue(g.block),tokenId:cvToValue(g.tokenId),max:cvToValue(g.max),lim:cvToValue(g.lim),supply:cvToValue(s.data.supply)}},async loadSTX10Balance(r,n){if(!r||!n)return;const a=[stringAsciiCV(r),standardPrincipalCV(n)],s={contractAddress:contractInfo.defaultContractAddress,contractName:contractInfo.inscriptionsContract.name,functionName:"get_stx10_balance",functionArgs:a,network,senderAddress:contractInfo.defaultContractAddress},p=await callReadOnlyFunction(s);return cvToValue(p)},async loadSummary(){const r=[],n={contractAddress:contractInfo.defaultContractAddress,contractName:contractInfo.inscriptionsContract.name,functionName:"get_summary",functionArgs:r,network,senderAddress:contractInfo.defaultContractAddress},a=await callReadOnlyFunction(n);return{last_token_id:cvToValue(a.data.last_token_id),last_stx10_tick_index:cvToValue(a.data.last_stx10_tick_index)}},async queryNFTOwner(r){if(!r)return;const n=[uintCV(r)],a={contractAddress:contractInfo.defaultContractAddress,contractName:contractInfo.inscriptionsContract.name,functionName:"get-owner",functionArgs:n,network,senderAddress:contractInfo.defaultContractAddress},s=await callReadOnlyFunction(a),p=cvToValue(s);return p.value?p.value.value:null},async queryTickList(r){if(!r)return;let n=listCV();n.list=[];for(const c of r)n.list.push(uintCV(c));const a=[n],s={contractAddress:contractInfo.defaultContractAddress,contractName:contractInfo.inscriptionsContract.name,functionName:"get_stx10_infos_by_index_list",functionArgs:a,network,senderAddress:contractInfo.defaultContractAddress},p=await callReadOnlyFunction(s),g=cvToValue(p);let y=[];for(const c of g){const d=c.value;if(d.attr.value){const l=d.attr.value.value;y.push({tick:d.tick.value,supply:BigInt(d.supply.value),block:parseInt(l.block.value),lim:BigInt(l.lim.value),max:BigInt(l.max.value),tokenId:BigInt(l.tokenId.value)})}else break}return y}};export{ContractHelper as C,FileType as F,makeStandardNonFungiblePostCondition as a,buffer as b,cvToValue as c,makeStandardSTXPostCondition as m};
