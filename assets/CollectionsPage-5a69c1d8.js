import{_ as C,U as v,a as r,l as w,o as s,c as d,F as T,d as D,f as m,b as e,e as a,w as c,n as x,s as F,t as u,m as p,p as V,g as R}from"./index-b9d4469b.js";import"./ContractHelper-5627ab15.js";import{s as U}from"./supabase-dc56852f.js";import"./browser-ponyfill-71ec9403.js";const q={name:"CollectionsPage",components:{},data(){return{loadState:0,bReqFail:!1,bHelpDialogVisible:!1,kFailTip:"Request fail, please try again later",collections:[]}},async mounted(){this.loadCollections()},methods:{async fillFakeData(o){this.loadState=1;const t={id:"megapont-ape-club",name:"Megapont Ape Club",iconUrl:"https://images.gamma.io/cdn-cgi/image/quality=100,width=150,height=150/https://images.gamma.io/ipfs/QmZjrCc9836Njqw1Yx8ztM6FbJzvuZijwtZJSkKPxLTMWU/225f43251ea44",rangeStart:100,rangeEnd:200};for(let n=0;n<o;n++)this.collections.push(t);this.loadState=2},async loadCollections(){try{this.loadState=1;const{data:o,error:t,status:n}=await U.from("collection").select("id, name, iconurl, startno, endno").order("priority",{ascending:!0}).limit(30);n==200&&!t?(this.bReqFail=!1,this.setTableData(o)):(console.log("loadCollections fail, status:",n,"error: ",t),v.alert(this.kFailTip))}catch{v.alert(this.kFailTip),this.bReqFail=!0}finally{this.loadState=2}},setTableData(o){for(const t of o)this.collections.push({id:t.id,name:t.name,iconUrl:t.iconurl,rangeStart:t.startno,rangeEnd:t.endno})},onClickCollection(o){const t=this.$router.resolve({path:`/collection/${this.collections[o-1].id}`});window.open(t.href,"_blank")},onClickShowHelp(){this.bHelpDialogVisible=!0}}},f=o=>(V("data-v-6d6a36e2"),o=o(),R(),o),H={id:"main"},I=f(()=>e("div",{id:"title"},"Collections",-1)),A={key:0,id:"cardAreaOuter"},E={class:"collectionTitle"},M={class:"collectionRange"},N={key:1,style:{"margin-top":"100px"}},P={style:{position:"fixed",bottom:"50px",left:"50%",transform:"translate(-50%, 0%)"}},B={key:2,style:{"min-height":"200px"},"element-loading-background":"rgba(0, 0, 0, 0)"},L=f(()=>e("div",{id:"helpContent"},[e("div",null,"Step 1."),e("div",null,"Use the mint address of the first inscription in your collection, send 0.1 STX to SP1BMZTS416A3VTMN0SYTRMEJSCHW75RRAKXWF4DZ, fill memo with your email address."),e("p"),e("div",null,"Step 2."),e("div",null,[p("Use the email address above, send email to "),e("a",{href:"mailto:stacksinscription@proton.me",class:"helpLink"},"stacksinscription@proton.me"),p(" with:")]),e("div",null,"* Transaction link in step 1."),e("div",null,"* Collection name (less than 64 characters)."),e("div",null,"* Logo file (128x128 pixels, as attachment)."),e("div",null,"* Description (less than 1000 characters)"),e("div",null,"* Twitter"),e("div",null,"* Website (optional)"),e("div",null,"* Discord (optional)"),e("div",null,"* Telegram (optional)"),e("div",null,[p("* Inscription ID list (use comma(,) as seperator, "),e("a",{href:"https://stacksinscription.com/#/tools",target:"_blank",class:"helpLink"},"this tool"),p(" may help)")]),e("div",null,"* Total count"),e("p"),e("div",null,"PS:"),e("div",null,"* Collection needs contain at least 100 images.")],-1));function Z(o,t,n,W,l,h){const b=r("el-avatar"),_=r("el-space"),k=r("el-card"),g=r("el-button"),S=r("el-dialog"),y=w("loading");return s(),d("div",H,[I,l.loadState==2&&l.collections.length>0?(s(),d("div",A,[(s(!0),d(T,null,D(l.collections.length,i=>(s(),F(g,{link:"",plain:"",class:"itemArea",key:i,onClick:j=>h.onClickCollection(i)},{default:c(()=>[a(k,{shadow:"hover",class:"cardArea","body-style":{padding:"8px"}},{default:c(()=>[a(_,null,{default:c(()=>[a(b,{shape:"circle",size:64,src:l.collections[i-1].iconUrl},null,8,["src"]),a(_,{direction:"vertical",alignment:"start",style:{"margin-left":"8px","text-align":"left"}},{default:c(()=>[e("div",E,u(l.collections[i-1].name),1),e("div",M,"#"+u(l.collections[i-1].rangeStart)+" - #"+u(l.collections[i-1].rangeEnd),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):m("",!0),l.loadState==2&&!l.bReqFail&&l.collections.length==0?(s(),d("div",N," Empty ")):m("",!0),e("div",P,[a(g,{type:"info",link:"",onClick:h.onClickShowHelp},{default:c(()=>[p("Submit collection")]),_:1},8,["onClick"])]),l.loadState==1?x((s(),d("div",B,null,512)),[[y,l.loadState==1]]):m("",!0),a(S,{center:!0,title:"Submit collection",modelValue:l.bHelpDialogVisible,"onUpdate:modelValue":t[0]||(t[0]=i=>l.bHelpDialogVisible=i),width:"800px"},{default:c(()=>[L]),_:1},8,["modelValue"])])}const Y=C(q,[["render",Z],["__scopeId","data-v-6d6a36e2"]]);export{Y as default};
